!function(t){function i(r){if(e[r])return e[r].exports;var n=e[r]={i:r,l:!1,exports:{}};return t[r].call(n.exports,n,n.exports,i),n.l=!0,n.exports}var e={};i.m=t,i.c=e,i.i=function(t){return t},i.d=function(t,e,r){i.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:r})},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,i){return Object.prototype.hasOwnProperty.call(t,i)},i.p="",i(i.s=11)}([function(t,i,e){"use strict";function r(t){if(Array.isArray(t)){for(var i=0,e=Array(t.length);i<t.length;i++)e[i]=t[i];return e}return Array.from(t)}function n(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(i,"__esModule",{value:!0});var s=function(){function t(t,i){for(var e=0;e<i.length;e++){var r=i[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(i,e,r){return e&&t(i.prototype,e),r&&t(i,r),i}}(),a=function(){function t(i,e,r){n(this,t),this.label=i,this.type=e,this.data=r}return s(t,[{key:"draw",value:function(t,i){switch(this.type){case 35676:var e=i.getUniformLocation(this.label);t.uniformMatrix4fv(e,!1,this.data);break;case 35665:var n=i.getUniformLocation(this.label);t.uniform3f.apply(t,[n].concat(r(this.data)));break;default:console.error("Uniform type unknow: {label:",this.label,", type:",this.type,"}")}}}]),t}();i.default=a},function(t,i,e){"use strict";function r(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}function n(t,i){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!i||"object"!=typeof i&&"function"!=typeof i?t:i}function s(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Super expression must either be null or a function, not "+typeof i);t.prototype=Object.create(i&&i.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),i&&(Object.setPrototypeOf?Object.setPrototypeOf(t,i):t.__proto__=i)}Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function t(t,i){for(var e=0;e<i.length;e++){var r=i[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(i,e,r){return e&&t(i.prototype,e),r&&t(i,r),i}}(),h=function t(i,e,r){null===i&&(i=Function.prototype);var n=Object.getOwnPropertyDescriptor(i,e);if(void 0===n){var s=Object.getPrototypeOf(i);return null===s?void 0:t(s,e,r)}if("value"in n)return n.value;var a=n.get;if(void 0!==a)return a.call(r)},o=e(2),u=function(t){return t&&t.__esModule?t:{default:t}}(o),l=function(t){function i(t){r(this,i);var e=n(this,(i.__proto__||Object.getPrototypeOf(i)).call(this));return e.label=t,e}return s(i,t),a(i,[{key:"draw",value:function(t,e){h(i.prototype.__proto__||Object.getPrototypeOf(i.prototype),"draw",this).call(this,t);var r=e.getAttribLocation(this.label);t.vertexAttribPointer(r,this.itemSize,this.itemType,!1,0,0)}}]),i}(u.default);i.default=l},function(t,i,e){"use strict";function r(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(i,"__esModule",{value:!0});var n=function(){function t(t,i){for(var e=0;e<i.length;e++){var r=i[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(i,e,r){return e&&t(i.prototype,e),r&&t(i,r),i}}(),s=function(){function t(){r(this,t),this.buffer=null}return n(t,[{key:"isInitialized",value:function(){return!!this.buffer}},{key:"setArray",value:function(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:34962,e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:35044;this.arrayType=i,this.data=t,this.arrayUsage=e}},{key:"setItems",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5126,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.itemType=t,this.itemSize=i}},{key:"init",value:function(t,i){var e=t.createBuffer();return t.bindBuffer(this.arrayType,e),t.bufferData(this.arrayType,this.data,this.arrayUsage),this.buffer=e,!0}},{key:"draw",value:function(t){t.bindBuffer(this.arrayType,this.buffer)}}]),t}();i.default=s},function(t,i,e){"use strict";function r(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}function n(t,i){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!i||"object"!=typeof i&&"function"!=typeof i?t:i}function s(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Super expression must either be null or a function, not "+typeof i);t.prototype=Object.create(i&&i.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),i&&(Object.setPrototypeOf?Object.setPrototypeOf(t,i):t.__proto__=i)}Object.defineProperty(i,"__esModule",{value:!0});var h=function(){function t(t,i){var e=[],r=!0,n=!1,s=void 0;try{for(var a,h=t[Symbol.iterator]();!(r=(a=h.next()).done)&&(e.push(a.value),!i||e.length!==i);r=!0);}catch(t){n=!0,s=t}finally{try{!r&&h.return&&h.return()}finally{if(n)throw s}}return e}return function(i,e){if(Array.isArray(i))return i;if(Symbol.iterator in Object(i))return t(i,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function(){function t(t,i){for(var e=0;e<i.length;e++){var r=i[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(i,e,r){return e&&t(i.prototype,e),r&&t(i,r),i}}(),u=function(t){function i(){r(this,i);var t=n(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,16));return t[0]=1,t[5]=1,t[10]=1,t[15]=1,t}return s(i,t),o(i,[{key:"clone",value:function(){var t=new i;return t.set(this),t}},{key:"copy",value:function(t){return t.set(this),this}},{key:"identity",value:function(){return this[0]=1,this[1]=0,this[2]=0,this[3]=0,this[4]=0,this[5]=1,this[6]=0,this[7]=0,this[8]=0,this[9]=0,this[10]=1,this[11]=0,this[12]=0,this[13]=0,this[14]=0,this[15]=1,this}},{key:"add",value:function(t){return this[0]+=t[0],this[1]+=t[1],this[2]+=t[2],this[3]+=t[3],this[4]+=t[4],this[5]+=t[5],this[6]+=t[6],this[7]+=t[7],this[8]+=t[8],this[9]+=t[9],this[10]+=t[10],this[11]+=t[11],this[12]+=t[12],this[13]+=t[13],this[14]+=t[14],this[15]+=t[15],this}},{key:"subtract",value:function(t){return this[0]-=t[0],this[1]-=t[1],this[2]-=t[2],this[3]-=t[3],this[4]-=t[4],this[5]-=t[5],this[6]-=t[6],this[7]-=t[7],this[8]-=t[8],this[9]-=t[9],this[10]-=t[10],this[11]-=t[11],this[12]-=t[12],this[13]-=t[13],this[14]-=t[14],this[15]-=t[15],this}},{key:"multiplyScalar",value:function(t){return this[0]*=t,this[1]*=t,this[2]*=t,this[3]*=t,this[4]*=t,this[5]*=t,this[6]*=t,this[7]*=t,this[8]*=t,this[9]*=t,this[10]*=t,this[11]*=t,this[12]*=t,this[13]*=t,this[14]*=t,this[15]*=t,this}},{key:"multiplyScalarAndAdd",value:function(t,i){return this[0]+=t[0]*i,this[1]+=t[1]*i,this[2]+=t[2]*i,this[3]+=t[3]*i,this[4]+=t[4]*i,this[5]+=t[5]*i,this[6]+=t[6]*i,this[7]+=t[7]*i,this[8]+=t[8]*i,this[9]+=t[9]*i,this[10]+=t[10]*i,this[11]+=t[11]*i,this[12]+=t[12]*i,this[13]+=t[13]*i,this[14]+=t[14]*i,this[15]+=t[15]*i,this}},{key:"exactEquals",value:function(t){return this[0]===t[0]&&this[1]===t[1]&&this[2]===t[2]&&this[3]===t[3]&&this[4]===t[4]&&this[5]===t[5]&&this[6]===t[6]&&this[7]===t[7]&&this[8]===t[8]&&this[9]===t[9]&&this[10]===t[10]&&this[11]===t[11]&&this[12]===t[12]&&this[13]===t[13]&&this[14]===t[14]&&this[15]===t[15]}},{key:"equals",value:function(t){var i=h(this,16),e=i[0],r=i[1],n=i[2],s=i[3],a=i[4],o=i[5],u=i[6],l=i[7],f=i[8],c=i[9],v=i[10],d=i[11],y=i[12],p=i[13],b=i[14],m=i[15],M=h(t,16),g=M[0],w=M[1],x=M[2],_=M[3],T=M[4],k=M[5],P=M[6],E=M[7],O=M[8],I=M[9],S=M[10],A=M[11],R=M[12],C=M[13],j=M[14],L=M[15];return Math.abs(e-g)<=1e-6*Math.max(1,Math.abs(e),Math.abs(g))&&Math.abs(r-w)<=1e-6*Math.max(1,Math.abs(r),Math.abs(w))&&Math.abs(n-x)<=1e-6*Math.max(1,Math.abs(n),Math.abs(x))&&Math.abs(s-_)<=1e-6*Math.max(1,Math.abs(s),Math.abs(_))&&Math.abs(a-T)<=1e-6*Math.max(1,Math.abs(a),Math.abs(T))&&Math.abs(o-k)<=1e-6*Math.max(1,Math.abs(o),Math.abs(k))&&Math.abs(u-P)<=1e-6*Math.max(1,Math.abs(u),Math.abs(P))&&Math.abs(l-E)<=1e-6*Math.max(1,Math.abs(l),Math.abs(E))&&Math.abs(f-O)<=1e-6*Math.max(1,Math.abs(f),Math.abs(O))&&Math.abs(c-I)<=1e-6*Math.max(1,Math.abs(c),Math.abs(I))&&Math.abs(v-S)<=1e-6*Math.max(1,Math.abs(v),Math.abs(S))&&Math.abs(d-A)<=1e-6*Math.max(1,Math.abs(d),Math.abs(A))&&Math.abs(y-R)<=1e-6*Math.max(1,Math.abs(y),Math.abs(R))&&Math.abs(p-C)<=1e-6*Math.max(1,Math.abs(p),Math.abs(C))&&Math.abs(b-j)<=1e-6*Math.max(1,Math.abs(b),Math.abs(j))&&Math.abs(m-L)<=1e-6*Math.max(1,Math.abs(m),Math.abs(L))}},{key:"transpose",value:function(t){if(t===this){var i=t[1],e=t[2],r=t[3],n=t[6],s=t[7],a=t[11];this[1]=t[4],this[2]=t[8],this[3]=t[12],this[4]=i,this[6]=t[9],this[7]=t[13],this[8]=e,this[9]=n,this[11]=t[14],this[12]=r,this[13]=s,this[14]=a}else this[0]=t[0],this[1]=t[4],this[2]=t[8],this[3]=t[12],this[4]=t[1],this[5]=t[5],this[6]=t[9],this[7]=t[13],this[8]=t[2],this[9]=t[6],this[10]=t[10],this[11]=t[14],this[12]=t[3],this[13]=t[7],this[14]=t[11],this[15]=t[15];return this}},{key:"invert",value:function(t){var i=h(this,16),e=i[0],r=i[1],n=i[2],s=i[3],a=i[4],o=i[5],u=i[6],l=i[7],f=i[8],c=i[9],v=i[10],d=i[11],y=i[12],p=i[13],b=i[14],m=i[15],M=e*o-r*a,g=e*u-n*a,w=e*l-s*a,x=r*u-n*o,_=r*l-s*o,T=n*l-s*u,k=f*p-c*y,P=f*b-v*y,E=f*m-d*y,O=c*b-v*p,I=c*m-d*p,S=v*m-d*b,A=M*S-g*I+w*O+x*E-_*P+T*k;return A?(A=1/A,this[0]=(o*S-u*I+l*O)*A,this[1]=(n*I-r*S-s*O)*A,this[2]=(p*T-b*_+m*x)*A,this[3]=(v*_-c*T-d*x)*A,this[4]=(u*E-a*S-l*P)*A,this[5]=(e*S-n*E+s*P)*A,this[6]=(b*w-y*T-m*g)*A,this[7]=(f*T-v*w+d*g)*A,this[8]=(a*I-o*E+l*k)*A,this[9]=(r*E-e*I-s*k)*A,this[10]=(y*_-p*w+m*M)*A,this[11]=(c*w-f*_-d*M)*A,this[12]=(o*P-a*O-u*k)*A,this[13]=(e*O-r*P+n*k)*A,this[14]=(p*g-y*x-b*M)*A,this[15]=(f*x-c*g+v*M)*A,this):this}},{key:"adjoint",value:function(t){var i=h(this,16),e=i[0],r=i[1],n=i[2],s=i[3],a=i[4],o=i[5],u=i[6],l=i[7],f=i[8],c=i[9],v=i[10],d=i[11],y=i[12],p=i[13],b=i[14],m=i[15];return this[0]=o*(v*m-d*b)-c*(u*m-l*b)+p*(u*d-l*v),this[1]=-(r*(v*m-d*b)-c*(n*m-s*b)+p*(n*d-s*v)),this[2]=r*(u*m-l*b)-o*(n*m-s*b)+p*(n*l-s*u),this[3]=-(r*(u*d-l*v)-o*(n*d-s*v)+c*(n*l-s*u)),this[4]=-(a*(v*m-d*b)-f*(u*m-l*b)+y*(u*d-l*v)),this[5]=e*(v*m-d*b)-f*(n*m-s*b)+y*(n*d-s*v),this[6]=-(e*(u*m-l*b)-a*(n*m-s*b)+y*(n*l-s*u)),this[7]=e*(u*d-l*v)-a*(n*d-s*v)+f*(n*l-s*u),this[8]=a*(c*m-d*p)-f*(o*m-l*p)+y*(o*d-l*c),this[9]=-(e*(c*m-d*p)-f*(r*m-s*p)+y*(r*d-s*c)),this[10]=e*(o*m-l*p)-a*(r*m-s*p)+y*(r*l-s*o),this[11]=-(e*(o*d-l*c)-a*(r*d-s*c)+f*(r*l-s*o)),this[12]=-(a*(c*b-v*p)-f*(o*b-u*p)+y*(o*v-u*c)),this[13]=e*(c*b-v*p)-f*(r*b-n*p)+y*(r*v-n*c),this[14]=-(e*(o*b-u*p)-a*(r*b-n*p)+y*(r*u-n*o)),this[15]=e*(o*v-u*c)-a*(r*v-n*c)+f*(r*u-n*o),this}},{key:"determinant",value:function(){var t=h(this,16),i=t[0],e=t[1],r=t[2],n=t[3],s=t[4],a=t[5],o=t[6],u=t[7],l=t[8],f=t[9],c=t[10],v=t[11],d=t[12],y=t[13],p=t[14],b=t[15];return(i*a-e*s)*(c*b-v*p)-(i*o-r*s)*(f*b-v*y)+(i*u-n*s)*(f*p-c*y)+(e*o-r*a)*(l*b-v*d)-(e*u-n*a)*(l*p-c*d)+(r*u-n*o)*(l*y-f*d)}},{key:"multiply",value:function(t){var i=h(this,16),e=i[0],r=i[1],n=i[2],s=i[3],a=i[4],o=i[5],u=i[6],l=i[7],f=i[8],c=i[9],v=i[10],d=i[11],y=i[12],p=i[13],b=i[14],m=i[15],M=h(t,4),g=M[0],w=M[1],x=M[2],_=M[3];return this[0]=g*e+w*a+x*f+_*y,this[1]=g*r+w*o+x*c+_*p,this[2]=g*n+w*u+x*v+_*b,this[3]=g*s+w*l+x*d+_*m,g=t[4],w=t[5],x=t[6],_=t[7],this[4]=g*e+w*a+x*f+_*y,this[5]=g*r+w*o+x*c+_*p,this[6]=g*n+w*u+x*v+_*b,this[7]=g*s+w*l+x*d+_*m,g=t[8],w=t[9],x=t[10],_=t[11],this[8]=g*e+w*a+x*f+_*y,this[9]=g*r+w*o+x*c+_*p,this[10]=g*n+w*u+x*v+_*b,this[11]=g*s+w*l+x*d+_*m,g=t[12],w=t[13],x=t[14],_=t[15],this[12]=g*e+w*a+x*f+_*y,this[13]=g*r+w*o+x*c+_*p,this[14]=g*n+w*u+x*v+_*b,this[15]=g*s+w*l+x*d+_*m,this}},{key:"translate",value:function(t){var i=h(t,3),e=i[0],r=i[1],n=i[2];return this[12]=this[0]*e+this[4]*r+this[8]*n+this[12],this[13]=this[1]*e+this[5]*r+this[9]*n+this[13],this[14]=this[2]*e+this[6]*r+this[10]*n+this[14],this[15]=this[3]*e+this[7]*r+this[11]*n+this[15],this}},{key:"scale",value:function(t){var i=h(t,3),e=i[0],r=i[1],n=i[2];return this[0]*=e,this[1]*=e,this[2]*=e,this[3]*=e,this[4]*=r,this[5]*=r,this[6]*=r,this[7]*=r,this[8]*=n,this[9]*=n,this[10]*=n,this[11]*=n,this}},{key:"rotate",value:function(t,i){var e=h(i,3),r=e[0],n=e[1],s=e[2],a=Math.sqrt(r*r+n*n+s*s);if(Math.abs(a)>1e-6){a=1/a,r*=a,n*=a,s*=a;var o=Math.sin(t),u=Math.cos(t),l=1-u,f=h(this,12),c=f[0],v=f[1],d=f[2],y=f[3],p=f[4],b=f[5],m=f[6],M=f[7],g=f[8],w=f[9],x=f[10],_=f[11],T=r*r*l+u,k=n*r*l+s*o,P=s*r*l-n*o,E=r*n*l-s*o,O=n*n*l+u,I=s*n*l+r*o,S=r*s*l+n*o,A=n*s*l-r*o,R=s*s*l+u;this[0]=c*T+p*k+g*P,this[1]=v*T+b*k+w*P,this[2]=d*T+m*k+x*P,this[3]=y*T+M*k+_*P,this[4]=c*E+p*O+g*I,this[5]=v*E+b*O+w*I,this[6]=d*E+m*O+x*I,this[7]=y*E+M*O+_*I,this[8]=c*S+p*A+g*R,this[9]=v*S+b*A+w*R,this[10]=d*S+m*A+x*R,this[11]=y*S+M*A+_*R}return this}},{key:"rotateX",value:function(t){var i=Math.sin(t),e=Math.cos(t),r=this[4],n=this[5],s=this[6],a=this[7],h=this[8],o=this[9],u=this[10],l=this[11];return this[4]=r*e+h*i,this[5]=n*e+o*i,this[6]=s*e+u*i,this[7]=a*e+l*i,this[8]=h*e-r*i,this[9]=o*e-n*i,this[10]=u*e-s*i,this[11]=l*e-a*i,this}},{key:"rotateY",value:function(t){var i=Math.sin(t),e=Math.cos(t),r=a[0],n=a[1],s=a[2],h=a[3],o=a[8],u=a[9],l=a[10],f=a[11];return this[0]=r*e-o*i,this[1]=n*e-u*i,this[2]=s*e-l*i,this[3]=h*e-f*i,this[8]=r*i+o*e,this[9]=n*i+u*e,this[10]=s*i+l*e,this[11]=h*i+f*e,this}},{key:"rotateZ",value:function(t){var i=Math.sin(t),e=Math.cos(t),r=h(this,8),n=r[0],s=r[1],a=(r[2],r[3]),o=r[4],u=r[5],l=r[6],f=r[7];return this[0]=n*e+o*i,this[1]=s*e+u*i,this[2]=a02*e+l*i,this[3]=a*e+f*i,this[4]=o*e-n*i,this[5]=u*e-s*i,this[6]=l*e-a02*i,this[7]=f*e-a*i,this}},{key:"fromTranslation",value:function(t){return this[0]=1,this[1]=0,this[2]=0,this[3]=0,this[4]=0,this[5]=1,this[6]=0,this[7]=0,this[8]=0,this[9]=0,this[10]=1,this[11]=0,this[12]=t[0],this[13]=t[1],this[14]=t[2],this[15]=1,this}},{key:"fromScaling",value:function(t){return this[0]=t[0],this[1]=0,this[2]=0,this[3]=0,this[4]=0,this[5]=t[1],this[6]=0,this[7]=0,this[8]=0,this[9]=0,this[10]=t[2],this[11]=0,this[12]=0,this[13]=0,this[14]=0,this[15]=1,this}},{key:"fromRotation",value:function(t,i){var e=h(i,3),r=e[0],n=e[1],s=e[2],a=Math.sqrt(r*r+n*n+s*s);if(Math.abs(a)>1e-6){a=1/a,r*=a,n*=a,s*=a;var o=Math.sin(t),u=Math.cos(t),l=1-u;this[0]=r*r*l+u,this[1]=n*r*l+s*o,this[2]=s*r*l-n*o,this[3]=0,this[4]=r*n*l-s*o,this[5]=n*n*l+u,this[6]=s*n*l+r*o,this[7]=0,this[8]=r*s*l+n*o,this[9]=n*s*l-r*o,this[10]=s*s*l+u,this[11]=0,this[12]=0,this[13]=0,this[14]=0,this[15]=1}return this}},{key:"fromXRotation",value:function(t){var i=Math.sin(t),e=Math.cos(t);return this[0]=1,this[1]=0,this[2]=0,this[3]=0,this[4]=0,this[5]=e,this[6]=i,this[7]=0,this[8]=0,this[9]=-i,this[10]=e,this[11]=0,this[12]=0,this[13]=0,this[14]=0,this[15]=1,this}},{key:"fromYRotation",value:function(t){var i=Math.sin(t),e=Math.cos(t);return this[0]=e,this[1]=0,this[2]=-i,this[3]=0,this[4]=0,this[5]=1,this[6]=0,this[7]=0,this[8]=i,this[9]=0,this[10]=e,this[11]=0,this[12]=0,this[13]=0,this[14]=0,this[15]=1,this}},{key:"fromZRotation",value:function(t){var i=Math.sin(t),e=Math.cos(t);return this[0]=e,this[1]=i,this[2]=0,this[3]=0,this[4]=-i,this[5]=e,this[6]=0,this[7]=0,this[8]=0,this[9]=0,this[10]=1,this[11]=0,this[12]=0,this[13]=0,this[14]=0,this[15]=1,this}},{key:"fromQuat",value:function(t){var i=h(t,4),e=i[0],r=i[1],n=i[2],s=i[3],a=e+e,o=r+r,u=n+n,l=e*a,f=r*a,c=r*o,v=n*a,d=n*o,y=n*u,p=s*a,b=s*o,m=s*u;return this[0]=1-c-y,this[1]=f+m,this[2]=v-b,this[3]=0,this[4]=f-m,this[5]=1-l-y,this[6]=d+p,this[7]=0,this[8]=v+b,this[9]=d-p,this[10]=1-l-c,this[11]=0,this[12]=0,this[13]=0,this[14]=0,this[15]=1,this}},{key:"fromRotationTranslation",value:function(t,i){var e=h(t,4),r=e[0],n=e[1],s=e[2],a=e[3],o=r+r,u=n+n,l=s+s,f=r*o,c=r*u,v=r*l,d=n*u,y=n*l,p=s*l,b=a*o,m=a*u,M=a*l;return this[0]=1-(d+p),this[1]=c+M,this[2]=v-m,this[3]=0,this[4]=c-M,this[5]=1-(f+p),this[6]=y+b,this[7]=0,this[8]=v+m,this[9]=y-b,this[10]=1-(f+d),this[11]=0,this[12]=i[0],this[13]=i[1],this[14]=i[2],this[15]=1,this}},{key:"fromRotationTranslationScale",value:function(t,i,e){var r=h(t,4),n=r[0],s=r[1],a=r[2],o=r[3],u=n+n,l=s+s,f=a+a,c=n*u,v=n*l,d=n*f,y=s*l,p=s*f,b=a*f,m=o*u,M=o*l,g=o*f,w=h(e,3),x=w[0],_=w[1],T=w[2];return this[0]=(1-(y+b))*x,this[1]=(v+g)*x,this[2]=(d-M)*x,this[3]=0,this[4]=(v-g)*_,this[5]=(1-(c+b))*_,this[6]=(p+m)*_,this[7]=0,this[8]=(d+M)*T,this[9]=(p-m)*T,this[10]=(1-(c+y))*T,this[11]=0,this[12]=i[0],this[13]=i[1],this[14]=i[2],this[15]=1,this}},{key:"fromRotationTranslationScaleOrigin",value:function(t,i,e,r){var n=h(t,4),s=n[0],a=n[1],o=n[2],u=n[3],l=s+s,f=a+a,c=o+o,v=s*l,d=s*f,y=s*c,p=a*f,b=a*c,m=o*c,M=u*l,g=u*f,w=u*c,x=h(e,3),_=x[0],T=x[1],k=x[2],P=h(r,3),E=P[0],O=P[1],I=P[2];return this[0]=(1-(p+m))*_,this[1]=(d+w)*_,this[2]=(y-g)*_,this[3]=0,this[4]=(d-w)*T,this[5]=(1-(v+m))*T,this[6]=(b+M)*T,this[7]=0,this[8]=(y+g)*k,this[9]=(b-M)*k,this[10]=(1-(v+p))*k,this[11]=0,this[12]=i[0]+E-(this[0]*E+this[4]*O+this[8]*I),this[13]=i[1]+O-(this[1]*E+this[5]*O+this[9]*I),this[14]=i[2]+I-(this[2]*E+this[6]*O+this[10]*I),this[15]=1,this}},{key:"getTranslation",value:function(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Float32Array(3);return i[0]=this[12],i[1]=this[13],i[2]=this[14],i}},{key:"getRotation",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Float32Array(4),i=this[0]+this[5]+this[10];if(i>0){var e=2*Math.sqrt(i+1);t[0]=(this[6]-this[9])/e,t[1]=(this[8]-this[2])/e,t[2]=(this[1]-this[4])/e,t[3]=.25*e}else if(this[0]>this[5]&this[0]>this[10]){var r=2*Math.sqrt(1+this[0]-this[5]-this[10]);t[0]=.25*r,t[1]=(this[1]+this[4])/r,t[2]=(this[8]+this[2])/r,t[3]=(this[6]-this[9])/r}else if(this[5]>this[10]){var n=Math.sqrt(1+this[5]-this[0]-this[10]);t[0]=(this[1]+this[4])/n*2,t[1]=.25*n,t[2]=(this[6]+this[9])/n,t[3]=(this[8]-this[2])/n}else{var s=2*Math.sqrt(1+this[10]-this[0]-this[5]);t[0]=(this[8]+this[2])/s,t[1]=(this[6]+this[9])/s,t[2]=.25*s,t[3]=(this[1]-this[4])/s}return t}},{key:"frustrum",value:function(t,i,e,r,n,s){var a=1/(i-t),h=1/(r-e),o=1/(n-s);return this[0]=2*n*a,this[1]=0,this[2]=0,this[3]=0,this[4]=0,this[5]=2*n*h,this[6]=0,this[7]=0,this[8]=(i+t)*a,this[9]=(r+e)*h,this[10]=(s+n)*o,this[11]=-1,this[12]=0,this[13]=0,this[14]=s*n*2*o,this[15]=0,this}},{key:"perspective",value:function(t,i,e,r){var n=1/Math.tan(t/2),s=1/(e-r);return this[0]=n/i,this[1]=0,this[2]=0,this[3]=0,this[4]=0,this[5]=n,this[6]=0,this[7]=0,this[8]=0,this[9]=0,this[10]=(r+e)*s,this[11]=-1,this[12]=0,this[13]=0,this[14]=2*r*e*s,this[15]=0,this}},{key:"perspectiveFromFieldOfView",value:function(t,i,e){var r=Math.tan(t.upDegrees*Math.PI/180),n=Math.tan(t.downDegrees*Math.PI/180),s=Math.tan(t.leftDegrees*Math.PI/180),a=Math.tan(t.rightDegrees*Math.PI/180),h=2/(s+a),o=2/(r+n);return this[0]=h,this[1]=0,this[2]=0,this[3]=0,this[4]=0,this[5]=o,this[6]=0,this[7]=0,this[8]=-(s-a)*h*.5,this[9]=(r-n)*o*.5,this[10]=e/(i-e),this[11]=-1,this[12]=0,this[13]=0,this[14]=e*i/(i-e),this[15]=0,this}},{key:"ortho",value:function(t,i,e,r,n,s){var a=1/(t-i),h=1/(e-r),o=1/(n-s);return this[0]=-2*a,this[1]=0,this[2]=0,this[3]=0,this[4]=0,this[5]=-2*h,this[6]=0,this[7]=0,this[8]=0,this[9]=0,this[10]=2*o,this[11]=0,this[12]=(t+i)*a,this[13]=(r+e)*h,this[14]=(s+n)*o,this[15]=1,this}},{key:"lookAt",value:function(t,i,e){var r=h(t,3),n=r[0],s=r[1],a=r[2],o=h(e,3),u=o[0],l=o[1],f=o[2],c=h(i,3),v=c[0],d=c[1],y=c[2];if(Math.abs(n-v)<1e-6&&Math.abs(s-d)<1e-6&&Math.abs(a-y)<1e-6)return this.identity();var p=n-v,b=s-d,m=a-y,M=1/Math.sqrt(p*p+b*b+m*m);p*=M,b*=M,m*=M;var g=l*m-f*b,w=f*p-u*m,x=u*b-l*p;M=Math.sqrt(g*g+w*w+x*x),M?(M=1/M,g*=M,w*=M,x*=M):(g=0,w=0,x=0);var _=b*x-m*w,T=m*g-p*x,k=p*w-b*g;return M=Math.sqrt(_*_+T*T+k*k),M?(M=1/M,_*=M,T*=M,k*=M):(_=0,T=0,k=0),this[0]=g,this[1]=_,this[2]=p,this[3]=0,this[4]=w,this[5]=T,this[6]=b,this[7]=0,this[8]=x,this[9]=k,this[10]=m,this[11]=0,this[12]=-(g*n+w*s+x*a),this[13]=-(_*n+T*s+k*a),this[14]=-(p*n+b*s+m*a),this[15]=1,this}},{key:"frob",value:function(){return Math.sqrt(Math.pow(this[0],2)+Math.pow(this[1],2)+Math.pow(this[2],2)+Math.pow(this[3],2)+Math.pow(this[4],2)+Math.pow(this[5],2)+Math.pow(this[6],2)+Math.pow(this[7],2)+Math.pow(this[8],2)+Math.pow(this[9],2)+Math.pow(this[10],2)+Math.pow(this[11],2)+Math.pow(this[12],2)+Math.pow(this[13],2)+Math.pow(this[14],2)+Math.pow(this[15],2))}}]),i}(Float32Array);i.default=u},function(t,i,e){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function n(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(i,"__esModule",{value:!0});var s=function(){function t(t,i){for(var e=0;e<i.length;e++){var r=i[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(i,e,r){return e&&t(i.prototype,e),r&&t(i,r),i}}(),a=e(2),h=r(a),o=e(1),u=r(o),l=function(){function t(){n(this,t),this.attributes=[],this.buffers=[],this.hasIndices=!1,this.numItems=0}return s(t,[{key:"isInitialized",value:function(){var t=!0,i=!1,e=void 0;try{for(var r,n=this.attributes[Symbol.iterator]();!(t=(r=n.next()).done);t=!0){if(!r.value.isInitialized())return!1}}catch(t){i=!0,e=t}finally{try{!t&&n.return&&n.return()}finally{if(i)throw e}}return!0}},{key:"addVertices",value:function(t,i,e){var r=new u.default(t);r.setArray(new Float32Array(i),34962),r.setItems(5126,e),this.attributes.push(r),this.numItems<1&&(this.numItems=i.length/e)}},{key:"addIndices",value:function(t){this.hasIndices=!0;var i=new h.default;i.setArray(new Uint16Array(t),34963),i.setItems(5125,1),this.buffers.push(i),this.numItems=t.length}},{key:"init",value:function(t,i){var e=!0,r=!0,n=!1,s=void 0;try{for(var a,h=this.attributes[Symbol.iterator]();!(r=(a=h.next()).done);r=!0){var o=a.value;o.isInitialized()||o.init(t,i)||(e=!1)}}catch(t){n=!0,s=t}finally{try{!r&&h.return&&h.return()}finally{if(n)throw s}}var u=!0,l=!1,f=void 0;try{for(var c,v=this.buffers[Symbol.iterator]();!(u=(c=v.next()).done);u=!0){var d=c.value;d.isInitialized()||d.init(t,i)||(e=!1)}}catch(t){l=!0,f=t}finally{try{!u&&v.return&&v.return()}finally{if(l)throw f}}return e}},{key:"draw",value:function(t,i){var e=!0,r=!1,n=void 0;try{for(var s,a=this.attributes[Symbol.iterator]();!(e=(s=a.next()).done);e=!0){s.value.draw(t,i)}}catch(t){r=!0,n=t}finally{try{!e&&a.return&&a.return()}finally{if(r)throw n}}var h=!0,o=!1,u=void 0;try{for(var l,f=this.buffers[Symbol.iterator]();!(h=(l=f.next()).done);h=!0){l.value.draw(t,i)}}catch(t){o=!0,u=t}finally{try{!h&&f.return&&f.return()}finally{if(o)throw u}}}},{key:"display",value:function(t){this.hasIndices?t.drawElements(t.TRIANGLES,this.numItems,t.UNSIGNED_SHORT,0):t.drawArrays(t.TRIANGLES,0,this.numItems)}}]),t}();i.default=l},function(t,i,e){"use strict";function r(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(i,"__esModule",{value:!0});var n=function(){function t(t,i){for(var e=0;e<i.length;e++){var r=i[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(i,e,r){return e&&t(i.prototype,e),r&&t(i,r),i}}(),s="      \n    attribute vec3 aVertexPosition;\n    attribute vec4 aVertexColor;\n\n    uniform mat4 uMVMatrix;\n    uniform mat4 uPMatrix;\n\n    varying vec4 vColor;\n\n    void main(void) {\n        gl_Position = uPMatrix * uMVMatrix * vec4(aVertexPosition, 1.0);\n        vColor = aVertexColor;\n    }\n",a="\n    precision mediump float;\n\n    varying vec4 vColor;\n\n    void main(void) {\n        gl_FragColor = vColor;\n    }\n",h=0,o=function(){function t(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a;r(this,t),this.vertexShaderSrc=i,this.fragmentShaderSrc=e,this.attribLocation={},this.uniformLocation={},this.textureLocation={},this.textureIndex={},this.textureNum=0,this.id=++h}return n(t,[{key:"isInitialized",value:function(){return!!this.pointer}},{key:"getUniformLocation",value:function(t){return this.uniformLocation.hasOwnProperty(t)?this.uniformLocation[t]:(console.error("The uniform location "+t+" don'nt exist on this program"),null)}},{key:"getAttribLocation",value:function(t){return this.attribLocation.hasOwnProperty(t)?this.attribLocation[t]:(console.error("The attribute location "+t+" don'nt exist on this program"),null)}},{key:"getTextureLocation",value:function(t){return this.textureLocation.hasOwnProperty(t)?this.textureLocation[t]:(console.error("The texture location "+t+" don'nt exist on this program"),null)}},{key:"getTextureIndex",value:function(t){return this.textureIndex.hasOwnProperty(t)?this.textureIndex[t]:(console.error("The texture index "+t+" don'nt exist on this program"),null)}},{key:"init",value:function(t,i,e,r){this.vertexShader=this._createShader(t,35633,this.vertexShaderSrc),this.fragmentShader=this._createShader(t,35632,this.fragmentShaderSrc);var n=t.createProgram();t.attachShader(n,this.vertexShader),t.attachShader(n,this.fragmentShader),t.linkProgram(n),t.getProgramParameter(n,t.LINK_STATUS)||console.error("Shader initialization error"),t.useProgram(n);var s=!0,a=!1,h=void 0;try{for(var o,u=i[Symbol.iterator]();!(s=(o=u.next()).done);s=!0){var l=o.value,f=t.getAttribLocation(n,l.label);t.enableVertexAttribArray(f),this.attribLocation[l.label]=f}}catch(t){a=!0,h=t}finally{try{!s&&u.return&&u.return()}finally{if(a)throw h}}var c=!0,v=!1,d=void 0;try{for(var y,p=e[Symbol.iterator]();!(c=(y=p.next()).done);c=!0){var b=y.value,m=t.getUniformLocation(n,b.label);this.uniformLocation[b.label]=m}}catch(t){v=!0,d=t}finally{try{!c&&p.return&&p.return()}finally{if(v)throw d}}var M=!0,g=!1,w=void 0;try{for(var x,_=r[Symbol.iterator]();!(M=(x=_.next()).done);M=!0){var T=x.value,k=t.getUniformLocation(n,T.label);this.textureLocation[T.label]=k,this.textureIndex[T.label]=this.textureNum,this.textureNum++}}catch(t){g=!0,w=t}finally{try{!M&&_.return&&_.return()}finally{if(g)throw w}}return this.pointer=n,!0}},{key:"draw",value:function(t){t.useProgram(this.pointer)}},{key:"_createShader",value:function(t,i,e){var r=t.createShader(i);return t.shaderSource(r,e),t.compileShader(r),t.getShaderParameter(r,t.COMPILE_STATUS)?r:console.error("Une erreur est survenue au cours de la compilation du shader: "+t.getShaderInfoLog(r))}}]),t}();i.default=o},function(t,i,e){"use strict";function r(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(i,"__esModule",{value:!0});var n=function(){function t(t,i){for(var e=0;e<i.length;e++){var r=i[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(i,e,r){return e&&t(i.prototype,e),r&&t(i,r),i}}(),s=function(){function t(i){r(this,t),this.label=i,this.color=[255,255,255,255],this.srcs=[],this.pointer=null,this.parameters={9729:9987},this.setFormat()}return n(t,[{key:"setFormat",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:6408;this.format=t}},{key:"setParameters",value:function(t,i,e){}},{key:"isInitialized",value:function(){return!!this.pointer}},{key:"addDxt5URL",value:function(t){var i=(t.src,t.width),e=t.height;t.format,t.priority,floor(.25*(i+3)),floor(.25*(e+3)),this._isMultOf(i,4)&&this._isMultOf(e,4)}},{key:"addURL",value:function(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.srcs.push({size:i,src:t,internalformat:6408,img:null,priority:0,custom:!1})}},{key:"_startLoad",value:function(i){var e=this,r=this.srcs;if(r.length>0){r.sort(function(t,i){return t.size===i.size?t.size-i.size:t.priority-i.priority});this.srcs.filter(function(i){return i.size>=t.MAX_SIZE});if(r.length>1){var n=r[0],s=r[r.length-1];this._load(n,function(t){i(t),e._load(s,i)})}else r.length>0?this._load(r[0],i):console.warn("The GPU can'nt load a texture with size > ",t.MAX_SIZE)}else console.warn("URL of your texture",this.label,"not found: texture.addURL(URL, size = 0)")}},{key:"_load",value:function(t,i){var e=new Image;e.onload=function(){i(t)},t.img=e,e.src=t.src}},{key:"_isPowerOf2",value:function(t){return 0==(t&t-1)}},{key:"_isMultOf",value:function(t,i){return Number.isInteger(t/i)}},{key:"_setupFilterAndMipmap",value:function(t,i){this._isPowerOf2(i.width)&&this._isPowerOf2(i.height)?(t.generateMipmap(t.TEXTURE_2D),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR_MIPMAP_LINEAR)):(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR))}},{key:"setData",value:function(i){t.MAX_SIZE=i.getParameter(i.MAX_TEXTURE_SIZE),t.FORMAT={},console.log(i.COMPRESSED_TEXTURE_FORMATS);for(var e=i.getParameter(i.COMPRESSED_TEXTURE_FORMATS),r=0;r<e.length;r++)t.FORMAT[e[r]]=!0,console.log(e[r]);t._DATA_INITIALIZED=!0}},{key:"init",value:function(i,e){var r=this,n=i.createTexture();t._DATA_INITIALIZED||this.setData(i);var s=function(t){i.bindTexture(i.TEXTURE_2D,n),i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,!0),i.texImage2D(i.TEXTURE_2D,0,t.internalformat,r.format,i.UNSIGNED_BYTE,t.img),r._setupFilterAndMipmap(i,t.img)};i.bindTexture(i.TEXTURE_2D,n),i.texImage2D(i.TEXTURE_2D,0,i.RGB,1,1,0,i.RGB,i.UNSIGNED_BYTE,new Uint8Array(this.color));var a=e.getTextureLocation(this.label),h=e.getTextureIndex(this.label);return i.uniform1i(a,h),this.pointer=n,this._startLoad(s),!0}},{key:"draw",value:function(t,i){var e=i.getTextureIndex(this.label);t.activeTexture(t.TEXTURE0+e),t.bindTexture(t.TEXTURE_2D,this.pointer)}}]),t}();i.default=s},function(t,i,e){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function n(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}function s(t,i){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!i||"object"!=typeof i&&"function"!=typeof i?t:i}function a(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Super expression must either be null or a function, not "+typeof i);t.prototype=Object.create(i&&i.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),i&&(Object.setPrototypeOf?Object.setPrototypeOf(t,i):t.__proto__=i)}Object.defineProperty(i,"__esModule",{value:!0});var h=function(){function t(t,i){for(var e=0;e<i.length;e++){var r=i[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(i,e,r){return e&&t(i.prototype,e),r&&t(i,r),i}}(),o=e(3),u=r(o),l=e(0),f=r(l),c=function(t){function i(t){n(this,i);var e=s(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,t,35676,new u.default));return e.fovy=45,e.near=.1,e.far=1e3,e._matrix=new u.default,e.updated=!0,e}return a(i,t),h(i,[{key:"update",value:function(t,i){this.data.perspective(this.fovy*Math.PI/180,t/i,.1,100),this.data.multiply(this._matrix),this.updated=!1}},{key:"matrix",get:function(){return this.updated=!0,this._matrix}}]),i}(f.default);i.default=c},function(t,i,e){"use strict";function r(t){if(Array.isArray(t)){for(var i=0,e=Array(t.length);i<t.length;i++)e[i]=t[i];return e}return Array.from(t)}function n(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(i,"__esModule",{value:!0});var s=function(){function t(t,i){for(var e=0;e<i.length;e++){var r=i[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(i,e,r){return e&&t(i.prototype,e),r&&t(i,r),i}}(),a=function(){function t(i,e){n(this,t),this.geom=i,this.program=e,this.uniforms=[],this.textures=[]}return s(t,[{key:"addUniform",value:function(t){this.uniforms.push(t)}},{key:"addTexture",value:function(t){this.textures.push(t)}},{key:"isInitialized",value:function(){var t=!0;this.program.isInitialized()||(t=!1),this.geom.isInitialized()||(t=!1);var i=!0,e=!1,r=void 0;try{for(var n,s=this.textures[Symbol.iterator]();!(i=(n=s.next()).done);i=!0){n.value.isInitialized()||(t=!1)}}catch(t){e=!0,r=t}finally{try{!i&&s.return&&s.return()}finally{if(e)throw r}}return t}},{key:"init",value:function(t,i){var e=this.program,n=[].concat(r(this.uniforms),r(i)),s=!0;this.program.isInitialized()||this.program.init(t,this.geom.attributes,n,this.textures)&&(s=!1),this.geom.isInitialized()||this.geom.init(t,e)&&(s=!1);var a=!0,h=!1,o=void 0;try{for(var u,l=this.textures[Symbol.iterator]();!(a=(u=l.next()).done);a=!0){var f=u.value;f.isInitialized()||f.init(t,e)||(s=!1)}}catch(t){h=!0,o=t}finally{try{!a&&l.return&&l.return()}finally{if(h)throw o}}return s}},{key:"draw",value:function(t,i){var e=this.program;this.program.draw(t),this.geom.draw(t,e);var r=!0,n=!1,s=void 0;try{for(var a,h=this.uniforms[Symbol.iterator]();!(r=(a=h.next()).done);r=!0){a.value.draw(t,e)}}catch(t){n=!0,s=t}finally{try{!r&&h.return&&h.return()}finally{if(n)throw s}}var o=!0,u=!1,l=void 0;try{for(var f,c=i[Symbol.iterator]();!(o=(f=c.next()).done);o=!0){f.value.draw(t,e)}}catch(t){u=!0,l=t}finally{try{!o&&c.return&&c.return()}finally{if(u)throw l}}var v=!0,d=!1,y=void 0;try{for(var p,b=this.textures[Symbol.iterator]();!(v=(p=b.next()).done);v=!0){p.value.draw(t,e)}}catch(t){d=!0,y=t}finally{try{!v&&b.return&&b.return()}finally{if(d)throw y}}this.geom.display(t,e)}}]),t}();i.default=a},function(t,i,e){"use strict";function r(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(i,"__esModule",{value:!0});var n=function(){function t(t,i){var e=[],r=!0,n=!1,s=void 0;try{for(var a,h=t[Symbol.iterator]();!(r=(a=h.next()).done)&&(e.push(a.value),!i||e.length!==i);r=!0);}catch(t){n=!0,s=t}finally{try{!r&&h.return&&h.return()}finally{if(n)throw s}}return e}return function(i,e){if(Array.isArray(i))return i;if(Symbol.iterator in Object(i))return t(i,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=function(){function t(t,i){for(var e=0;e<i.length;e++){var r=i[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(i,e,r){return e&&t(i.prototype,e),r&&t(i,r),i}}(),a=function(){function t(i,e){r(this,t),this.canvas=i,this.init(i),this.meshs=[],this.cam=e,this.uniforms=[e],this.depthTest=!0}return s(t,[{key:"_addCamToMeshs",value:function(){var t=this.cam;this.uniforms.push(t)}},{key:"addMesh",value:function(t){this.meshs.push(t),t.isInitialized()||t.init(this.gl,this.uniforms)}},{key:"rmMesh",value:function(t){var i=this.meshs.indexOf(t);i>-1&&this.meshs.splice(i,1)}},{key:"resize",value:function(t,i){var e=this.gl;e.viewportWidth=t,e.viewportHeight=i}},{key:"init",value:function(t){var i=void 0;try{i=t.getContext("webgl")||t.getContext("experimental-webgl"),i.viewportWidth=t.width,i.viewportHeight=t.height}catch(t){console.error("Could not initialise WebGL:",t.message)}i||console.error("Could not initialise WebGL"),this.gl=i}},{key:"draw",value:function(){var t=this.gl;t.viewport(0,0,t.viewportWidth,t.viewportHeight),t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT),this.cam.updated&&this.cam.update(t.viewportWidth,t.viewportHeight);var i=!0,e=!1,r=void 0;try{for(var n,s=this.meshs[Symbol.iterator]();!(i=(n=s.next()).done);i=!0){var a=n.value;a.isInitialized()?a.draw(t,this.uniforms):a.init(t,this.uniforms)}}catch(t){e=!0,r=t}finally{try{!i&&s.return&&s.return()}finally{if(e)throw r}}}},{key:"depthTest",set:function(t){var i=this.gl;t?i.enable(i.DEPTH_TEST):i.disable(i.DEPTH_TEST),this._depthTest=!!t},get:function(){return this._depthTest}},{key:"bgColor",set:function(t){var i=n(t,4),e=i[0],r=i[1],s=i[2],a=i[3],h=void 0===a?1:a;this.gl.clearColor(e,r,s,h),this._bgColor=[e,r,s,h]},get:function(){return this._bgColor}}]),t}();i.default=a},function(t,i,e){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function n(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}function s(t,i){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!i||"object"!=typeof i&&"function"!=typeof i?t:i}function a(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Super expression must either be null or a function, not "+typeof i);t.prototype=Object.create(i&&i.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),i&&(Object.setPrototypeOf?Object.setPrototypeOf(t,i):t.__proto__=i)}Object.defineProperty(i,"__esModule",{value:!0});var h=e(3),o=r(h),u=e(0),l=r(u),f=function(t){function i(t){return n(this,i),s(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,t,35676,(new o.default).identity()))}return a(i,t),i}(l.default);i.default=f},function(t,i,e){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function n(){I.matrix.rotate(.005,[0,1,0]),z.matrix.rotate(.01,[0,1,0]),B.matrix.rotate(-.01,[0,1,0]),_.draw(),requestAnimationFrame(n)}var s=e(0),a=(r(s),e(10)),h=r(a),o=e(1),u=(r(o),e(5)),l=r(u),f=e(4),c=r(f),v=e(6),d=r(v),y=e(8),p=r(y),b=e(7),m=r(b),M=e(9),g=r(M),w=document.body.querySelector("canvas"),x=new m.default("uPMatrix"),_=new g.default(w,x);_.bgColor=[0,0,.1,1],_.depthTest=!0;var T=new l.default,k=new l.default("\n    attribute vec3 aVertexPosition;\n    attribute vec4 aVertexColor;\n\n    uniform mat4 uMVMatrix;\n    uniform mat4 uPMatrix;\n\n    varying vec4 vColor;\n\n    void main(void) {\n        gl_Position = uPMatrix * uMVMatrix * vec4(aVertexPosition, 1.0);\n        float zDepth = 0.2 * (8.0 - gl_Position.z);\n        vec4 modifyColor = vec4(aVertexColor.rgb * zDepth, aVertexColor.a);\n        vColor = modifyColor;\n    }\n"),P=[0,1,0,-1,-1,1,1,-1,1,0,1,0,1,-1,1,1,-1,-1,0,1,0,1,-1,-1,-1,-1,-1,0,1,0,-1,-1,-1,-1,-1,1],E=[1,0,0,1,0,1,0,1,0,0,1,1,1,0,0,1,0,0,1,1,0,1,0,1,1,0,0,1,0,1,0,1,0,0,1,1,1,0,0,1,0,0,1,1,0,1,0,1],O=new c.default;O.addVertices("aVertexPosition",P,3),O.addVertices("aVertexColor",E,4);var I=new p.default(O,T),S=new h.default("uMVMatrix");I.addUniform(S),I.matrix=S.data,I.matrix.translate([-1.5,-1.5,-8]),_.addMesh(I);var A=[-1,-1,1,1,-1,1,1,1,1,-1,1,1,-1,-1,-1,-1,1,-1,1,1,-1,1,-1,-1,-1,1,-1,-1,1,1,1,1,1,1,1,-1,-1,-1,-1,1,-1,-1,1,-1,1,-1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,-1,1,-1,-1,-1,-1,-1,1,-1,1,1,-1,1,-1],R=[0,1,2,0,2,3,4,5,6,4,6,7,8,9,10,8,10,11,12,13,14,12,14,15,16,17,18,16,18,19,20,21,22,20,22,23],C=[[1,0,0,1],[1,1,0,1],[0,1,0,1],[1,.5,.5,1],[1,0,1,1],[0,0,1,1]],j=[];for(var L in C)for(var U=C[L],D=0;D<4;D++)j=j.concat(U);var V=new c.default;V.addVertices("aVertexPosition",A,3),V.addVertices("aVertexColor",j,4),V.addIndices(R);var z=new p.default(V,k),F=new h.default("uMVMatrix");z.addUniform(F),z.matrix=F.data,z.matrix.translate([1.5,-1.5,-8]),_.addMesh(z);var X=new l.default("   \n    attribute vec3 aVertexPosition;\n    attribute vec2 aTextureCoord;\n\n    uniform mat4 uMVMatrix;\n    uniform mat4 uPMatrix;\n\n    varying vec2 vTextureCoord;\n\n    void main(void) {\n        gl_Position = uPMatrix * uMVMatrix * vec4(aVertexPosition, 1.0);\n        vTextureCoord = aTextureCoord;\n    }","\n    precision mediump float;\n\n    varying vec2 vTextureCoord;\n\n    uniform sampler2D uSampler;\n\n    void main(void) {\n        gl_FragColor = texture2D(uSampler, vec2(vTextureCoord.s, vTextureCoord.t));\n    }"),N=[0,0,1,0,1,1,0,1,1,0,1,1,0,1,0,0,0,1,0,0,1,0,1,1,1,1,0,1,0,0,1,0,1,0,1,1,0,1,0,0,0,0,1,0,1,1,0,1],q=new d.default("uSampler");q.addURL("cube-diffuse.jpg");var G=new c.default;G.addVertices("aVertexPosition",A,3),G.addVertices("aTextureCoord",N,2),G.addIndices(R);var B=new p.default(G,X),W=new h.default("uMVMatrix");B.addUniform(W),B.matrix=W.data,B.addTexture(q),B.matrix.translate([1.5,1.5,-8]),_.addMesh(B),n()}]);