!function(t){function i(r){if(e[r])return e[r].exports;var n=e[r]={i:r,l:!1,exports:{}};return t[r].call(n.exports,n,n.exports,i),n.l=!0,n.exports}var e={};i.m=t,i.c=e,i.i=function(t){return t},i.d=function(t,e,r){i.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:r})},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,i){return Object.prototype.hasOwnProperty.call(t,i)},i.p="",i(i.s=11)}([function(t,i,e){"use strict";function r(t){if(Array.isArray(t)){for(var i=0,e=Array(t.length);i<t.length;i++)e[i]=t[i];return e}return Array.from(t)}function n(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function t(t,i){for(var e=0;e<i.length;e++){var r=i[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(i,e,r){return e&&t(i.prototype,e),r&&t(i,r),i}}(),s=function(){function t(i,e,r){n(this,t),this.label=i,this.type=e,this.data=r}return a(t,[{key:"draw",value:function(t,i){switch(this.type){case 35676:t.uniformMatrix4fv(i,!1,this.data);break;case 35665:t.uniform3f.apply(t,[i].concat(r(this.data)));break;default:console.error("Uniform type unknow: {label:",this.label,", type:",this.type,"}")}}}]),t}();i.default=s},function(t,i,e){"use strict";function r(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}function n(t,i){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!i||"object"!=typeof i&&"function"!=typeof i?t:i}function a(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Super expression must either be null or a function, not "+typeof i);t.prototype=Object.create(i&&i.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),i&&(Object.setPrototypeOf?Object.setPrototypeOf(t,i):t.__proto__=i)}Object.defineProperty(i,"__esModule",{value:!0});var s=function(){function t(t,i){for(var e=0;e<i.length;e++){var r=i[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(i,e,r){return e&&t(i.prototype,e),r&&t(i,r),i}}(),h=function t(i,e,r){null===i&&(i=Function.prototype);var n=Object.getOwnPropertyDescriptor(i,e);if(void 0===n){var a=Object.getPrototypeOf(i);return null===a?void 0:t(a,e,r)}if("value"in n)return n.value;var s=n.get;if(void 0!==s)return s.call(r)},o=e(2),u=function(t){return t&&t.__esModule?t:{default:t}}(o),l=function(t){function i(t){r(this,i);var e=n(this,(i.__proto__||Object.getPrototypeOf(i)).call(this));return e.label=t,e}return a(i,t),s(i,[{key:"draw",value:function(t,e){h(i.prototype.__proto__||Object.getPrototypeOf(i.prototype),"draw",this).call(this,t),t.vertexAttribPointer(e,this.itemSize,this.itemType,!1,0,0)}}]),i}(u.default);i.default=l},function(t,i,e){"use strict";function r(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(i,"__esModule",{value:!0});var n=function(){function t(t,i){for(var e=0;e<i.length;e++){var r=i[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(i,e,r){return e&&t(i.prototype,e),r&&t(i,r),i}}(),a=function(){function t(){r(this,t),this.buffer=null}return n(t,[{key:"isInitialized",value:function(){return!!this.buffer}},{key:"setArray",value:function(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:34962,e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:35044;this.arrayType=i,this.data=t,this.arrayUsage=e}},{key:"setItems",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5126,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.itemType=t,this.itemSize=i}},{key:"init",value:function(t){var i=t.createBuffer();return t.bindBuffer(this.arrayType,i),t.bufferData(this.arrayType,this.data,this.arrayUsage),this.buffer=i,!0}},{key:"draw",value:function(t){t.bindBuffer(this.arrayType,this.buffer)}}]),t}();i.default=a},function(t,i,e){"use strict";function r(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}function n(t,i){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!i||"object"!=typeof i&&"function"!=typeof i?t:i}function s(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Super expression must either be null or a function, not "+typeof i);t.prototype=Object.create(i&&i.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),i&&(Object.setPrototypeOf?Object.setPrototypeOf(t,i):t.__proto__=i)}Object.defineProperty(i,"__esModule",{value:!0});var h=function(){function t(t,i){var e=[],r=!0,n=!1,a=void 0;try{for(var s,h=t[Symbol.iterator]();!(r=(s=h.next()).done)&&(e.push(s.value),!i||e.length!==i);r=!0);}catch(t){n=!0,a=t}finally{try{!r&&h.return&&h.return()}finally{if(n)throw a}}return e}return function(i,e){if(Array.isArray(i))return i;if(Symbol.iterator in Object(i))return t(i,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function(){function t(t,i){for(var e=0;e<i.length;e++){var r=i[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(i,e,r){return e&&t(i.prototype,e),r&&t(i,r),i}}(),u=function(t){function i(){r(this,i);var t=n(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,16));return t[0]=1,t[5]=1,t[10]=1,t[15]=1,t}return s(i,t),o(i,[{key:"clone",value:function(){var t=new i;return t.set(this),t}},{key:"copy",value:function(t){return t.set(this),this}},{key:"identity",value:function(){return this[0]=1,this[1]=0,this[2]=0,this[3]=0,this[4]=0,this[5]=1,this[6]=0,this[7]=0,this[8]=0,this[9]=0,this[10]=1,this[11]=0,this[12]=0,this[13]=0,this[14]=0,this[15]=1,this}},{key:"add",value:function(t){return this[0]+=t[0],this[1]+=t[1],this[2]+=t[2],this[3]+=t[3],this[4]+=t[4],this[5]+=t[5],this[6]+=t[6],this[7]+=t[7],this[8]+=t[8],this[9]+=t[9],this[10]+=t[10],this[11]+=t[11],this[12]+=t[12],this[13]+=t[13],this[14]+=t[14],this[15]+=t[15],this}},{key:"subtract",value:function(t){return this[0]-=t[0],this[1]-=t[1],this[2]-=t[2],this[3]-=t[3],this[4]-=t[4],this[5]-=t[5],this[6]-=t[6],this[7]-=t[7],this[8]-=t[8],this[9]-=t[9],this[10]-=t[10],this[11]-=t[11],this[12]-=t[12],this[13]-=t[13],this[14]-=t[14],this[15]-=t[15],this}},{key:"multiplyScalar",value:function(t){return this[0]*=t,this[1]*=t,this[2]*=t,this[3]*=t,this[4]*=t,this[5]*=t,this[6]*=t,this[7]*=t,this[8]*=t,this[9]*=t,this[10]*=t,this[11]*=t,this[12]*=t,this[13]*=t,this[14]*=t,this[15]*=t,this}},{key:"multiplyScalarAndAdd",value:function(t,i){return this[0]+=t[0]*i,this[1]+=t[1]*i,this[2]+=t[2]*i,this[3]+=t[3]*i,this[4]+=t[4]*i,this[5]+=t[5]*i,this[6]+=t[6]*i,this[7]+=t[7]*i,this[8]+=t[8]*i,this[9]+=t[9]*i,this[10]+=t[10]*i,this[11]+=t[11]*i,this[12]+=t[12]*i,this[13]+=t[13]*i,this[14]+=t[14]*i,this[15]+=t[15]*i,this}},{key:"exactEquals",value:function(t){return this[0]===t[0]&&this[1]===t[1]&&this[2]===t[2]&&this[3]===t[3]&&this[4]===t[4]&&this[5]===t[5]&&this[6]===t[6]&&this[7]===t[7]&&this[8]===t[8]&&this[9]===t[9]&&this[10]===t[10]&&this[11]===t[11]&&this[12]===t[12]&&this[13]===t[13]&&this[14]===t[14]&&this[15]===t[15]}},{key:"equals",value:function(t){var i=h(this,16),e=i[0],r=i[1],n=i[2],a=i[3],s=i[4],o=i[5],u=i[6],l=i[7],f=i[8],c=i[9],v=i[10],d=i[11],y=i[12],p=i[13],b=i[14],m=i[15],M=h(t,16),g=M[0],w=M[1],_=M[2],x=M[3],T=M[4],P=M[5],O=M[6],k=M[7],E=M[8],S=M[9],I=M[10],A=M[11],C=M[12],j=M[13],R=M[14],L=M[15];return Math.abs(e-g)<=1e-6*Math.max(1,Math.abs(e),Math.abs(g))&&Math.abs(r-w)<=1e-6*Math.max(1,Math.abs(r),Math.abs(w))&&Math.abs(n-_)<=1e-6*Math.max(1,Math.abs(n),Math.abs(_))&&Math.abs(a-x)<=1e-6*Math.max(1,Math.abs(a),Math.abs(x))&&Math.abs(s-T)<=1e-6*Math.max(1,Math.abs(s),Math.abs(T))&&Math.abs(o-P)<=1e-6*Math.max(1,Math.abs(o),Math.abs(P))&&Math.abs(u-O)<=1e-6*Math.max(1,Math.abs(u),Math.abs(O))&&Math.abs(l-k)<=1e-6*Math.max(1,Math.abs(l),Math.abs(k))&&Math.abs(f-E)<=1e-6*Math.max(1,Math.abs(f),Math.abs(E))&&Math.abs(c-S)<=1e-6*Math.max(1,Math.abs(c),Math.abs(S))&&Math.abs(v-I)<=1e-6*Math.max(1,Math.abs(v),Math.abs(I))&&Math.abs(d-A)<=1e-6*Math.max(1,Math.abs(d),Math.abs(A))&&Math.abs(y-C)<=1e-6*Math.max(1,Math.abs(y),Math.abs(C))&&Math.abs(p-j)<=1e-6*Math.max(1,Math.abs(p),Math.abs(j))&&Math.abs(b-R)<=1e-6*Math.max(1,Math.abs(b),Math.abs(R))&&Math.abs(m-L)<=1e-6*Math.max(1,Math.abs(m),Math.abs(L))}},{key:"transpose",value:function(t){if(t===this){var i=t[1],e=t[2],r=t[3],n=t[6],a=t[7],s=t[11];this[1]=t[4],this[2]=t[8],this[3]=t[12],this[4]=i,this[6]=t[9],this[7]=t[13],this[8]=e,this[9]=n,this[11]=t[14],this[12]=r,this[13]=a,this[14]=s}else this[0]=t[0],this[1]=t[4],this[2]=t[8],this[3]=t[12],this[4]=t[1],this[5]=t[5],this[6]=t[9],this[7]=t[13],this[8]=t[2],this[9]=t[6],this[10]=t[10],this[11]=t[14],this[12]=t[3],this[13]=t[7],this[14]=t[11],this[15]=t[15];return this}},{key:"invert",value:function(t){var i=h(this,16),e=i[0],r=i[1],n=i[2],a=i[3],s=i[4],o=i[5],u=i[6],l=i[7],f=i[8],c=i[9],v=i[10],d=i[11],y=i[12],p=i[13],b=i[14],m=i[15],M=e*o-r*s,g=e*u-n*s,w=e*l-a*s,_=r*u-n*o,x=r*l-a*o,T=n*l-a*u,P=f*p-c*y,O=f*b-v*y,k=f*m-d*y,E=c*b-v*p,S=c*m-d*p,I=v*m-d*b,A=M*I-g*S+w*E+_*k-x*O+T*P;return A?(A=1/A,this[0]=(o*I-u*S+l*E)*A,this[1]=(n*S-r*I-a*E)*A,this[2]=(p*T-b*x+m*_)*A,this[3]=(v*x-c*T-d*_)*A,this[4]=(u*k-s*I-l*O)*A,this[5]=(e*I-n*k+a*O)*A,this[6]=(b*w-y*T-m*g)*A,this[7]=(f*T-v*w+d*g)*A,this[8]=(s*S-o*k+l*P)*A,this[9]=(r*k-e*S-a*P)*A,this[10]=(y*x-p*w+m*M)*A,this[11]=(c*w-f*x-d*M)*A,this[12]=(o*O-s*E-u*P)*A,this[13]=(e*E-r*O+n*P)*A,this[14]=(p*g-y*_-b*M)*A,this[15]=(f*_-c*g+v*M)*A,this):this}},{key:"adjoint",value:function(t){var i=h(this,16),e=i[0],r=i[1],n=i[2],a=i[3],s=i[4],o=i[5],u=i[6],l=i[7],f=i[8],c=i[9],v=i[10],d=i[11],y=i[12],p=i[13],b=i[14],m=i[15];return this[0]=o*(v*m-d*b)-c*(u*m-l*b)+p*(u*d-l*v),this[1]=-(r*(v*m-d*b)-c*(n*m-a*b)+p*(n*d-a*v)),this[2]=r*(u*m-l*b)-o*(n*m-a*b)+p*(n*l-a*u),this[3]=-(r*(u*d-l*v)-o*(n*d-a*v)+c*(n*l-a*u)),this[4]=-(s*(v*m-d*b)-f*(u*m-l*b)+y*(u*d-l*v)),this[5]=e*(v*m-d*b)-f*(n*m-a*b)+y*(n*d-a*v),this[6]=-(e*(u*m-l*b)-s*(n*m-a*b)+y*(n*l-a*u)),this[7]=e*(u*d-l*v)-s*(n*d-a*v)+f*(n*l-a*u),this[8]=s*(c*m-d*p)-f*(o*m-l*p)+y*(o*d-l*c),this[9]=-(e*(c*m-d*p)-f*(r*m-a*p)+y*(r*d-a*c)),this[10]=e*(o*m-l*p)-s*(r*m-a*p)+y*(r*l-a*o),this[11]=-(e*(o*d-l*c)-s*(r*d-a*c)+f*(r*l-a*o)),this[12]=-(s*(c*b-v*p)-f*(o*b-u*p)+y*(o*v-u*c)),this[13]=e*(c*b-v*p)-f*(r*b-n*p)+y*(r*v-n*c),this[14]=-(e*(o*b-u*p)-s*(r*b-n*p)+y*(r*u-n*o)),this[15]=e*(o*v-u*c)-s*(r*v-n*c)+f*(r*u-n*o),this}},{key:"determinant",value:function(){var t=h(this,16),i=t[0],e=t[1],r=t[2],n=t[3],a=t[4],s=t[5],o=t[6],u=t[7],l=t[8],f=t[9],c=t[10],v=t[11],d=t[12],y=t[13],p=t[14],b=t[15];return(i*s-e*a)*(c*b-v*p)-(i*o-r*a)*(f*b-v*y)+(i*u-n*a)*(f*p-c*y)+(e*o-r*s)*(l*b-v*d)-(e*u-n*s)*(l*p-c*d)+(r*u-n*o)*(l*y-f*d)}},{key:"multiply",value:function(t){var i=h(this,16),e=i[0],r=i[1],n=i[2],a=i[3],s=i[4],o=i[5],u=i[6],l=i[7],f=i[8],c=i[9],v=i[10],d=i[11],y=i[12],p=i[13],b=i[14],m=i[15],M=h(t,4),g=M[0],w=M[1],_=M[2],x=M[3];return this[0]=g*e+w*s+_*f+x*y,this[1]=g*r+w*o+_*c+x*p,this[2]=g*n+w*u+_*v+x*b,this[3]=g*a+w*l+_*d+x*m,g=t[4],w=t[5],_=t[6],x=t[7],this[4]=g*e+w*s+_*f+x*y,this[5]=g*r+w*o+_*c+x*p,this[6]=g*n+w*u+_*v+x*b,this[7]=g*a+w*l+_*d+x*m,g=t[8],w=t[9],_=t[10],x=t[11],this[8]=g*e+w*s+_*f+x*y,this[9]=g*r+w*o+_*c+x*p,this[10]=g*n+w*u+_*v+x*b,this[11]=g*a+w*l+_*d+x*m,g=t[12],w=t[13],_=t[14],x=t[15],this[12]=g*e+w*s+_*f+x*y,this[13]=g*r+w*o+_*c+x*p,this[14]=g*n+w*u+_*v+x*b,this[15]=g*a+w*l+_*d+x*m,this}},{key:"translate",value:function(t){var i=h(t,3),e=i[0],r=i[1],n=i[2];return this[12]=this[0]*e+this[4]*r+this[8]*n+this[12],this[13]=this[1]*e+this[5]*r+this[9]*n+this[13],this[14]=this[2]*e+this[6]*r+this[10]*n+this[14],this[15]=this[3]*e+this[7]*r+this[11]*n+this[15],this}},{key:"scale",value:function(t){var i=h(t,3),e=i[0],r=i[1],n=i[2];return this[0]*=e,this[1]*=e,this[2]*=e,this[3]*=e,this[4]*=r,this[5]*=r,this[6]*=r,this[7]*=r,this[8]*=n,this[9]*=n,this[10]*=n,this[11]*=n,this}},{key:"rotate",value:function(t,i){var e=h(i,3),r=e[0],n=e[1],a=e[2],s=Math.sqrt(r*r+n*n+a*a);if(Math.abs(s)>1e-6){s=1/s,r*=s,n*=s,a*=s;var o=Math.sin(t),u=Math.cos(t),l=1-u,f=h(this,12),c=f[0],v=f[1],d=f[2],y=f[3],p=f[4],b=f[5],m=f[6],M=f[7],g=f[8],w=f[9],_=f[10],x=f[11],T=r*r*l+u,P=n*r*l+a*o,O=a*r*l-n*o,k=r*n*l-a*o,E=n*n*l+u,S=a*n*l+r*o,I=r*a*l+n*o,A=n*a*l-r*o,C=a*a*l+u;this[0]=c*T+p*P+g*O,this[1]=v*T+b*P+w*O,this[2]=d*T+m*P+_*O,this[3]=y*T+M*P+x*O,this[4]=c*k+p*E+g*S,this[5]=v*k+b*E+w*S,this[6]=d*k+m*E+_*S,this[7]=y*k+M*E+x*S,this[8]=c*I+p*A+g*C,this[9]=v*I+b*A+w*C,this[10]=d*I+m*A+_*C,this[11]=y*I+M*A+x*C}return this}},{key:"rotateX",value:function(t){var i=Math.sin(t),e=Math.cos(t),r=this[4],n=this[5],a=this[6],s=this[7],h=this[8],o=this[9],u=this[10],l=this[11];return this[4]=r*e+h*i,this[5]=n*e+o*i,this[6]=a*e+u*i,this[7]=s*e+l*i,this[8]=h*e-r*i,this[9]=o*e-n*i,this[10]=u*e-a*i,this[11]=l*e-s*i,this}},{key:"rotateY",value:function(t){var i=Math.sin(t),e=Math.cos(t),r=a[0],n=a[1],s=a[2],h=a[3],o=a[8],u=a[9],l=a[10],f=a[11];return this[0]=r*e-o*i,this[1]=n*e-u*i,this[2]=s*e-l*i,this[3]=h*e-f*i,this[8]=r*i+o*e,this[9]=n*i+u*e,this[10]=s*i+l*e,this[11]=h*i+f*e,this}},{key:"rotateZ",value:function(t){var i=Math.sin(t),e=Math.cos(t),r=h(this,8),n=r[0],a=r[1],s=(r[2],r[3]),o=r[4],u=r[5],l=r[6],f=r[7];return this[0]=n*e+o*i,this[1]=a*e+u*i,this[2]=a02*e+l*i,this[3]=s*e+f*i,this[4]=o*e-n*i,this[5]=u*e-a*i,this[6]=l*e-a02*i,this[7]=f*e-s*i,this}},{key:"fromTranslation",value:function(t){return this[0]=1,this[1]=0,this[2]=0,this[3]=0,this[4]=0,this[5]=1,this[6]=0,this[7]=0,this[8]=0,this[9]=0,this[10]=1,this[11]=0,this[12]=t[0],this[13]=t[1],this[14]=t[2],this[15]=1,this}},{key:"fromScaling",value:function(t){return this[0]=t[0],this[1]=0,this[2]=0,this[3]=0,this[4]=0,this[5]=t[1],this[6]=0,this[7]=0,this[8]=0,this[9]=0,this[10]=t[2],this[11]=0,this[12]=0,this[13]=0,this[14]=0,this[15]=1,this}},{key:"fromRotation",value:function(t,i){var e=h(i,3),r=e[0],n=e[1],a=e[2],s=Math.sqrt(r*r+n*n+a*a);if(Math.abs(s)>1e-6){s=1/s,r*=s,n*=s,a*=s;var o=Math.sin(t),u=Math.cos(t),l=1-u;this[0]=r*r*l+u,this[1]=n*r*l+a*o,this[2]=a*r*l-n*o,this[3]=0,this[4]=r*n*l-a*o,this[5]=n*n*l+u,this[6]=a*n*l+r*o,this[7]=0,this[8]=r*a*l+n*o,this[9]=n*a*l-r*o,this[10]=a*a*l+u,this[11]=0,this[12]=0,this[13]=0,this[14]=0,this[15]=1}return this}},{key:"fromXRotation",value:function(t){var i=Math.sin(t),e=Math.cos(t);return this[0]=1,this[1]=0,this[2]=0,this[3]=0,this[4]=0,this[5]=e,this[6]=i,this[7]=0,this[8]=0,this[9]=-i,this[10]=e,this[11]=0,this[12]=0,this[13]=0,this[14]=0,this[15]=1,this}},{key:"fromYRotation",value:function(t){var i=Math.sin(t),e=Math.cos(t);return this[0]=e,this[1]=0,this[2]=-i,this[3]=0,this[4]=0,this[5]=1,this[6]=0,this[7]=0,this[8]=i,this[9]=0,this[10]=e,this[11]=0,this[12]=0,this[13]=0,this[14]=0,this[15]=1,this}},{key:"fromZRotation",value:function(t){var i=Math.sin(t),e=Math.cos(t);return this[0]=e,this[1]=i,this[2]=0,this[3]=0,this[4]=-i,this[5]=e,this[6]=0,this[7]=0,this[8]=0,this[9]=0,this[10]=1,this[11]=0,this[12]=0,this[13]=0,this[14]=0,this[15]=1,this}},{key:"fromQuat",value:function(t){var i=h(t,4),e=i[0],r=i[1],n=i[2],a=i[3],s=e+e,o=r+r,u=n+n,l=e*s,f=r*s,c=r*o,v=n*s,d=n*o,y=n*u,p=a*s,b=a*o,m=a*u;return this[0]=1-c-y,this[1]=f+m,this[2]=v-b,this[3]=0,this[4]=f-m,this[5]=1-l-y,this[6]=d+p,this[7]=0,this[8]=v+b,this[9]=d-p,this[10]=1-l-c,this[11]=0,this[12]=0,this[13]=0,this[14]=0,this[15]=1,this}},{key:"fromRotationTranslation",value:function(t,i){var e=h(t,4),r=e[0],n=e[1],a=e[2],s=e[3],o=r+r,u=n+n,l=a+a,f=r*o,c=r*u,v=r*l,d=n*u,y=n*l,p=a*l,b=s*o,m=s*u,M=s*l;return this[0]=1-(d+p),this[1]=c+M,this[2]=v-m,this[3]=0,this[4]=c-M,this[5]=1-(f+p),this[6]=y+b,this[7]=0,this[8]=v+m,this[9]=y-b,this[10]=1-(f+d),this[11]=0,this[12]=i[0],this[13]=i[1],this[14]=i[2],this[15]=1,this}},{key:"fromRotationTranslationScale",value:function(t,i,e){var r=h(t,4),n=r[0],a=r[1],s=r[2],o=r[3],u=n+n,l=a+a,f=s+s,c=n*u,v=n*l,d=n*f,y=a*l,p=a*f,b=s*f,m=o*u,M=o*l,g=o*f,w=h(e,3),_=w[0],x=w[1],T=w[2];return this[0]=(1-(y+b))*_,this[1]=(v+g)*_,this[2]=(d-M)*_,this[3]=0,this[4]=(v-g)*x,this[5]=(1-(c+b))*x,this[6]=(p+m)*x,this[7]=0,this[8]=(d+M)*T,this[9]=(p-m)*T,this[10]=(1-(c+y))*T,this[11]=0,this[12]=i[0],this[13]=i[1],this[14]=i[2],this[15]=1,this}},{key:"fromRotationTranslationScaleOrigin",value:function(t,i,e,r){var n=h(t,4),a=n[0],s=n[1],o=n[2],u=n[3],l=a+a,f=s+s,c=o+o,v=a*l,d=a*f,y=a*c,p=s*f,b=s*c,m=o*c,M=u*l,g=u*f,w=u*c,_=h(e,3),x=_[0],T=_[1],P=_[2],O=h(r,3),k=O[0],E=O[1],S=O[2];return this[0]=(1-(p+m))*x,this[1]=(d+w)*x,this[2]=(y-g)*x,this[3]=0,this[4]=(d-w)*T,this[5]=(1-(v+m))*T,this[6]=(b+M)*T,this[7]=0,this[8]=(y+g)*P,this[9]=(b-M)*P,this[10]=(1-(v+p))*P,this[11]=0,this[12]=i[0]+k-(this[0]*k+this[4]*E+this[8]*S),this[13]=i[1]+E-(this[1]*k+this[5]*E+this[9]*S),this[14]=i[2]+S-(this[2]*k+this[6]*E+this[10]*S),this[15]=1,this}},{key:"getTranslation",value:function(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Float32Array(3);return i[0]=this[12],i[1]=this[13],i[2]=this[14],i}},{key:"getRotation",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Float32Array(4),i=this[0]+this[5]+this[10];if(i>0){var e=2*Math.sqrt(i+1);t[0]=(this[6]-this[9])/e,t[1]=(this[8]-this[2])/e,t[2]=(this[1]-this[4])/e,t[3]=.25*e}else if(this[0]>this[5]&this[0]>this[10]){var r=2*Math.sqrt(1+this[0]-this[5]-this[10]);t[0]=.25*r,t[1]=(this[1]+this[4])/r,t[2]=(this[8]+this[2])/r,t[3]=(this[6]-this[9])/r}else if(this[5]>this[10]){var n=Math.sqrt(1+this[5]-this[0]-this[10]);t[0]=(this[1]+this[4])/n*2,t[1]=.25*n,t[2]=(this[6]+this[9])/n,t[3]=(this[8]-this[2])/n}else{var a=2*Math.sqrt(1+this[10]-this[0]-this[5]);t[0]=(this[8]+this[2])/a,t[1]=(this[6]+this[9])/a,t[2]=.25*a,t[3]=(this[1]-this[4])/a}return t}},{key:"frustrum",value:function(t,i,e,r,n,a){var s=1/(i-t),h=1/(r-e),o=1/(n-a);return this[0]=2*n*s,this[1]=0,this[2]=0,this[3]=0,this[4]=0,this[5]=2*n*h,this[6]=0,this[7]=0,this[8]=(i+t)*s,this[9]=(r+e)*h,this[10]=(a+n)*o,this[11]=-1,this[12]=0,this[13]=0,this[14]=a*n*2*o,this[15]=0,this}},{key:"perspective",value:function(t,i,e,r){var n=1/Math.tan(t/2),a=1/(e-r);return this[0]=n/i,this[1]=0,this[2]=0,this[3]=0,this[4]=0,this[5]=n,this[6]=0,this[7]=0,this[8]=0,this[9]=0,this[10]=(r+e)*a,this[11]=-1,this[12]=0,this[13]=0,this[14]=2*r*e*a,this[15]=0,this}},{key:"perspectiveFromFieldOfView",value:function(t,i,e){var r=Math.tan(t.upDegrees*Math.PI/180),n=Math.tan(t.downDegrees*Math.PI/180),a=Math.tan(t.leftDegrees*Math.PI/180),s=Math.tan(t.rightDegrees*Math.PI/180),h=2/(a+s),o=2/(r+n);return this[0]=h,this[1]=0,this[2]=0,this[3]=0,this[4]=0,this[5]=o,this[6]=0,this[7]=0,this[8]=-(a-s)*h*.5,this[9]=(r-n)*o*.5,this[10]=e/(i-e),this[11]=-1,this[12]=0,this[13]=0,this[14]=e*i/(i-e),this[15]=0,this}},{key:"ortho",value:function(t,i,e,r,n,a){var s=1/(t-i),h=1/(e-r),o=1/(n-a);return this[0]=-2*s,this[1]=0,this[2]=0,this[3]=0,this[4]=0,this[5]=-2*h,this[6]=0,this[7]=0,this[8]=0,this[9]=0,this[10]=2*o,this[11]=0,this[12]=(t+i)*s,this[13]=(r+e)*h,this[14]=(a+n)*o,this[15]=1,this}},{key:"lookAt",value:function(t,i,e){var r=h(t,3),n=r[0],a=r[1],s=r[2],o=h(e,3),u=o[0],l=o[1],f=o[2],c=h(i,3),v=c[0],d=c[1],y=c[2];if(Math.abs(n-v)<1e-6&&Math.abs(a-d)<1e-6&&Math.abs(s-y)<1e-6)return this.identity();var p=n-v,b=a-d,m=s-y,M=1/Math.sqrt(p*p+b*b+m*m);p*=M,b*=M,m*=M;var g=l*m-f*b,w=f*p-u*m,_=u*b-l*p;M=Math.sqrt(g*g+w*w+_*_),M?(M=1/M,g*=M,w*=M,_*=M):(g=0,w=0,_=0);var x=b*_-m*w,T=m*g-p*_,P=p*w-b*g;return M=Math.sqrt(x*x+T*T+P*P),M?(M=1/M,x*=M,T*=M,P*=M):(x=0,T=0,P=0),this[0]=g,this[1]=x,this[2]=p,this[3]=0,this[4]=w,this[5]=T,this[6]=b,this[7]=0,this[8]=_,this[9]=P,this[10]=m,this[11]=0,this[12]=-(g*n+w*a+_*s),this[13]=-(x*n+T*a+P*s),this[14]=-(p*n+b*a+m*s),this[15]=1,this}},{key:"frob",value:function(){return Math.sqrt(Math.pow(this[0],2)+Math.pow(this[1],2)+Math.pow(this[2],2)+Math.pow(this[3],2)+Math.pow(this[4],2)+Math.pow(this[5],2)+Math.pow(this[6],2)+Math.pow(this[7],2)+Math.pow(this[8],2)+Math.pow(this[9],2)+Math.pow(this[10],2)+Math.pow(this[11],2)+Math.pow(this[12],2)+Math.pow(this[13],2)+Math.pow(this[14],2)+Math.pow(this[15],2))}}]),i}(Float32Array);i.default=u},function(t,i,e){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function n(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function t(t,i){for(var e=0;e<i.length;e++){var r=i[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(i,e,r){return e&&t(i.prototype,e),r&&t(i,r),i}}(),s=e(2),h=r(s),o=e(1),u=r(o),l=function(){function t(){n(this,t),this.attributes=[],this.buffers=[],this.hasIndices=!1,this.numItems=0}return a(t,[{key:"addVertices",value:function(t,i,e){var r=new u.default(t);r.setArray(new Float32Array(i),34962),r.setItems(5126,e),this.attributes.push(r),this.numItems<1&&(this.numItems=i.length/e)}},{key:"addIndices",value:function(t){this.hasIndices=!0;var i=new h.default;i.setArray(new Uint16Array(t),34963),i.setItems(5125,1),this.buffers.push(i),this.numItems=t.length}},{key:"display",value:function(t){this.hasIndices?t.drawElements(t.TRIANGLES,this.numItems,t.UNSIGNED_SHORT,0):t.drawArrays(t.TRIANGLES,0,this.numItems)}}]),t}();i.default=l},function(t,i,e){"use strict";function r(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(i,"__esModule",{value:!0});var n=function(){function t(t,i){for(var e=0;e<i.length;e++){var r=i[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(i,e,r){return e&&t(i.prototype,e),r&&t(i,r),i}}(),a="      \n    attribute vec3 aVertexPosition;\n    attribute vec4 aVertexColor;\n\n    uniform mat4 uMVMatrix;\n    uniform mat4 uPMatrix;\n\n    varying vec4 vColor;\n\n    void main(void) {\n        gl_Position = uPMatrix * uMVMatrix * vec4(aVertexPosition, 1.0);\n        vColor = aVertexColor;\n    }\n",s="\n    precision mediump float;\n\n    varying vec4 vColor;\n\n    void main(void) {\n        gl_FragColor = vColor;\n    }\n",h=0,o=function(){function t(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s;r(this,t),this.vertexShaderSrc=i,this.fragmentShaderSrc=e,this.attribLocation={},this.uniformLocation={},this.textureLocation={},this.textureIndex={},this.textureNum=0,this.id=++h}return n(t,[{key:"isInitialized",value:function(){return!!this.pointer}},{key:"init",value:function(t){this.vertexShader=this._createShader(t,35633,this.vertexShaderSrc),this.fragmentShader=this._createShader(t,35632,this.fragmentShaderSrc);var i=t.createProgram();return t.attachShader(i,this.vertexShader),t.attachShader(i,this.fragmentShader),t.linkProgram(i),t.getProgramParameter(i,t.LINK_STATUS)?(t.useProgram(i),this.pointer=i,!0):(console.error("Shader initialization error"),!1)}},{key:"getAttribLocation",value:function(t,i){var e=i.label;if(!this.attribLocation.hasOwnProperty(e)){var r=t.getAttribLocation(this.pointer,e);return t.enableVertexAttribArray(r),this.attribLocation[e]=r,r}return this.attribLocation[e]}},{key:"getUniformLocation",value:function(t,i){var e=i.label;if(!this.uniformLocation.hasOwnProperty(e)){var r=t.getUniformLocation(this.pointer,e);return this.uniformLocation[e]=r,r}return this.uniformLocation[e]}},{key:"getTextureLocationIndex",value:function(t,i){var e=i.label;if(!this.textureLocation.hasOwnProperty(e)||!this.textureIndex.hasOwnProperty(e)){var r=t.getUniformLocation(this.pointer,i.label);return this.textureLocation[e]=r,this.textureIndex[e]=this.textureNum,[r,this.textureNum++]}return[this.textureLocation[e],this.textureIndex[e]]}},{key:"draw",value:function(t){t.useProgram(this.pointer)}},{key:"_createShader",value:function(t,i,e){var r=t.createShader(i);return t.shaderSource(r,e),t.compileShader(r),t.getShaderParameter(r,t.COMPILE_STATUS)?r:console.error("Une erreur est survenue au cours de la compilation du shader: "+t.getShaderInfoLog(r))}}]),t}();i.default=o},function(t,i,e){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function n(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}function a(t,i){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!i||"object"!=typeof i&&"function"!=typeof i?t:i}function s(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Super expression must either be null or a function, not "+typeof i);t.prototype=Object.create(i&&i.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),i&&(Object.setPrototypeOf?Object.setPrototypeOf(t,i):t.__proto__=i)}Object.defineProperty(i,"__esModule",{value:!0});var h=function(){function t(t,i){for(var e=0;e<i.length;e++){var r=i[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(i,e,r){return e&&t(i.prototype,e),r&&t(i,r),i}}(),o=e(3),u=r(o),l=e(0),f=r(l),c=function(t){function i(t){n(this,i);var e=a(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,t,35676,new u.default));return e.fovy=45,e.near=.1,e.far=1e3,e._matrix=new u.default,e.updated=!0,e}return s(i,t),h(i,[{key:"update",value:function(t,i){this.data.perspective(this.fovy*Math.PI/180,t/i,.1,100),this.data.multiply(this._matrix),this.updated=!1}},{key:"matrix",get:function(){return this.updated=!0,this._matrix}}]),i}(f.default);i.default=c},function(t,i,e){"use strict";function r(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(i,"__esModule",{value:!0});var n=function(){function t(t,i){var e=[],r=!0,n=!1,a=void 0;try{for(var s,h=t[Symbol.iterator]();!(r=(s=h.next()).done)&&(e.push(s.value),!i||e.length!==i);r=!0);}catch(t){n=!0,a=t}finally{try{!r&&h.return&&h.return()}finally{if(n)throw a}}return e}return function(i,e){if(Array.isArray(i))return i;if(Symbol.iterator in Object(i))return t(i,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=function(){function t(t,i){for(var e=0;e<i.length;e++){var r=i[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(i,e,r){return e&&t(i.prototype,e),r&&t(i,r),i}}(),s=function(){function t(i,e){r(this,t),this.geom=i,this.program=e,this.uniforms=[],this.textures=[],this.localCalls=[],this.globalCalls=[],this._isInitialized=!1}return a(t,[{key:"addUniform",value:function(t){this.uniforms.push(t)}},{key:"addTexture",value:function(t){this.textures.push(t)}},{key:"isInitialized",value:function(){var t=this._isInitialized;if(t)return t;this.program.isInitialized()||(t=!1);var i=!0,e=!1,r=void 0;try{for(var n,a=this.geom.attributes[Symbol.iterator]();!(i=(n=a.next()).done);i=!0){n.value.isInitialized()||(t=!1)}}catch(t){e=!0,r=t}finally{try{!i&&a.return&&a.return()}finally{if(e)throw r}}var s=!0,h=!1,o=void 0;try{for(var u,l=this.geom.buffers[Symbol.iterator]();!(s=(u=l.next()).done);s=!0){u.value.isInitialized()||(t=!1)}}catch(t){h=!0,o=t}finally{try{!s&&l.return&&l.return()}finally{if(h)throw o}}var f=!0,c=!1,v=void 0;try{for(var d,y=this.textures[Symbol.iterator]();!(f=(d=y.next()).done);f=!0){d.value.isInitialized()||(t=!1)}}catch(t){c=!0,v=t}finally{try{!f&&y.return&&y.return()}finally{if(c)throw v}}return t}},{key:"_setCalls",value:function(t,i){var e=this.program,r=!0,a=!1,s=void 0;try{for(var h,o=this.geom.attributes[Symbol.iterator]();!(r=(h=o.next()).done);r=!0){var u=h.value,l=e.getAttribLocation(t,u);this.localCalls.push(u.draw.bind(u,t,l))}}catch(t){a=!0,s=t}finally{try{!r&&o.return&&o.return()}finally{if(a)throw s}}var f=!0,c=!1,v=void 0;try{for(var d,y=this.geom.buffers[Symbol.iterator]();!(f=(d=y.next()).done);f=!0){var p=d.value;this.localCalls.push(p.draw.bind(p,t))}}catch(t){c=!0,v=t}finally{try{!f&&y.return&&y.return()}finally{if(c)throw v}}var b=!0,m=!1,M=void 0;try{for(var g,w=this.uniforms[Symbol.iterator]();!(b=(g=w.next()).done);b=!0){var _=g.value,x=e.getUniformLocation(t,_);this.localCalls.push(_.draw.bind(_,t,x))}}catch(t){m=!0,M=t}finally{try{!b&&w.return&&w.return()}finally{if(m)throw M}}var T=!0,P=!1,O=void 0;try{for(var k,E=this.textures[Symbol.iterator]();!(T=(k=E.next()).done);T=!0){var S=k.value,I=e.getTextureLocationIndex(t,S),A=n(I,2),C=A[0],j=A[1];this.localCalls.push(S.draw.bind(S,t,C,j))}}catch(t){P=!0,O=t}finally{try{!T&&E.return&&E.return()}finally{if(P)throw O}}var R=!0,L=!1,U=void 0;try{for(var D,V=i[Symbol.iterator]();!(R=(D=V.next()).done);R=!0){var z=D.value,F=e.getUniformLocation(t,z);this.globalCalls.push(z.draw.bind(z,t,F))}}catch(t){L=!0,U=t}finally{try{!R&&V.return&&V.return()}finally{if(L)throw U}}}},{key:"_initData",value:function(t){var i=(this.program,!0),e=!0,r=!1,n=void 0;try{for(var a,s=this.geom.attributes[Symbol.iterator]();!(e=(a=s.next()).done);e=!0){var h=a.value;h.isInitialized()||h.init(t)||(i=!1)}}catch(t){r=!0,n=t}finally{try{!e&&s.return&&s.return()}finally{if(r)throw n}}var o=!0,u=!1,l=void 0;try{for(var f,c=this.geom.buffers[Symbol.iterator]();!(o=(f=c.next()).done);o=!0){var v=f.value;v.isInitialized()||v.init(t)||(i=!1)}}catch(t){u=!0,l=t}finally{try{!o&&c.return&&c.return()}finally{if(u)throw l}}var d=!0,y=!1,p=void 0;try{for(var b,m=this.textures[Symbol.iterator]();!(d=(b=m.next()).done);d=!0){var M=b.value;M.isInitialized()||M.init(t)||(i=!1)}}catch(t){y=!0,p=t}finally{try{!d&&m.return&&m.return()}finally{if(y)throw p}}return i}},{key:"init",value:function(t,i){var e=(this.program,!0);return this.program.isInitialized()||(this.program.init(t)?this.program.draw(t):e=!1),this._initData(t)||(e=!1),e&&this.localCalls.length<1&&this._setCalls(t,i),this._isInitialized=e,e}},{key:"draw",value:function(t){var i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];i||this.program.draw(t);var e=!0,r=!1,n=void 0;try{for(var a,s=this.localCalls[Symbol.iterator]();!(e=(a=s.next()).done);e=!0){(0,a.value)()}}catch(t){r=!0,n=t}finally{try{!e&&s.return&&s.return()}finally{if(r)throw n}}if(!i){var h=!0,o=!1,u=void 0;try{for(var l,f=this.globalCalls[Symbol.iterator]();!(h=(l=f.next()).done);h=!0){(0,l.value)()}}catch(t){o=!0,u=t}finally{try{!h&&f.return&&f.return()}finally{if(o)throw u}}}this.geom.display(t)}}]),t}();i.default=s},function(t,i,e){"use strict";function r(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(i,"__esModule",{value:!0});var n=function(){function t(t,i){var e=[],r=!0,n=!1,a=void 0;try{for(var s,h=t[Symbol.iterator]();!(r=(s=h.next()).done)&&(e.push(s.value),!i||e.length!==i);r=!0);}catch(t){n=!0,a=t}finally{try{!r&&h.return&&h.return()}finally{if(n)throw a}}return e}return function(i,e){if(Array.isArray(i))return i;if(Symbol.iterator in Object(i))return t(i,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=function(){function t(t,i){for(var e=0;e<i.length;e++){var r=i[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(i,e,r){return e&&t(i.prototype,e),r&&t(i,r),i}}(),s=function(){function t(i,e){r(this,t),this.canvas=i,this.init(i),this.meshs=[],this.cam=e,this.uniforms=[e],this.depthTest=!0}return a(t,[{key:"_addCamToMeshs",value:function(){var t=this.cam;this.uniforms.push(t)}},{key:"addMesh",value:function(t){this.meshs.push(t),t.isInitialized()||t.init(this.gl,this.uniforms)}},{key:"rmMesh",value:function(t){var i=this.meshs.indexOf(t);i>-1&&this.meshs.splice(i,1)}},{key:"resize",value:function(t,i){var e=this.gl;e.viewportWidth=t,e.viewportHeight=i}},{key:"init",value:function(t){var i=void 0;try{i=t.getContext("webgl")||t.getContext("experimental-webgl"),i.viewportWidth=t.width,i.viewportHeight=t.height}catch(t){console.error("Could not initialise WebGL:",t.message)}i||console.error("Could not initialise WebGL"),this.gl=i}},{key:"draw",value:function(){var t=this.gl;t.viewport(0,0,t.viewportWidth,t.viewportHeight),t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT),this.cam.updated&&this.cam.update(t.viewportWidth,t.viewportHeight);var i=null,e=!0,r=!1,n=void 0;try{for(var a,s=this.meshs[Symbol.iterator]();!(e=(a=s.next()).done);e=!0){var h=a.value;h.isInitialized()?(h.draw(t,h.program===i),i=h.program):(h.init(t,this.uniforms),i=null)}}catch(t){r=!0,n=t}finally{try{!e&&s.return&&s.return()}finally{if(r)throw n}}}},{key:"depthTest",set:function(t){var i=this.gl;t?i.enable(i.DEPTH_TEST):i.disable(i.DEPTH_TEST),this._depthTest=!!t},get:function(){return this._depthTest}},{key:"bgColor",set:function(t){var i=n(t,4),e=i[0],r=i[1],a=i[2],s=i[3],h=void 0===s?1:s;this.gl.clearColor(e,r,a,h),this._bgColor=[e,r,a,h]},get:function(){return this._bgColor}}]),t}();i.default=s},function(t,i,e){"use strict";function r(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}function n(t,i){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!i||"object"!=typeof i&&"function"!=typeof i?t:i}function a(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Super expression must either be null or a function, not "+typeof i);t.prototype=Object.create(i&&i.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),i&&(Object.setPrototypeOf?Object.setPrototypeOf(t,i):t.__proto__=i)}function s(t,i){return Number.isInteger(t/i)}Object.defineProperty(i,"__esModule",{value:!0});var h=function(){function t(t,i){for(var e=0;e<i.length;e++){var r=i[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(i,e,r){return e&&t(i.prototype,e),r&&t(i,r),i}}(),o=function t(i,e,r){null===i&&(i=Function.prototype);var n=Object.getOwnPropertyDescriptor(i,e);if(void 0===n){var a=Object.getPrototypeOf(i);return null===a?void 0:t(a,e,r)}if("value"in n)return n.value;var s=n.get;if(void 0!==s)return s.call(r)},u=e(12),l=function(t){return t&&t.__esModule?t:{default:t}}(u),f=function(t){function i(t){r(this,i);var e=n(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,t));return e.srcs=[],e}return a(i,t),h(i,[{key:"addDxt5URL",value:function(t){var i=(t.src,t.width),e=t.height;t.format,t.priority,floor(.25*(i+3)),floor(.25*(e+3)),s(i,4)&&s(e,4)}},{key:"addURL",value:function(t){var i=this,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r={size:e,src:t,img:null,priority:0,init:null};r.init=function(t){t.bindTexture(t.TEXTURE_2D,i.pointer),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,!0),t.texImage2D(t.TEXTURE_2D,0,6408,i.format,t.UNSIGNED_BYTE,r.img),l.default.SETUP(t,r.img)},this.srcs.push(r)}},{key:"init",value:function(t,e){var r=o(i.prototype.__proto__||Object.getPrototypeOf(i.prototype),"init",this).call(this,t,e);this.pointer;return i.START_LOAD(t,this.srcs),r}}],[{key:"START_LOAD",value:function(t,e){if(e.length>0){e.sort(function(t,i){return t.size===i.size?t.size-i.size:t.priority-i.priority});e.filter(function(t){return t.size>=l.default.MAX_SIZE});if(e.length>1){var r=e[0],n=e[e.length-1];i.LOAD(r,function(){r.init(t),i.LOAD(n,function(){n.init(t)})})}else if(e.length>0){var a=e[0];i.LOAD(a,function(){a.init(t)})}else console.warn("The GPU can'nt load a texture with size > ",l.default.MAX_SIZE)}else console.warn("URL of your texture",this.label,"not found: texture.addURL(URL, size = 0)")}},{key:"LOAD",value:function(t,i){var e=new Image;e.onload=function(){i(t)},t.img=e,e.src=t.src}}]),i}(l.default);i.default=f},function(t,i,e){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function n(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}function a(t,i){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!i||"object"!=typeof i&&"function"!=typeof i?t:i}function s(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Super expression must either be null or a function, not "+typeof i);t.prototype=Object.create(i&&i.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),i&&(Object.setPrototypeOf?Object.setPrototypeOf(t,i):t.__proto__=i)}Object.defineProperty(i,"__esModule",{value:!0});var h=e(3),o=r(h),u=e(0),l=r(u),f=function(t){function i(t){return n(this,i),a(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,t,35676,(new o.default).identity()))}return s(i,t),i}(l.default);i.default=f},function(t,i,e){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function n(){S.matrix.rotate(.005,[0,1,0]),A.matrix.rotate(-.005,[0,1,0]),X.matrix.rotate(.01,[0,1,0]),H.matrix.rotate(-.01,[0,1,0]),x.draw(),requestAnimationFrame(n)}var a=e(0),s=(r(a),e(10)),h=r(s),o=e(1),u=(r(o),e(5)),l=r(u),f=e(4),c=r(f),v=e(9),d=r(v),y=e(7),p=r(y),b=e(6),m=r(b),M=e(8),g=r(M),w=document.body.querySelector("canvas"),_=new m.default("uPMatrix"),x=new g.default(w,_);x.bgColor=[0,0,.1,1],x.depthTest=!0;var T=new l.default,P=new l.default("\n    attribute vec3 aVertexPosition;\n    attribute vec4 aVertexColor;\n\n    uniform mat4 uMVMatrix;\n    uniform mat4 uPMatrix;\n\n    varying vec4 vColor;\n\n    void main(void) {\n        gl_Position = uPMatrix * uMVMatrix * vec4(aVertexPosition, 1.0);\n        float zDepth = 0.2 * (8.0 - gl_Position.z);\n        vec4 modifyColor = vec4(aVertexColor.rgb * zDepth, aVertexColor.a);\n        vColor = modifyColor;\n    }\n"),O=[0,1,0,-1,-1,1,1,-1,1,0,1,0,1,-1,1,1,-1,-1,0,1,0,1,-1,-1,-1,-1,-1,0,1,0,-1,-1,-1,-1,-1,1],k=[1,0,0,1,0,1,0,1,0,0,1,1,1,0,0,1,0,0,1,1,0,1,0,1,1,0,0,1,0,1,0,1,0,0,1,1,1,0,0,1,0,0,1,1,0,1,0,1],E=new c.default;E.addVertices("aVertexPosition",O,3),E.addVertices("aVertexColor",k,4);var S=new p.default(E,T),I=new h.default("uMVMatrix");S.addUniform(I),S.matrix=I.data,S.matrix.translate([-1.5,-1.5,-8]),x.addMesh(S);var A=new p.default(E,T),C=new h.default("uMVMatrix");A.addUniform(C),A.matrix=C.data,A.matrix.translate([-1.5,1.5,-8]),A.matrix.scale([1,-1,1]),x.addMesh(A);var j=[-1,-1,1,1,-1,1,1,1,1,-1,1,1,-1,-1,-1,-1,1,-1,1,1,-1,1,-1,-1,-1,1,-1,-1,1,1,1,1,1,1,1,-1,-1,-1,-1,1,-1,-1,1,-1,1,-1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,-1,1,-1,-1,-1,-1,-1,1,-1,1,1,-1,1,-1],R=[0,1,2,0,2,3,4,5,6,4,6,7,8,9,10,8,10,11,12,13,14,12,14,15,16,17,18,16,18,19,20,21,22,20,22,23],L=[[1,0,0,1],[1,1,0,1],[0,1,0,1],[1,.5,.5,1],[1,0,1,1],[0,0,1,1]],U=[];for(var D in L)for(var V=L[D],z=0;z<4;z++)U=U.concat(V);var F=new c.default;F.addVertices("aVertexPosition",j,3),F.addVertices("aVertexColor",U,4),F.addIndices(R);var X=new p.default(F,P),N=new h.default("uMVMatrix");X.addUniform(N),X.matrix=N.data,X.matrix.translate([1.5,-1.5,-8]),x.addMesh(X);var q=new l.default("   \n    attribute vec3 aVertexPosition;\n    attribute vec2 aTextureCoord;\n\n    uniform mat4 uMVMatrix;\n    uniform mat4 uPMatrix;\n\n    varying vec2 vTextureCoord;\n\n    void main(void) {\n        gl_Position = uPMatrix * uMVMatrix * vec4(aVertexPosition, 1.0);\n        vTextureCoord = aTextureCoord;\n    }","\n    precision mediump float;\n\n    varying vec2 vTextureCoord;\n\n    uniform sampler2D uSampler;\n\n    void main(void) {\n        gl_FragColor = texture2D(uSampler, vec2(vTextureCoord.s, vTextureCoord.t));\n    }"),G=[0,0,1,0,1,1,0,1,1,0,1,1,0,1,0,0,0,1,0,0,1,0,1,1,1,1,0,1,0,0,1,0,1,0,1,1,0,1,0,0,0,0,1,0,1,1,0,1],B=new d.default("uSampler");B.addURL("cube-diffuse.jpg");var W=new c.default;W.addVertices("aVertexPosition",j,3),W.addVertices("aTextureCoord",G,2),W.addIndices(R);var H=new p.default(W,q),Z=new h.default("uMVMatrix");H.addUniform(Z),H.matrix=Z.data,H.addTexture(B),H.matrix.translate([1.5,1.5,-8]),x.addMesh(H),n()},function(t,i,e){"use strict";function r(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(i,"__esModule",{value:!0});var n=function(){function t(t,i){for(var e=0;e<i.length;e++){var r=i[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(i,e,r){return e&&t(i.prototype,e),r&&t(i,r),i}}(),a=function(){function t(i){r(this,t),this.label=i,this.color=[255,255,255,255],this.pointer=null,this.parameters={9729:9987},this.setFormat()}return n(t,[{key:"setFormat",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:6408;this.format=t}},{key:"setParameters",value:function(t,i,e){}},{key:"isInitialized",value:function(){return!!this.pointer}},{key:"init",value:function(i){var e=i.createTexture();return t._DATA_INITIALIZED||t.SET_DATA(i),i.bindTexture(i.TEXTURE_2D,e),i.texImage2D(i.TEXTURE_2D,0,i.RGB,1,1,0,i.RGB,i.UNSIGNED_BYTE,new Uint8Array(this.color)),this.pointer=e,!0}},{key:"draw",value:function(t,i,e){t.uniform1i(i,e),t.activeTexture(t.TEXTURE0+e),t.bindTexture(t.TEXTURE_2D,this.pointer)}}],[{key:"IS_POWER_OF_2",value:function(t){return 0==(t&t-1)}},{key:"SET_DATA",value:function(i){t.MAX_SIZE=i.getParameter(i.MAX_TEXTURE_SIZE),t.FORMAT={};for(var e=i.getParameter(i.COMPRESSED_TEXTURE_FORMATS),r=0;r<e.length;r++)t.FORMAT[e[r]]=!0,console.log(e[r]);t._DATA_INITIALIZED=!0}},{key:"SETUP",value:function(i,e){t.IS_POWER_OF_2(e.width)&&t.IS_POWER_OF_2(e.height)?(i.generateMipmap(i.TEXTURE_2D),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.LINEAR_MIPMAP_LINEAR)):(i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.LINEAR))}}]),t}();i.default=a}]);