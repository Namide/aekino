!function(t){function e(i){if(r[i])return r[i].exports;var n=r[i]={i:i,l:!1,exports:{}};return t[i].call(n.exports,n,n.exports,e),n.l=!0,n.exports}var r={};e.m=t,e.c=r,e.i=function(t){return t},e.d=function(t,r,i){e.o(t,r)||Object.defineProperty(t,r,{configurable:!1,enumerable:!0,get:i})},e.n=function(t){var r=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(r,"a",r),r},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=11)}([function(t,e,r){"use strict";function i(t){if(Array.isArray(t)){for(var e=0,r=Array(t.length);e<t.length;e++)r[e]=t[e];return r}return Array.from(t)}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,r,i){return r&&t(e.prototype,r),i&&t(e,i),e}}(),o=function(){function t(e,r,i){n(this,t),this.label=e,this.type=r,this.data=i}return a(t,[{key:"draw",value:function(t,e){switch(this.type){case 35676:t.uniformMatrix4fv(e,!1,this.data);break;case 35665:t.uniform3f.apply(t,[e].concat(i(this.data)));break;default:console.error("Uniform type unknow: {label:",this.label,", type:",this.type,"}")}}}]),t}();e.default=o},function(t,e,r){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,r,i){return r&&t(e.prototype,r),i&&t(e,i),e}}(),s=function t(e,r,i){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,r);if(void 0===n){var a=Object.getPrototypeOf(e);return null===a?void 0:t(a,r,i)}if("value"in n)return n.value;var o=n.get;if(void 0!==o)return o.call(i)},u=r(2),h=function(t){return t&&t.__esModule?t:{default:t}}(u),l=function(t){function e(t){i(this,e);var r=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return r.label=t,r}return a(e,t),o(e,[{key:"draw",value:function(t,r){s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"draw",this).call(this,t),t.vertexAttribPointer(r,this.itemSize,this.itemType,!1,0,0)}}]),e}(h.default);e.default=l},function(t,e,r){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,r,i){return r&&t(e.prototype,r),i&&t(e,i),e}}(),a=function(){function t(){i(this,t),this.buffer=null}return n(t,[{key:"isInitialized",value:function(){return!!this.buffer}},{key:"setArray",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:34962,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:35044;this.arrayType=e,this.data=t,this.arrayUsage=r}},{key:"setItems",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5126,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.itemType=t,this.itemSize=e}},{key:"init",value:function(t){var e=t.createBuffer();return t.bindBuffer(this.arrayType,e),t.bufferData(this.arrayType,this.data,this.arrayUsage),this.buffer=e,!0}},{key:"draw",value:function(t){t.bindBuffer(this.arrayType,this.buffer)}}]),t}();e.default=a},function(t,e,r){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function s(t,e,r,i,n,a,o,s,u,h,l,f,c,v,d,y,p){t[0]=e,t[1]=r,t[2]=i,t[3]=n,t[4]=a,t[5]=o,t[6]=s,t[7]=u,t[8]=h,t[9]=l,t[10]=f,t[11]=c,t[12]=v,t[13]=d,t[14]=y,t[15]=p}Object.defineProperty(e,"__esModule",{value:!0});var u=function(){function t(t,e){var r=[],i=!0,n=!1,a=void 0;try{for(var o,s=t[Symbol.iterator]();!(i=(o=s.next()).done)&&(r.push(o.value),!e||r.length!==e);i=!0);}catch(t){n=!0,a=t}finally{try{!i&&s.return&&s.return()}finally{if(n)throw a}}return r}return function(e,r){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),h=function(){function t(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,r,i){return r&&t(e.prototype,r),i&&t(e,i),e}}(),l=function(t){function e(){i(this,e);var t=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,16));return t[0]=1,t[5]=1,t[10]=1,t[15]=1,t}return o(e,t),h(e,[{key:"clone",value:function(){var t=new e;return t.set(this),t}},{key:"copy",value:function(t){return t.set(this),this}},{key:"identity",value:function(){return s(this,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}},{key:"add",value:function(t){return this[0]+=t[0],this[1]+=t[1],this[2]+=t[2],this[3]+=t[3],this[4]+=t[4],this[5]+=t[5],this[6]+=t[6],this[7]+=t[7],this[8]+=t[8],this[9]+=t[9],this[10]+=t[10],this[11]+=t[11],this[12]+=t[12],this[13]+=t[13],this[14]+=t[14],this[15]+=t[15],this}},{key:"subtract",value:function(t){return this[0]-=t[0],this[1]-=t[1],this[2]-=t[2],this[3]-=t[3],this[4]-=t[4],this[5]-=t[5],this[6]-=t[6],this[7]-=t[7],this[8]-=t[8],this[9]-=t[9],this[10]-=t[10],this[11]-=t[11],this[12]-=t[12],this[13]-=t[13],this[14]-=t[14],this[15]-=t[15],this}},{key:"multiplyScalar",value:function(t){return this[0]*=t,this[1]*=t,this[2]*=t,this[3]*=t,this[4]*=t,this[5]*=t,this[6]*=t,this[7]*=t,this[8]*=t,this[9]*=t,this[10]*=t,this[11]*=t,this[12]*=t,this[13]*=t,this[14]*=t,this[15]*=t,this}},{key:"multiplyScalarAndAdd",value:function(t,e){return this[0]+=t[0]*e,this[1]+=t[1]*e,this[2]+=t[2]*e,this[3]+=t[3]*e,this[4]+=t[4]*e,this[5]+=t[5]*e,this[6]+=t[6]*e,this[7]+=t[7]*e,this[8]+=t[8]*e,this[9]+=t[9]*e,this[10]+=t[10]*e,this[11]+=t[11]*e,this[12]+=t[12]*e,this[13]+=t[13]*e,this[14]+=t[14]*e,this[15]+=t[15]*e,this}},{key:"exactEquals",value:function(t){return this[0]===t[0]&&this[1]===t[1]&&this[2]===t[2]&&this[3]===t[3]&&this[4]===t[4]&&this[5]===t[5]&&this[6]===t[6]&&this[7]===t[7]&&this[8]===t[8]&&this[9]===t[9]&&this[10]===t[10]&&this[11]===t[11]&&this[12]===t[12]&&this[13]===t[13]&&this[14]===t[14]&&this[15]===t[15]}},{key:"equals",value:function(t){var e=u(this,16),r=e[0],i=e[1],n=e[2],a=e[3],o=e[4],s=e[5],h=e[6],l=e[7],f=e[8],c=e[9],v=e[10],d=e[11],y=e[12],p=e[13],b=e[14],m=e[15],M=u(t,16),g=M[0],_=M[1],w=M[2],x=M[3],T=M[4],E=M[5],P=M[6],O=M[7],k=M[8],S=M[9],I=M[10],A=M[11],C=M[12],R=M[13],L=M[14],D=M[15];return Math.abs(r-g)<=1e-6*Math.max(1,Math.abs(r),Math.abs(g))&&Math.abs(i-_)<=1e-6*Math.max(1,Math.abs(i),Math.abs(_))&&Math.abs(n-w)<=1e-6*Math.max(1,Math.abs(n),Math.abs(w))&&Math.abs(a-x)<=1e-6*Math.max(1,Math.abs(a),Math.abs(x))&&Math.abs(o-T)<=1e-6*Math.max(1,Math.abs(o),Math.abs(T))&&Math.abs(s-E)<=1e-6*Math.max(1,Math.abs(s),Math.abs(E))&&Math.abs(h-P)<=1e-6*Math.max(1,Math.abs(h),Math.abs(P))&&Math.abs(l-O)<=1e-6*Math.max(1,Math.abs(l),Math.abs(O))&&Math.abs(f-k)<=1e-6*Math.max(1,Math.abs(f),Math.abs(k))&&Math.abs(c-S)<=1e-6*Math.max(1,Math.abs(c),Math.abs(S))&&Math.abs(v-I)<=1e-6*Math.max(1,Math.abs(v),Math.abs(I))&&Math.abs(d-A)<=1e-6*Math.max(1,Math.abs(d),Math.abs(A))&&Math.abs(y-C)<=1e-6*Math.max(1,Math.abs(y),Math.abs(C))&&Math.abs(p-R)<=1e-6*Math.max(1,Math.abs(p),Math.abs(R))&&Math.abs(b-L)<=1e-6*Math.max(1,Math.abs(b),Math.abs(L))&&Math.abs(m-D)<=1e-6*Math.max(1,Math.abs(m),Math.abs(D))}},{key:"transpose",value:function(t){if(t===this){var e=t[1],r=t[2],i=t[3],n=t[6],a=t[7],o=t[11];this[1]=t[4],this[2]=t[8],this[3]=t[12],this[4]=e,this[6]=t[9],this[7]=t[13],this[8]=r,this[9]=n,this[11]=t[14],this[12]=i,this[13]=a,this[14]=o}else s(this,t[0],t[4],t[8],t[12],t[1],t[5],t[9],t[13],t[2],t[6],t[10],t[14],t[3],t[7],t[11],t[15]);return this}},{key:"invert",value:function(){var t=u(this,16),e=t[0],r=t[1],i=t[2],n=t[3],a=t[4],o=t[5],h=t[6],l=t[7],f=t[8],c=t[9],v=t[10],d=t[11],y=t[12],p=t[13],b=t[14],m=t[15],M=e*o-r*a,g=e*h-i*a,_=e*l-n*a,w=r*h-i*o,x=r*l-n*o,T=i*l-n*h,E=f*p-c*y,P=f*b-v*y,O=f*m-d*y,k=c*b-v*p,S=c*m-d*p,I=v*m-d*b,A=M*I-g*S+_*k+w*O-x*P+T*E;return A?(A=1/A,s(this,(o*I-h*S+l*k)*A,(i*S-r*I-n*k)*A,(p*T-b*x+m*w)*A,(v*x-c*T-d*w)*A,(h*O-a*I-l*P)*A,(e*I-i*O+n*P)*A,(b*_-y*T-m*g)*A,(f*T-v*_+d*g)*A,(a*S-o*O+l*E)*A,(r*O-e*S-n*E)*A,(y*x-p*_+m*M)*A,(c*_-f*x-d*M)*A,(o*P-a*k-h*E)*A,(e*k-r*P+i*E)*A,(p*g-y*w-b*M)*A,(f*w-c*g+v*M)*A),this):this}},{key:"adjoint",value:function(){var t=u(this,16),e=t[0],r=t[1],i=t[2],n=t[3],a=t[4],o=t[5],h=t[6],l=t[7],f=t[8],c=t[9],v=t[10],d=t[11],y=t[12],p=t[13],b=t[14],m=t[15];return s(this,o*(v*m-d*b)-c*(h*m-l*b)+p*(h*d-l*v),-(r*(v*m-d*b)-c*(i*m-n*b)+p*(i*d-n*v)),r*(h*m-l*b)-o*(i*m-n*b)+p*(i*l-n*h),-(r*(h*d-l*v)-o*(i*d-n*v)+c*(i*l-n*h)),-(a*(v*m-d*b)-f*(h*m-l*b)+y*(h*d-l*v)),e*(v*m-d*b)-f*(i*m-n*b)+y*(i*d-n*v),-(e*(h*m-l*b)-a*(i*m-n*b)+y*(i*l-n*h)),e*(h*d-l*v)-a*(i*d-n*v)+f*(i*l-n*h),a*(c*m-d*p)-f*(o*m-l*p)+y*(o*d-l*c),-(e*(c*m-d*p)-f*(r*m-n*p)+y*(r*d-n*c)),e*(o*m-l*p)-a*(r*m-n*p)+y*(r*l-n*o),-(e*(o*d-l*c)-a*(r*d-n*c)+f*(r*l-n*o)),-(a*(c*b-v*p)-f*(o*b-h*p)+y*(o*v-h*c)),e*(c*b-v*p)-f*(r*b-i*p)+y*(r*v-i*c),-(e*(o*b-h*p)-a*(r*b-i*p)+y*(r*h-i*o)),e*(o*v-h*c)-a*(r*v-i*c)+f*(r*h-i*o)),this}},{key:"determinant",value:function(){var t=u(this,16),e=t[0],r=t[1],i=t[2],n=t[3],a=t[4],o=t[5],s=t[6],h=t[7],l=t[8],f=t[9],c=t[10],v=t[11],d=t[12],y=t[13],p=t[14],b=t[15];return(e*o-r*a)*(c*b-v*p)-(e*s-i*a)*(f*b-v*y)+(e*h-n*a)*(f*p-c*y)+(r*s-i*o)*(l*b-v*d)-(r*h-n*o)*(l*p-c*d)+(i*h-n*s)*(l*y-f*d)}},{key:"multiply",value:function(t){var e=u(this,16),r=e[0],i=e[1],n=e[2],a=e[3],o=e[4],s=e[5],h=e[6],l=e[7],f=e[8],c=e[9],v=e[10],d=e[11],y=e[12],p=e[13],b=e[14],m=e[15],M=u(t,4),g=M[0],_=M[1],w=M[2],x=M[3];return this[0]=g*r+_*o+w*f+x*y,this[1]=g*i+_*s+w*c+x*p,this[2]=g*n+_*h+w*v+x*b,this[3]=g*a+_*l+w*d+x*m,g=t[4],_=t[5],w=t[6],x=t[7],this[4]=g*r+_*o+w*f+x*y,this[5]=g*i+_*s+w*c+x*p,this[6]=g*n+_*h+w*v+x*b,this[7]=g*a+_*l+w*d+x*m,g=t[8],_=t[9],w=t[10],x=t[11],this[8]=g*r+_*o+w*f+x*y,this[9]=g*i+_*s+w*c+x*p,this[10]=g*n+_*h+w*v+x*b,this[11]=g*a+_*l+w*d+x*m,g=t[12],_=t[13],w=t[14],x=t[15],this[12]=g*r+_*o+w*f+x*y,this[13]=g*i+_*s+w*c+x*p,this[14]=g*n+_*h+w*v+x*b,this[15]=g*a+_*l+w*d+x*m,this}},{key:"translate",value:function(t){var e=u(t,3),r=e[0],i=e[1],n=e[2];return this[12]=this[0]*r+this[4]*i+this[8]*n+this[12],this[13]=this[1]*r+this[5]*i+this[9]*n+this[13],this[14]=this[2]*r+this[6]*i+this[10]*n+this[14],this[15]=this[3]*r+this[7]*i+this[11]*n+this[15],this}},{key:"scale",value:function(t){var e=u(t,3),r=e[0],i=e[1],n=e[2];return this[0]*=r,this[1]*=r,this[2]*=r,this[3]*=r,this[4]*=i,this[5]*=i,this[6]*=i,this[7]*=i,this[8]*=n,this[9]*=n,this[10]*=n,this[11]*=n,this}},{key:"rotate",value:function(t,e){var r=u(e,3),i=r[0],n=r[1],a=r[2],o=Math.sqrt(i*i+n*n+a*a);if(Math.abs(o)>1e-6){o=1/o,i*=o,n*=o,a*=o;var s=Math.sin(t),h=Math.cos(t),l=1-h,f=u(this,12),c=f[0],v=f[1],d=f[2],y=f[3],p=f[4],b=f[5],m=f[6],M=f[7],g=f[8],_=f[9],w=f[10],x=f[11],T=i*i*l+h,E=n*i*l+a*s,P=a*i*l-n*s,O=i*n*l-a*s,k=n*n*l+h,S=a*n*l+i*s,I=i*a*l+n*s,A=n*a*l-i*s,C=a*a*l+h;this[0]=c*T+p*E+g*P,this[1]=v*T+b*E+_*P,this[2]=d*T+m*E+w*P,this[3]=y*T+M*E+x*P,this[4]=c*O+p*k+g*S,this[5]=v*O+b*k+_*S,this[6]=d*O+m*k+w*S,this[7]=y*O+M*k+x*S,this[8]=c*I+p*A+g*C,this[9]=v*I+b*A+_*C,this[10]=d*I+m*A+w*C,this[11]=y*I+M*A+x*C}return this}},{key:"rotateX",value:function(t){var e=Math.sin(t),r=Math.cos(t),i=this[4],n=this[5],a=this[6],o=this[7],s=this[8],u=this[9],h=this[10],l=this[11];return this[4]=i*r+s*e,this[5]=n*r+u*e,this[6]=a*r+h*e,this[7]=o*r+l*e,this[8]=s*r-i*e,this[9]=u*r-n*e,this[10]=h*r-a*e,this[11]=l*r-o*e,this}},{key:"rotateY",value:function(t){var e=Math.sin(t),r=Math.cos(t),i=a[0],n=a[1],o=a[2],s=a[3],u=a[8],h=a[9],l=a[10],f=a[11];return this[0]=i*r-u*e,this[1]=n*r-h*e,this[2]=o*r-l*e,this[3]=s*r-f*e,this[8]=i*e+u*r,this[9]=n*e+h*r,this[10]=o*e+l*r,this[11]=s*e+f*r,this}},{key:"rotateZ",value:function(t){var e=Math.sin(t),r=Math.cos(t),i=u(this,8),n=i[0],a=i[1],o=(i[2],i[3]),s=i[4],h=i[5],l=i[6],f=i[7];return this[0]=n*r+s*e,this[1]=a*r+h*e,this[2]=a02*r+l*e,this[3]=o*r+f*e,this[4]=s*r-n*e,this[5]=h*r-a*e,this[6]=l*r-a02*e,this[7]=f*r-o*e,this}},{key:"fromTranslation",value:function(t){return s(this,1,0,0,0,0,1,0,0,0,0,1,0,t[0],t[1],t[2],1),this}},{key:"fromScaling",value:function(t){return s(this,t[0],0,0,0,0,t[1],0,0,0,0,t[2],0,0,0,0,1),this}},{key:"fromRotation",value:function(t,e){var r=u(e,3),i=r[0],n=r[1],a=r[2],o=Math.sqrt(i*i+n*n+a*a);if(Math.abs(o)>1e-6){o=1/o,i*=o,n*=o,a*=o;var h=Math.sin(t),l=Math.cos(t),f=1-l;s(this,i*i*f+l,n*i*f+a*h,a*i*f-n*h,0,i*n*f-a*h,n*n*f+l,a*n*f+i*h,0,i*a*f+n*h,n*a*f-i*h,a*a*f+l,0,0,0,0,1)}return this}},{key:"fromXRotation",value:function(t){var e=Math.sin(t),r=Math.cos(t);return s(this,1,0,0,0,0,r,e,0,0,-e,r,0,0,0,0,1),this}},{key:"fromYRotation",value:function(t){var e=Math.sin(t),r=Math.cos(t);return s(this,r,0,-e,0,0,1,0,0,e,0,r,0,0,0,0,1),this}},{key:"fromZRotation",value:function(t){var e=Math.sin(t),r=Math.cos(t);return s(this,r,e,0,0,-e,r,0,0,0,0,1,0,0,0,0,1),this}},{key:"fromQuat",value:function(t){var e=u(t,4),r=e[0],i=e[1],n=e[2],a=e[3],o=r+r,h=i+i,l=n+n,f=r*o,c=i*o,v=i*h,d=n*o,y=n*h,p=n*l,b=a*o,m=a*h,M=a*l;return s(this,1-v-p,c+M,d-m,0,c-M,1-f-p,y+b,0,d+m,y-b,1-f-v,0,0,0,0,1),this}},{key:"fromRotationTranslation",value:function(t,e){var r=u(t,4),i=r[0],n=r[1],a=r[2],o=r[3],h=i+i,l=n+n,f=a+a,c=i*h,v=i*l,d=i*f,y=n*l,p=n*f,b=a*f,m=o*h,M=o*l,g=o*f;return s(this,1-(y+b),v+g,d-M,0,v-g,1-(c+b),p+m,0,d+M,p-m,1-(c+y),0,e[0],e[1],e[2],1),this}},{key:"fromRotationTranslationScale",value:function(t,e,r){var i=u(r,3),n=i[0],a=i[1],o=i[2],h=u(t,4),l=h[0],f=h[1],c=h[2],v=h[3],d=l+l,y=f+f,p=c+c,b=l*d,m=l*y,M=l*p,g=f*y,_=f*p,w=c*p,x=v*d,T=v*y,E=v*p;return s(this,(1-(g+w))*n,(m+E)*n,(M-T)*n,0,(m-E)*a,(1-(b+w))*a,(_+x)*a,0,(M+T)*o,(_-x)*o,(1-(b+g))*o,0,e[0],e[1],e[2],1),this}},{key:"fromRotationTranslationScaleOrigin",value:function(t,e,r,i){var n=u(t,4),a=n[0],o=n[1],h=n[2],l=n[3],f=a+a,c=o+o,v=h+h,d=a*f,y=a*c,p=a*v,b=o*c,m=o*v,M=h*v,g=l*f,_=l*c,w=l*v,x=u(r,3),T=x[0],E=x[1],P=x[2],O=u(i,3),k=O[0],S=O[1],I=O[2];return s(this,(1-(b+M))*T,(y+w)*T,(p-_)*T,0,(y-w)*E,(1-(d+M))*E,(m+g)*E,0,(p+_)*P,(m-g)*P,(1-(d+b))*P,0,e[0]+k-(this[0]*k+this[4]*S+this[8]*I),e[1]+S-(this[1]*k+this[5]*S+this[9]*I),e[2]+I-(this[2]*k+this[6]*S+this[10]*I),1),this}},{key:"getTranslation",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Float32Array(3);return e[0]=this[12],e[1]=this[13],e[2]=this[14],e}},{key:"getRotation",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Float32Array(4),e=this[0]+this[5]+this[10];if(e>0){var r=2*Math.sqrt(e+1);t[0]=(this[6]-this[9])/r,t[1]=(this[8]-this[2])/r,t[2]=(this[1]-this[4])/r,t[3]=.25*r}else if(this[0]>this[5]&this[0]>this[10]){var i=2*Math.sqrt(1+this[0]-this[5]-this[10]);t[0]=.25*i,t[1]=(this[1]+this[4])/i,t[2]=(this[8]+this[2])/i,t[3]=(this[6]-this[9])/i}else if(this[5]>this[10]){var n=Math.sqrt(1+this[5]-this[0]-this[10]);t[0]=(this[1]+this[4])/n*2,t[1]=.25*n,t[2]=(this[6]+this[9])/n,t[3]=(this[8]-this[2])/n}else{var a=2*Math.sqrt(1+this[10]-this[0]-this[5]);t[0]=(this[8]+this[2])/a,t[1]=(this[6]+this[9])/a,t[2]=.25*a,t[3]=(this[1]-this[4])/a}return t}},{key:"frustrum",value:function(t,e,r,i,n,a){var o=1/(e-t),u=1/(i-r),h=1/(n-a);return s(this,2*n*o,0,0,0,0,2*n*u,0,0,(e+t)*o,(i+r)*u,(a+n)*h,-1,0,0,a*n*2*h,0),this}},{key:"perspective",value:function(t,e,r,i){var n=1/Math.tan(t/2),a=1/(r-i);return s(this,n/e,0,0,0,0,n,0,0,0,0,(i+r)*a,-1,0,0,2*i*r*a,0),this}},{key:"perspectiveFromFieldOfView",value:function(t,e,r){var i=Math.tan(t.upDegrees*Math.PI/180),n=Math.tan(t.downDegrees*Math.PI/180),a=Math.tan(t.leftDegrees*Math.PI/180),o=Math.tan(t.rightDegrees*Math.PI/180),u=2/(a+o),h=2/(i+n);return s(this,u,0,0,0,0,h,0,0,-(a-o)*u*.5,(i-n)*h*.5,r/(e-r),-1,0,0,r*e/(e-r),0),this}},{key:"ortho",value:function(t,e,r,i,n,a){var o=1/(t-e),u=1/(r-i),h=1/(n-a);return s(this,-2*o,0,0,0,0,-2*u,0,0,0,0,2*h,0,(t+e)*o,(i+r)*u,(a+n)*h,1),this}},{key:"lookAt",value:function(t,e,r){var i=u(t,3),n=i[0],a=i[1],o=i[2],h=u(r,3),l=h[0],f=h[1],c=h[2],v=u(e,3),d=v[0],y=v[1],p=v[2];if(Math.abs(n-d)<1e-6&&Math.abs(a-y)<1e-6&&Math.abs(o-p)<1e-6)return this.identity();var b=n-d,m=a-y,M=o-p,g=1/Math.sqrt(b*b+m*m+M*M);b*=g,m*=g,M*=g;var _=f*M-c*m,w=c*b-l*M,x=l*m-f*b;g=Math.sqrt(_*_+w*w+x*x),g?(g=1/g,_*=g,w*=g,x*=g):(_=0,w=0,x=0);var T=m*x-M*w,E=M*_-b*x,P=b*w-m*_;return g=Math.sqrt(T*T+E*E+P*P),g?(g=1/g,T*=g,E*=g,P*=g):(T=0,E=0,P=0),s(this,_,T,b,0,w,E,m,0,x,P,M,0,-(_*n+w*a+x*o),-(T*n+E*a+P*o),-(b*n+m*a+M*o),1),this}},{key:"frob",value:function(){return Math.sqrt(Math.pow(this[0],2)+Math.pow(this[1],2)+Math.pow(this[2],2)+Math.pow(this[3],2)+Math.pow(this[4],2)+Math.pow(this[5],2)+Math.pow(this[6],2)+Math.pow(this[7],2)+Math.pow(this[8],2)+Math.pow(this[9],2)+Math.pow(this[10],2)+Math.pow(this[11],2)+Math.pow(this[12],2)+Math.pow(this[13],2)+Math.pow(this[14],2)+Math.pow(this[15],2))}}]),e}(Float32Array);e.default=l},function(t,e,r){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,r,i){return r&&t(e.prototype,r),i&&t(e,i),e}}(),o=r(2),s=i(o),u=r(1),h=i(u),l=function(){function t(){n(this,t),this.attributes=[],this.buffers=[],this.hasIndices=!1,this.numItems=0}return a(t,[{key:"addVertices",value:function(t,e,r){var i=new h.default(t);i.setArray(new Float32Array(e),34962),i.setItems(5126,r),this.attributes.push(i),this.numItems<1&&(this.numItems=e.length/r)}},{key:"addIndices",value:function(t){this.hasIndices=!0;var e=new s.default;e.setArray(new Uint16Array(t),34963),e.setItems(5125,1),this.buffers.push(e),this.numItems=t.length}},{key:"display",value:function(t){this.hasIndices?t.drawElements(t.TRIANGLES,this.numItems,t.UNSIGNED_SHORT,0):t.drawArrays(t.TRIANGLES,0,this.numItems)}}]),t}();e.default=l},function(t,e,r){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,r,i){return r&&t(e.prototype,r),i&&t(e,i),e}}(),a="      \n    attribute vec3 aVertexPosition;\n    attribute vec4 aVertexColor;\n\n    uniform mat4 uMVMatrix;\n    uniform mat4 uPMatrix;\n\n    varying vec4 vColor;\n\n    void main(void) {\n        gl_Position = uPMatrix * uMVMatrix * vec4(aVertexPosition, 1.0);\n        vColor = aVertexColor;\n    }\n",o="\n    precision mediump float;\n\n    varying vec4 vColor;\n\n    void main(void) {\n        gl_FragColor = vColor;\n    }\n",s=0,u=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o;i(this,t),this.vertexShaderSrc=e,this.fragmentShaderSrc=r,this.attribLocation={},this.uniformLocation={},this.textureLocation={},this.textureIndex={},this.textureNum=0,this.id=++s}return n(t,[{key:"isInitialized",value:function(){return!!this.pointer}},{key:"init",value:function(t){this.vertexShader=this._createShader(t,35633,this.vertexShaderSrc),this.fragmentShader=this._createShader(t,35632,this.fragmentShaderSrc);var e=t.createProgram();return t.attachShader(e,this.vertexShader),t.attachShader(e,this.fragmentShader),t.linkProgram(e),t.getProgramParameter(e,t.LINK_STATUS)?(t.useProgram(e),this.pointer=e,!0):(console.error("Shader initialization error"),!1)}},{key:"getAttribLocation",value:function(t,e){var r=e.label;if(!this.attribLocation.hasOwnProperty(r)){var i=t.getAttribLocation(this.pointer,r);return t.enableVertexAttribArray(i),this.attribLocation[r]=i,i}return this.attribLocation[r]}},{key:"getUniformLocation",value:function(t,e){var r=e.label;if(!this.uniformLocation.hasOwnProperty(r)){var i=t.getUniformLocation(this.pointer,r);return this.uniformLocation[r]=i,i}return this.uniformLocation[r]}},{key:"getTextureLocationIndex",value:function(t,e){var r=e.label;if(!this.textureLocation.hasOwnProperty(r)||!this.textureIndex.hasOwnProperty(r)){var i=t.getUniformLocation(this.pointer,e.label);return this.textureLocation[r]=i,this.textureIndex[r]=this.textureNum,[i,this.textureNum++]}return[this.textureLocation[r],this.textureIndex[r]]}},{key:"draw",value:function(t){t.useProgram(this.pointer)}},{key:"_createShader",value:function(t,e,r){var i=t.createShader(e);return t.shaderSource(i,r),t.compileShader(i),t.getShaderParameter(i,t.COMPILE_STATUS)?i:console.error("Une erreur est survenue au cours de la compilation du shader: "+t.getShaderInfoLog(i))}}]),t}();e.default=u},function(t,e,r){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,r,i){return r&&t(e.prototype,r),i&&t(e,i),e}}(),u=r(3),h=i(u),l=r(0),f=i(l),c=function(t){function e(t){n(this,e);var r=a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,35676,new h.default));return r.fovy=45,r.near=.1,r.far=1e3,r._matrix=new h.default,r.updated=!0,r}return o(e,t),s(e,[{key:"update",value:function(t,e){this.data.perspective(this.fovy*Math.PI/180,t/e,.1,100),this.data.multiply(this._matrix),this.updated=!1}},{key:"matrix",get:function(){return this.updated=!0,this._matrix}}]),e}(f.default);e.default=c},function(t,e,r){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){var r=[],i=!0,n=!1,a=void 0;try{for(var o,s=t[Symbol.iterator]();!(i=(o=s.next()).done)&&(r.push(o.value),!e||r.length!==e);i=!0);}catch(t){n=!0,a=t}finally{try{!i&&s.return&&s.return()}finally{if(n)throw a}}return r}return function(e,r){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=function(){function t(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,r,i){return r&&t(e.prototype,r),i&&t(e,i),e}}(),o=function(){function t(e,r){i(this,t),this.geom=e,this.program=r,this.uniforms=[],this.textures=[],this.localCalls=[],this.globalCalls=[],this._isInitialized=!1}return a(t,[{key:"addUniform",value:function(t){this.uniforms.push(t)}},{key:"addTexture",value:function(t){this.textures.push(t)}},{key:"isInitialized",value:function(){var t=this._isInitialized;if(t)return t;this.program.isInitialized()||(t=!1);var e=!0,r=!1,i=void 0;try{for(var n,a=this.geom.attributes[Symbol.iterator]();!(e=(n=a.next()).done);e=!0){n.value.isInitialized()||(t=!1)}}catch(t){r=!0,i=t}finally{try{!e&&a.return&&a.return()}finally{if(r)throw i}}var o=!0,s=!1,u=void 0;try{for(var h,l=this.geom.buffers[Symbol.iterator]();!(o=(h=l.next()).done);o=!0){h.value.isInitialized()||(t=!1)}}catch(t){s=!0,u=t}finally{try{!o&&l.return&&l.return()}finally{if(s)throw u}}var f=!0,c=!1,v=void 0;try{for(var d,y=this.textures[Symbol.iterator]();!(f=(d=y.next()).done);f=!0){d.value.isInitialized()||(t=!1)}}catch(t){c=!0,v=t}finally{try{!f&&y.return&&y.return()}finally{if(c)throw v}}return t}},{key:"_setCalls",value:function(t,e){var r=this.program,i=!0,a=!1,o=void 0;try{for(var s,u=this.geom.attributes[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){var h=s.value,l=r.getAttribLocation(t,h);this.localCalls.push(h.draw.bind(h,t,l))}}catch(t){a=!0,o=t}finally{try{!i&&u.return&&u.return()}finally{if(a)throw o}}var f=!0,c=!1,v=void 0;try{for(var d,y=this.geom.buffers[Symbol.iterator]();!(f=(d=y.next()).done);f=!0){var p=d.value;this.localCalls.push(p.draw.bind(p,t))}}catch(t){c=!0,v=t}finally{try{!f&&y.return&&y.return()}finally{if(c)throw v}}var b=!0,m=!1,M=void 0;try{for(var g,_=this.uniforms[Symbol.iterator]();!(b=(g=_.next()).done);b=!0){var w=g.value,x=r.getUniformLocation(t,w);this.localCalls.push(w.draw.bind(w,t,x))}}catch(t){m=!0,M=t}finally{try{!b&&_.return&&_.return()}finally{if(m)throw M}}var T=!0,E=!1,P=void 0;try{for(var O,k=this.textures[Symbol.iterator]();!(T=(O=k.next()).done);T=!0){var S=O.value,I=r.getTextureLocationIndex(t,S),A=n(I,2),C=A[0],R=A[1];this.localCalls.push(S.draw.bind(S,t,C,R))}}catch(t){E=!0,P=t}finally{try{!T&&k.return&&k.return()}finally{if(E)throw P}}var L=!0,D=!1,U=void 0;try{for(var j,V=e[Symbol.iterator]();!(L=(j=V.next()).done);L=!0){var X=j.value,z=r.getUniformLocation(t,X);this.globalCalls.push(X.draw.bind(X,t,z))}}catch(t){D=!0,U=t}finally{try{!L&&V.return&&V.return()}finally{if(D)throw U}}}},{key:"_initData",value:function(t){var e=(this.program,!0),r=!0,i=!1,n=void 0;try{for(var a,o=this.geom.attributes[Symbol.iterator]();!(r=(a=o.next()).done);r=!0){var s=a.value;s.isInitialized()||s.init(t)||(e=!1)}}catch(t){i=!0,n=t}finally{try{!r&&o.return&&o.return()}finally{if(i)throw n}}var u=!0,h=!1,l=void 0;try{for(var f,c=this.geom.buffers[Symbol.iterator]();!(u=(f=c.next()).done);u=!0){var v=f.value;v.isInitialized()||v.init(t)||(e=!1)}}catch(t){h=!0,l=t}finally{try{!u&&c.return&&c.return()}finally{if(h)throw l}}var d=!0,y=!1,p=void 0;try{for(var b,m=this.textures[Symbol.iterator]();!(d=(b=m.next()).done);d=!0){var M=b.value;M.isInitialized()||M.init(t)||(e=!1)}}catch(t){y=!0,p=t}finally{try{!d&&m.return&&m.return()}finally{if(y)throw p}}return e}},{key:"init",value:function(t,e){var r=(this.program,!0);return this.program.isInitialized()||(this.program.init(t)?this.program.draw(t):r=!1),this._initData(t)||(r=!1),r&&this.localCalls.length<1&&this._setCalls(t,e),this._isInitialized=r,r}},{key:"draw",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e||this.program.draw(t);var r=!0,i=!1,n=void 0;try{for(var a,o=this.localCalls[Symbol.iterator]();!(r=(a=o.next()).done);r=!0){(0,a.value)()}}catch(t){i=!0,n=t}finally{try{!r&&o.return&&o.return()}finally{if(i)throw n}}if(!e){var s=!0,u=!1,h=void 0;try{for(var l,f=this.globalCalls[Symbol.iterator]();!(s=(l=f.next()).done);s=!0){(0,l.value)()}}catch(t){u=!0,h=t}finally{try{!s&&f.return&&f.return()}finally{if(u)throw h}}}this.geom.display(t)}}]),t}();e.default=o},function(t,e,r){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){var r=[],i=!0,n=!1,a=void 0;try{for(var o,s=t[Symbol.iterator]();!(i=(o=s.next()).done)&&(r.push(o.value),!e||r.length!==e);i=!0);}catch(t){n=!0,a=t}finally{try{!i&&s.return&&s.return()}finally{if(n)throw a}}return r}return function(e,r){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=function(){function t(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,r,i){return r&&t(e.prototype,r),i&&t(e,i),e}}(),o=function(){function t(e,r){i(this,t),this.canvas=e,this.init(e),this.meshs=[],this.cam=r,this.uniforms=[r],this.depthTest=!0}return a(t,[{key:"_addCamToMeshs",value:function(){var t=this.cam;this.uniforms.push(t)}},{key:"addMesh",value:function(t){this.meshs.push(t),t.isInitialized()||t.init(this.gl,this.uniforms)}},{key:"rmMesh",value:function(t){var e=this.meshs.indexOf(t);e>-1&&this.meshs.splice(e,1)}},{key:"resize",value:function(t,e){var r=this.gl;r.viewportWidth=t,r.viewportHeight=e}},{key:"init",value:function(t){var e=void 0;try{e=t.getContext("webgl")||t.getContext("experimental-webgl"),e.viewportWidth=t.width,e.viewportHeight=t.height}catch(t){console.error("Could not initialise WebGL:",t.message)}e||console.error("Could not initialise WebGL"),this.gl=e}},{key:"draw",value:function(){var t=this.gl;t.viewport(0,0,t.viewportWidth,t.viewportHeight),t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT),this.cam.updated&&this.cam.update(t.viewportWidth,t.viewportHeight);var e=null,r=!0,i=!1,n=void 0;try{for(var a,o=this.meshs[Symbol.iterator]();!(r=(a=o.next()).done);r=!0){var s=a.value;s.isInitialized()?(s.draw(t,s.program===e),e=s.program):(s.init(t,this.uniforms),e=null)}}catch(t){i=!0,n=t}finally{try{!r&&o.return&&o.return()}finally{if(i)throw n}}}},{key:"depthTest",set:function(t){var e=this.gl;t?e.enable(e.DEPTH_TEST):e.disable(e.DEPTH_TEST),this._depthTest=!!t},get:function(){return this._depthTest}},{key:"bgColor",set:function(t){var e=n(t,4),r=e[0],i=e[1],a=e[2],o=e[3],s=void 0===o?1:o;this.gl.clearColor(r,i,a,s),this._bgColor=[r,i,a,s]},get:function(){return this._bgColor}}]),t}();e.default=o},function(t,e,r){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,r,i){return r&&t(e.prototype,r),i&&t(e,i),e}}(),u=function t(e,r,i){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,r);if(void 0===n){var a=Object.getPrototypeOf(e);return null===a?void 0:t(a,r,i)}if("value"in n)return n.value;var o=n.get;if(void 0!==o)return o.call(i)},h=r(12),l=i(h),f=r(13),c=i(f),v=function(t){function e(t){n(this,e);var r=a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return r.srcs=[],r}return o(e,t),s(e,[{key:"addDDSURL",value:function(t,e){var r=this,i={size:e,src:t,img:null,isImage:!1,priority:1,isValid:function(){return!0},init:null};i.init=function(t){var e=(0,c.default)(i.img),n=e.images[0],a=new Uint8Array(i.img,n.offset,n.length),o=t.getExtension("WEBGL_compressed_texture_s3tc")||t.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");t.bindTexture(t.TEXTURE_2D,r.pointer),t.compressedTexImage2D(t.TEXTURE_2D,0,o.COMPRESSED_RGBA_S3TC_DXT5_EXT,e.shape[0],e.shape[1],0,a),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,!1),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR)},this.srcs.push(i)}},{key:"addURL",value:function(t){var e=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i={size:r,src:t,img:null,priority:0,isImage:!0,isValid:function(){return!0},init:null};i.init=function(t){t.bindTexture(t.TEXTURE_2D,e.pointer),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,!0),t.texImage2D(t.TEXTURE_2D,0,6408,e.format,t.UNSIGNED_BYTE,i.img),l.default.SETUP(t,i.img)},this.srcs.push(i)}},{key:"init",value:function(t,r){var i=u(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"init",this).call(this,t,r);this.pointer;return e.START_LOAD(t,this.srcs),i}}],[{key:"START_LOAD",value:function(t,r){if(r.length>0){r.sort(function(t,e){return t.size===e.size?t.size-e.size:t.priority-e.priority});r.filter(function(e){return e.size>=l.default.MAX_SIZE&&e.isValid(t)});if(r.length>1){var i=r[0],n=r[r.length-1];e.LOAD(i,function(){i.init(t),e.LOAD(n,function(){n.init(t)})})}else if(r.length>0){var a=r[0];e.LOAD(a,function(){a.init(t)})}else console.warn("The GPU can'nt load a texture with size > ",l.default.MAX_SIZE)}else console.warn("URL of your texture",this.label,"not found: texture.addURL(URL, size = 0)")}},{key:"LOAD",value:function(t,e){if(t.isImage){var r=new Image;r.onload=function(){e(t)},t.img=r,r.src=t.src}else{var i=new XMLHttpRequest;i.responseType="arraybuffer",i.open("GET",t.src,!0),i.onreadystatechange=function(r){i.readyState===XMLHttpRequest.DONE&&(200===i.status?(t.img=i.response,e(t)):console.error("fail to load image ",t.src,"status:",i.status,"statuc text:",i.statusText))},i.send()}}}]),e}(l.default);e.default=v},function(t,e,r){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=r(3),u=i(s),h=r(0),l=i(h),f=function(t){function e(t){return n(this,e),a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,35676,(new u.default).identity()))}return o(e,t),e}(l.default);e.default=f},function(t,e,r){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function n(){S.matrix.rotate(.005,[0,1,0]),A.matrix.rotate(-.005,[0,1,0]),F.matrix.rotate(.01,[0,1,0]),H.matrix.rotate(-.01,[0,1,0]),x.draw(),requestAnimationFrame(n)}var a=r(0),o=(i(a),r(10)),s=i(o),u=r(1),h=(i(u),r(5)),l=i(h),f=r(4),c=i(f),v=r(9),d=i(v),y=r(7),p=i(y),b=r(6),m=i(b),M=r(8),g=i(M),_=document.body.querySelector("canvas"),w=new m.default("uPMatrix"),x=new g.default(_,w);x.bgColor=[0,0,.1,1],x.depthTest=!0;var T=new l.default,E=new l.default("\n    attribute vec3 aVertexPosition;\n    attribute vec4 aVertexColor;\n\n    uniform mat4 uMVMatrix;\n    uniform mat4 uPMatrix;\n\n    varying vec4 vColor;\n\n    void main(void) {\n        gl_Position = uPMatrix * uMVMatrix * vec4(aVertexPosition, 1.0);\n        float zDepth = 0.2 * (8.0 - gl_Position.z);\n        vec4 modifyColor = vec4(aVertexColor.rgb * zDepth, aVertexColor.a);\n        vColor = modifyColor;\n    }\n"),P=[0,1,0,-1,-1,1,1,-1,1,0,1,0,1,-1,1,1,-1,-1,0,1,0,1,-1,-1,-1,-1,-1,0,1,0,-1,-1,-1,-1,-1,1],O=[1,0,0,1,0,1,0,1,0,0,1,1,1,0,0,1,0,0,1,1,0,1,0,1,1,0,0,1,0,1,0,1,0,0,1,1,1,0,0,1,0,0,1,1,0,1,0,1],k=new c.default;k.addVertices("aVertexPosition",P,3),k.addVertices("aVertexColor",O,4);var S=new p.default(k,T),I=new s.default("uMVMatrix");S.addUniform(I),S.matrix=I.data,S.matrix.translate([-1.5,-1.5,-8]),x.addMesh(S);var A=new p.default(k,T),C=new s.default("uMVMatrix");A.addUniform(C),A.matrix=C.data,A.matrix.translate([-1.5,1.5,-8]),A.matrix.scale([1,-1,1]),x.addMesh(A);var R=[-1,-1,1,1,-1,1,1,1,1,-1,1,1,-1,-1,-1,-1,1,-1,1,1,-1,1,-1,-1,-1,1,-1,-1,1,1,1,1,1,1,1,-1,-1,-1,-1,1,-1,-1,1,-1,1,-1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,-1,1,-1,-1,-1,-1,-1,1,-1,1,1,-1,1,-1],L=[0,1,2,0,2,3,4,5,6,4,6,7,8,9,10,8,10,11,12,13,14,12,14,15,16,17,18,16,18,19,20,21,22,20,22,23],D=[[1,0,0,1],[1,1,0,1],[0,1,0,1],[1,.5,.5,1],[1,0,1,1],[0,0,1,1]],U=[];for(var j in D)for(var V=D[j],X=0;X<4;X++)U=U.concat(V);var z=new c.default;z.addVertices("aVertexPosition",R,3),z.addVertices("aVertexColor",U,4),z.addIndices(L);var F=new p.default(z,E),N=new s.default("uMVMatrix");F.addUniform(N),F.matrix=N.data,F.matrix.translate([1.5,-1.5,-8]),x.addMesh(F);var G=new l.default("   \n    attribute vec3 aVertexPosition;\n    attribute vec2 aTextureCoord;\n\n    uniform mat4 uMVMatrix;\n    uniform mat4 uPMatrix;\n\n    varying vec2 vTextureCoord;\n\n    void main(void) {\n        gl_Position = uPMatrix * uMVMatrix * vec4(aVertexPosition, 1.0);\n        vTextureCoord = aTextureCoord;\n    }","\n    precision mediump float;\n\n    varying vec2 vTextureCoord;\n\n    uniform sampler2D uSampler;\n\n    void main(void) {\n        gl_FragColor = texture2D(uSampler, vec2(vTextureCoord.s, vTextureCoord.t));\n    }"),B=[0,0,1,0,1,1,0,1,1,0,1,1,0,1,0,0,0,1,0,0,1,0,1,1,1,1,0,1,0,0,1,0,1,0,1,1,0,1,0,0,0,0,1,0,1,1,0,1],W=new d.default("uSampler");W.addURL("cube-diffuse.jpg");var q=new c.default;q.addVertices("aVertexPosition",R,3),q.addVertices("aTextureCoord",B,2),q.addIndices(L);var H=new p.default(q,G),Z=new s.default("uMVMatrix");H.addUniform(Z),H.matrix=Z.data,H.addTexture(W),H.matrix.translate([1.5,1.5,-8]),x.addMesh(H),n()},function(t,e,r){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,r,i){return r&&t(e.prototype,r),i&&t(e,i),e}}(),a=function(){function t(e){i(this,t),this.label=e,this.color=[255,255,255,255],this.pointer=null,this.parameters={9729:9987},this.setFormat()}return n(t,[{key:"setFormat",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:6408;this.format=t}},{key:"setParameters",value:function(t,e,r){}},{key:"isInitialized",value:function(){return!!this.pointer}},{key:"init",value:function(e){var r=e.createTexture();return t._DATA_INITIALIZED||t.SET_DATA(e),e.bindTexture(e.TEXTURE_2D,r),e.texImage2D(e.TEXTURE_2D,0,e.RGB,1,1,0,e.RGB,e.UNSIGNED_BYTE,new Uint8Array(this.color)),this.pointer=r,!0}},{key:"draw",value:function(t,e,r){t.uniform1i(e,r),t.activeTexture(t.TEXTURE0+r),t.bindTexture(t.TEXTURE_2D,this.pointer)}}],[{key:"IS_POWER_OF_2",value:function(t){return 0==(t&t-1)}},{key:"SET_DATA",value:function(e){t.MAX_SIZE=e.getParameter(e.MAX_TEXTURE_SIZE),t.FORMAT={};for(var r=e.getParameter(e.COMPRESSED_TEXTURE_FORMATS),i=0;i<r.length;i++)t.FORMAT[r[i]]=!0,console.log(r[i]);t._DATA_INITIALIZED=!0}},{key:"SETUP",value:function(e,r){t.IS_POWER_OF_2(r.width)&&t.IS_POWER_OF_2(r.height)?(e.generateMipmap(e.TEXTURE_2D),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR_MIPMAP_LINEAR)):(e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR))}}]),t}();e.default=a},function(t,e){function r(t){var e=new Int32Array(t,0,p);if(e[b]!==a)throw new Error("Invalid magic number in DDS header");if(!e[x]&s)throw new Error("Unsupported format, must contain a FourCC code");var r,i,P=e[T];switch(P){case u:r=8,i="dxt1";break;case h:r=16,i="dxt3";break;case l:r=16,i="dxt5";break;case c:i="rgba32f";break;case f:var O=new Uint32Array(t.slice(128,148));i=O[0];var k=O[1];O[2],O[3],O[4];if(k!==d||i!==y)throw new Error("Unsupported DX10 texture format "+i);i="rgba32f";break;default:throw new Error("Unsupported FourCC code: "+n(P))}var S=e[M],I=1;S&o&&(I=Math.max(1,e[w]));var A=!1;e[E]&v&&(A=!0);var C,R=e[_],L=e[g],D=e[m]+4,U=R,j=L,V=[];if(P===f&&(D+=20),A)for(var X=0;X<6;X++){if("rgba32f"!==i)throw new Error("Only RGBA32f cubemaps are supported");R=U,L=j;for(var z=Math.log(R)/Math.log(2)+1,F=0;F<z;F++)C=R*L*16,V.push({offset:D,length:C,shape:[R,L]}),F<I&&(D+=C),R=Math.floor(R/2),L=Math.floor(L/2)}else for(var F=0;F<I;F++)C=Math.max(4,R)/4*Math.max(4,L)/4*r,V.push({offset:D,length:C,shape:[R,L]}),D+=C,R=Math.floor(R/2),L=Math.floor(L/2);return{shape:[U,j],images:V,format:i,flags:S,cubemap:A}}function i(t){return t.charCodeAt(0)+(t.charCodeAt(1)<<8)+(t.charCodeAt(2)<<16)+(t.charCodeAt(3)<<24)}function n(t){return String.fromCharCode(255&t,t>>8&255,t>>16&255,t>>24&255)}var a=542327876,o=131072,s=4,u=i("DXT1"),h=i("DXT3"),l=i("DXT5"),f=i("DX10"),c=116,v=512,d=3,y=2,p=31,b=0,m=1,M=2,g=3,_=4,w=7,x=20,T=21,E=28;t.exports=r}]);