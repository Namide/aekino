var _Mathpow=Math.pow,_MathPI=Math.PI,_Mathtan=Math.tan,_Mathcos=Math.cos,_Mathsin=Math.sin,_Mathsqrt=Math.sqrt,_Mathmax=Math.max,_Mathabs=Math.abs;(function(n){function d(u){if(o[u])return o[u].exports;var l=o[u]={i:u,l:!1,exports:{}};return n[u].call(l.exports,l,l.exports,d),l.l=!0,l.exports}var o={};return d.m=n,d.c=o,d.i=function(u){return u},d.d=function(u,l,m){d.o(u,l)||Object.defineProperty(u,l,{configurable:!1,enumerable:!0,get:m})},d.n=function(u){var l=u&&u.__esModule?function(){return u['default']}:function(){return u};return d.d(l,'a',l),l},d.o=function(u,l){return Object.prototype.hasOwnProperty.call(u,l)},d.p='',d(d.s=32)})([function(n,d){'use strict';class u{constructor(l,m,h,T=!1){this.label=l,this.type=m,this._data=h,this._init(m,T),this.updated=!0}get data(){return this._data}set data(l){this._data=l,this.updated=!0}_init(l){switch(this.type){case 35675:{this.bind=(h,T)=>{h.uniformMatrix3fv(T,!1,this.data)};break}case 35676:{this.bind=(h,T)=>{h.uniformMatrix4fv(T,!1,this.data)};break}case 35664:{this.bind=(h,T)=>{h.uniform2f(T,...this.data)};break}case 35665:{this.bind=(h,T)=>{h.uniform3f(T,...this.data)};break}case 5124:this.bind=(h,T)=>{h.uniform1i(T,this.data)};break;case-1:this.bind=(h,T)=>{h.uniform1fv(T,this.data)};break;default:console.error('Uniform type unknow: {label:',this.label,', type:',l,'}');}}}d.a=u},function(n,d){'use strict';class u{constructor(){this.lastTexture=null,this.lastProgram=null,this.lastDepthTest=!1}optimizeTexture(l){const m=this.lastTexture;return this.lastTexture=l,l===m}optimizeProgram(l){const m=this.lastProgram;return this.lastProgram=l,l===m}optimizeDepthTest(l){const m=this.lastDepthTest;return this.lastDepthTest=l,m===l}static getInstance(l){const m=u.glList.indexOf(l);if(0>m){const h=new u;return u.glList.push(l),u.list.push(h),h}return u.list[m]}}u.glList=[],u.list=[],d.a=u},function(n,d){'use strict';let u=0;d.a=class{constructor(m,h){this.vertexShaderSrc=m,this.fragmentShaderSrc=h,this.attribLocation={},this.uniformLocation={},this.textureLocation={},this.textureIndex={},this.textureNum=0,this.id=u++}isInitialized(){return!!this.pointer}init(m){this.vertexShader=this._createShader(m,35633,this.vertexShaderSrc),this.fragmentShader=this._createShader(m,35632,this.fragmentShaderSrc);const h=m.createProgram();return(m.attachShader(h,this.vertexShader),m.attachShader(h,this.fragmentShader),m.linkProgram(h),!m.getProgramParameter(h,m.LINK_STATUS))?(console.error('Shader initialization error'),!1):(m.useProgram(h),this.pointer=h,!0)}getAttribLocation(m,h){const T=h.label;if(!this.attribLocation.hasOwnProperty(T)){const E=m.getAttribLocation(this.pointer,T);return m.enableVertexAttribArray(E),this.attribLocation[T]=E,E}return this.attribLocation[T]}getUniformLocation(m,h){const T=h.label;if(!this.uniformLocation.hasOwnProperty(T)){const E=m.getUniformLocation(this.pointer,T);return this.uniformLocation[T]=E,E}return this.uniformLocation[T]}getTextureLocationIndex(m,h){const T=h.label;if(!this.textureLocation.hasOwnProperty(T)||!this.textureIndex.hasOwnProperty(T)){const E=m.getUniformLocation(this.pointer,T);return this.textureLocation[T]=E,this.textureIndex[T]=this.textureNum,[E,this.textureNum++]}return[this.textureLocation[T],this.textureIndex[T]]}bind(m){m.useProgram(this.pointer)}_createShader(m,h,T){const E=m.createShader(h);return m.shaderSource(E,T),m.compileShader(E),m.getShaderParameter(E,m.COMPILE_STATUS)?E:console.error('Une erreur est survenue au cours de la compilation du shader: '+m.getShaderInfoLog(E))}}},function(n,d,o){'use strict';var u=o(7),l=o(11);class m{constructor(){this.attributes=[],this.buffers=[],this.hasIndices=!1,this.numItems=0}addVertices(h,T,E){const _=new l.a(h);_.setArray(new Float32Array(T),34962),_.setItems(5126,E),this.attributes.push(_),1>this.numItems&&(this.numItems=T.length/E)}addIndices(h){const T=new u.a;T.setArray(new Uint16Array(h),34963),T.setItems(5125,1),this.hasIndices=!0,this.buffers.push(T),this.numItems=h.length}display(h){this.hasIndices?h.drawElements(h.TRIANGLES,this.numItems,h.UNSIGNED_SHORT,0):h.drawArrays(h.TRIANGLES,0,this.numItems)}clone(h=new m){return h.attributes=this.attributes.map((T)=>T.clone()),h.buffers=this.buffers.map((T)=>T.clone()),h.hasIndices=this.hasIndices,h.numItems=this.numItems,h}}d.a=m},function(n,d,o){'use strict';var u=o(6),l=o(12);class m extends u.a{constructor(h,T){super(h,T),this.depthTest=!0;const E=new l.a('uMVMatrix');this.transform=E,this.addUniform(E)}get position(){return this.transform.getTranslation()}get rotation(){return this.transform.getRotation()}draw(h,T=[]){this.transform&&this.transform.update(),super.draw(h,T)}}d.a=m},function(n,d){'use strict';function u(h,T,E,_,I,R,D,P,A,F,L,U,N,B,M,C,O){return h[0]=T,h[1]=E,h[2]=_,h[3]=I,h[4]=R,h[5]=D,h[6]=P,h[7]=A,h[8]=F,h[9]=L,h[10]=U,h[11]=N,h[12]=B,h[13]=M,h[14]=C,h[15]=O,h}const l=1e-6;class m{constructor(){console.warn('Matrix4 is a static class')}static create(){const h=new Float32Array(16);return h[0]=1,h[5]=1,h[10]=1,h[15]=1,h}static clone(h){return m.copy(h)}static copy(h,T=new Float32Array(16)){return T.set(h),T}static identity(h){return u(h,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)}static add(h,T){return h[0]+=T[0],h[1]+=T[1],h[2]+=T[2],h[3]+=T[3],h[4]+=T[4],h[5]+=T[5],h[6]+=T[6],h[7]+=T[7],h[8]+=T[8],h[9]+=T[9],h[10]+=T[10],h[11]+=T[11],h[12]+=T[12],h[13]+=T[13],h[14]+=T[14],h[15]+=T[15],h}static subtract(h,T){return h[0]-=T[0],h[1]-=T[1],h[2]-=T[2],h[3]-=T[3],h[4]-=T[4],h[5]-=T[5],h[6]-=T[6],h[7]-=T[7],h[8]-=T[8],h[9]-=T[9],h[10]-=T[10],h[11]-=T[11],h[12]-=T[12],h[13]-=T[13],h[14]-=T[14],h[15]-=T[15],h}static multiplyScalar(h){return m1[0]*=h,m1[1]*=h,m1[2]*=h,m1[3]*=h,m1[4]*=h,m1[5]*=h,m1[6]*=h,m1[7]*=h,m1[8]*=h,m1[9]*=h,m1[10]*=h,m1[11]*=h,m1[12]*=h,m1[13]*=h,m1[14]*=h,m1[15]*=h,m1}static multiplyScalarAndAdd(h,T,E){return h[0]+=T[0]*E,h[1]+=T[1]*E,h[2]+=T[2]*E,h[3]+=T[3]*E,h[4]+=T[4]*E,h[5]+=T[5]*E,h[6]+=T[6]*E,h[7]+=T[7]*E,h[8]+=T[8]*E,h[9]+=T[9]*E,h[10]+=T[10]*E,h[11]+=T[11]*E,h[12]+=T[12]*E,h[13]+=T[13]*E,h[14]+=T[14]*E,h[15]+=T[15]*E,h}static exactEquals(h,T){return h[0]===T[0]&&h[1]===T[1]&&h[2]===T[2]&&h[3]===T[3]&&h[4]===T[4]&&h[5]===T[5]&&h[6]===T[6]&&h[7]===T[7]&&h[8]===T[8]&&h[9]===T[9]&&h[10]===T[10]&&h[11]===T[11]&&h[12]===T[12]&&h[13]===T[13]&&h[14]===T[14]&&h[15]===T[15]}static equals(h,T){const[E,_,I,R,D,P,A,F,L,U,N,B,M,C,O,v]=h,[X,H,G,W,Z,q,k,Y,V,j,K,Q,$,J,ee,te]=T;return _Mathabs(E-X)<=l*_Mathmax(1,_Mathabs(E),_Mathabs(X))&&_Mathabs(_-H)<=l*_Mathmax(1,_Mathabs(_),_Mathabs(H))&&_Mathabs(I-G)<=l*_Mathmax(1,_Mathabs(I),_Mathabs(G))&&_Mathabs(R-W)<=l*_Mathmax(1,_Mathabs(R),_Mathabs(W))&&_Mathabs(D-Z)<=l*_Mathmax(1,_Mathabs(D),_Mathabs(Z))&&_Mathabs(P-q)<=l*_Mathmax(1,_Mathabs(P),_Mathabs(q))&&_Mathabs(A-k)<=l*_Mathmax(1,_Mathabs(A),_Mathabs(k))&&_Mathabs(F-Y)<=l*_Mathmax(1,_Mathabs(F),_Mathabs(Y))&&_Mathabs(L-V)<=l*_Mathmax(1,_Mathabs(L),_Mathabs(V))&&_Mathabs(U-j)<=l*_Mathmax(1,_Mathabs(U),_Mathabs(j))&&_Mathabs(N-K)<=l*_Mathmax(1,_Mathabs(N),_Mathabs(K))&&_Mathabs(B-Q)<=l*_Mathmax(1,_Mathabs(B),_Mathabs(Q))&&_Mathabs(M-$)<=l*_Mathmax(1,_Mathabs(M),_Mathabs($))&&_Mathabs(C-J)<=l*_Mathmax(1,_Mathabs(C),_Mathabs(J))&&_Mathabs(O-ee)<=l*_Mathmax(1,_Mathabs(O),_Mathabs(ee))&&_Mathabs(v-te)<=l*_Mathmax(1,_Mathabs(v),_Mathabs(te))}static transpose(h,T){if(T===h){const E=T[1],_=T[2],I=T[3],R=T[6],D=T[7],P=T[11];h[1]=T[4],h[2]=T[8],h[3]=T[12],h[4]=E,h[6]=T[9],h[7]=T[13],h[8]=_,h[9]=R,h[11]=T[14],h[12]=I,h[13]=D,h[14]=P}else u(h,T[0],T[4],T[8],T[12],T[1],T[5],T[9],T[13],T[2],T[6],T[10],T[14],T[3],T[7],T[11],T[15]);return h}static invert(h){const[T,E,_,I,R,D,P,A,F,L,U,N,B,M,C,O]=h,v=T*D-E*R,X=T*P-_*R,H=T*A-I*R,G=E*P-_*D,W=E*A-I*D,Z=_*A-I*P,q=F*M-L*B,k=F*C-U*B,Y=F*O-N*B,V=L*C-U*M,j=L*O-N*M,K=U*O-N*C;let Q=v*K-X*j+H*V+G*Y-W*k+Z*q;return Q?(Q=1/Q,u(h,(D*K-P*j+A*V)*Q,(_*j-E*K-I*V)*Q,(M*Z-C*W+O*G)*Q,(U*W-L*Z-N*G)*Q,(P*Y-R*K-A*k)*Q,(T*K-_*Y+I*k)*Q,(C*H-B*Z-O*X)*Q,(F*Z-U*H+N*X)*Q,(R*j-D*Y+A*q)*Q,(E*Y-T*j-I*q)*Q,(B*W-M*H+O*v)*Q,(L*H-F*W-N*v)*Q,(D*k-R*V-P*q)*Q,(T*V-E*k+_*q)*Q,(M*X-B*G-C*v)*Q,(F*G-L*X+U*v)*Q)):h}static adjoint(h){const[T,E,_,I,R,D,P,A,F,L,U,N,B,M,C,O]=h;return u(h,D*(U*O-N*C)-L*(P*O-A*C)+M*(P*N-A*U),-(E*(U*O-N*C)-L*(_*O-I*C)+M*(_*N-I*U)),E*(P*O-A*C)-D*(_*O-I*C)+M*(_*A-I*P),-(E*(P*N-A*U)-D*(_*N-I*U)+L*(_*A-I*P)),-(R*(U*O-N*C)-F*(P*O-A*C)+B*(P*N-A*U)),T*(U*O-N*C)-F*(_*O-I*C)+B*(_*N-I*U),-(T*(P*O-A*C)-R*(_*O-I*C)+B*(_*A-I*P)),T*(P*N-A*U)-R*(_*N-I*U)+F*(_*A-I*P),R*(L*O-N*M)-F*(D*O-A*M)+B*(D*N-A*L),-(T*(L*O-N*M)-F*(E*O-I*M)+B*(E*N-I*L)),T*(D*O-A*M)-R*(E*O-I*M)+B*(E*A-I*D),-(T*(D*N-A*L)-R*(E*N-I*L)+F*(E*A-I*D)),-(R*(L*C-U*M)-F*(D*C-P*M)+B*(D*U-P*L)),T*(L*C-U*M)-F*(E*C-_*M)+B*(E*U-_*L),-(T*(D*C-P*M)-R*(E*C-_*M)+B*(E*P-_*D)),T*(D*U-P*L)-R*(E*U-_*L)+F*(E*P-_*D))}static determinant(h){const[T,E,_,I,R,D,P,A,F,L,U,N,B,M,C,O]=h;return(T*D-E*R)*(U*O-N*C)-(T*P-_*R)*(L*O-N*M)+(T*A-I*R)*(L*C-U*M)+(E*P-_*D)*(F*O-N*B)-(E*A-I*D)*(F*C-U*B)+(_*A-I*P)*(F*M-L*B)}static multiply(h,T){const[E,_,I,R,D,P,A,F,L,U,N,B,M,C,O,v]=h;let[X,H,G,W]=T;return h[0]=X*E+H*D+G*L+W*M,h[1]=X*_+H*P+G*U+W*C,h[2]=X*I+H*A+G*N+W*O,h[3]=X*R+H*F+G*B+W*v,X=T[4],H=T[5],G=T[6],W=T[7],h[4]=X*E+H*D+G*L+W*M,h[5]=X*_+H*P+G*U+W*C,h[6]=X*I+H*A+G*N+W*O,h[7]=X*R+H*F+G*B+W*v,X=T[8],H=T[9],G=T[10],W=T[11],h[8]=X*E+H*D+G*L+W*M,h[9]=X*_+H*P+G*U+W*C,h[10]=X*I+H*A+G*N+W*O,h[11]=X*R+H*F+G*B+W*v,X=T[12],H=T[13],G=T[14],W=T[15],h[12]=X*E+H*D+G*L+W*M,h[13]=X*_+H*P+G*U+W*C,h[14]=X*I+H*A+G*N+W*O,h[15]=X*R+H*F+G*B+W*v,h}static translate(h,[T,E,_]){return h[12]=h[0]*T+h[4]*E+h[8]*_+h[12],h[13]=h[1]*T+h[5]*E+h[9]*_+h[13],h[14]=h[2]*T+h[6]*E+h[10]*_+h[14],h[15]=h[3]*T+h[7]*E+h[11]*_+h[15],h}static scale(h,[T,E,_]){return h[0]*=T,h[1]*=T,h[2]*=T,h[3]*=T,h[4]*=E,h[5]*=E,h[6]*=E,h[7]*=E,h[8]*=_,h[9]*=_,h[10]*=_,h[11]*=_,h}static rotate(h,T,[E,_,I]){let R=_Mathsqrt(E*E+_*_+I*I);if(_Mathabs(R)>l){R=1/R,E*=R,_*=R,I*=R;const D=_Mathsin(T),P=_Mathcos(T),A=1-P,[F,L,U,N,B,M,C,O,v,X,H,G]=h,W=E*E*A+P,Z=_*E*A+I*D,q=I*E*A-_*D,k=E*_*A-I*D,Y=_*_*A+P,V=I*_*A+E*D,j=E*I*A+_*D,K=_*I*A-E*D,Q=I*I*A+P;h[0]=F*W+B*Z+v*q,h[1]=L*W+M*Z+X*q,h[2]=U*W+C*Z+H*q,h[3]=N*W+O*Z+G*q,h[4]=F*k+B*Y+v*V,h[5]=L*k+M*Y+X*V,h[6]=U*k+C*Y+H*V,h[7]=N*k+O*Y+G*V,h[8]=F*j+B*K+v*Q,h[9]=L*j+M*K+X*Q,h[10]=U*j+C*K+H*Q,h[11]=N*j+O*K+G*Q}return h}static rotateX(h,T){const E=_Mathsin(T),_=_Mathcos(T),I=h[4],R=h[5],D=h[6],P=h[7],A=h[8],F=h[9],L=h[10],U=h[11];return h[4]=I*_+A*E,h[5]=R*_+F*E,h[6]=D*_+L*E,h[7]=P*_+U*E,h[8]=A*_-I*E,h[9]=F*_-R*E,h[10]=L*_-D*E,h[11]=U*_-P*E,h}static rotateY(h,T){const E=_Mathsin(T),_=_Mathcos(T),[I,R,D,P]=h,A=h[8],F=h[9],L=h[10],U=h[11];return h[0]=I*_-A*E,h[1]=R*_-F*E,h[2]=D*_-L*E,h[3]=P*_-U*E,h[8]=I*E+A*_,h[9]=R*E+F*_,h[10]=D*E+L*_,h[11]=P*E+U*_,h}static rotateZ(h,T){const E=_Mathsin(T),_=_Mathcos(T),[I,R,D,P,A,F,L,U]=h;return h[0]=I*_+A*E,h[1]=R*_+F*E,h[2]=D*_+L*E,h[3]=P*_+U*E,h[4]=A*_-I*E,h[5]=F*_-R*E,h[6]=L*_-D*E,h[7]=U*_-P*E,h}static fromTranslation([h,T,E],_=new Float32Array(16)){return u(_,1,0,0,0,0,1,0,0,0,0,1,0,h,T,E,1)}static fromScaling([h,T,E],_=new Float32Array(16)){return u(_,h,0,0,0,0,T,0,0,0,0,E,0,0,0,0,1)}static fromRotation(h,[T,E,_],I=new Float32Array(16)){let R=_Mathsqrt(T*T+E*E+_*_);if(_Mathabs(R)>l){R=1/R,T*=R,E*=R,_*=R;const D=_Mathsin(h),P=_Mathcos(h),A=1-P;u(I,T*T*A+P,E*T*A+_*D,_*T*A-E*D,0,T*E*A-_*D,E*E*A+P,_*E*A+T*D,0,T*_*A+E*D,E*_*A-T*D,_*_*A+P,0,0,0,0,1)}return I}static fromXRotation(h,T=new Float32Array(16)){const E=_Mathsin(h),_=_Mathcos(h);return u(T,1,0,0,0,0,_,E,0,0,-E,_,0,0,0,0,1)}static fromYRotation(h,T=new Float32Array(16)){const E=_Mathsin(h),_=_Mathcos(h);return u(T,_,0,-E,0,0,1,0,0,E,0,_,0,0,0,0,1)}static fromZRotation(h,T=new Float32Array(16)){const E=_Mathsin(h),_=_Mathcos(h);return u(T,_,E,0,0,-E,_,0,0,0,0,1,0,0,0,0,1)}static fromQuat([h,T,E,_],I=new Float32Array(16)){const R=h+h,D=T+T,P=E+E,A=h*R,F=T*R,L=T*D,U=E*R,N=E*D,B=E*P,M=_*R,C=_*D,O=_*P;return u(I,1-L-B,F+O,U-C,0,F-O,1-A-B,N+M,0,U+C,N-M,1-A-L,0,0,0,0,1)}static fromQuatTranslation([h,T,E,_],[I,R,D],P=new Float32Array(16)){const A=h+h,F=T+T,L=E+E,U=h*A,N=h*F,B=h*L,M=T*F,C=T*L,O=E*L,v=_*A,X=_*F,H=_*L;return u(P,1-(M+O),N+H,B-X,0,N-H,1-(U+O),C+v,0,B+X,C-v,1-(U+M),0,I,R,D,1)}static fromQuatTranslationScale([h,T,E,_],[I,R,D],[P,A,F],L=new Float32Array(16)){const U=h+h,N=T+T,B=E+E,M=h*U,C=h*N,O=h*B,v=T*N,X=T*B,H=E*B,G=_*U,W=_*N,Z=_*B;return u(L,(1-(v+H))*P,(C+Z)*P,(O-W)*P,0,(C-Z)*A,(1-(M+H))*A,(X+G)*A,0,(O+W)*F,(X-G)*F,(1-(M+v))*F,0,I,R,D,1)}static fromQuatTranslationScaleOrigin([h,T,E,_],[I,R,D],[P,A,F],[L,U,N],B=new Float32Array(16)){const M=h+h,C=T+T,O=E+E,v=h*M,X=h*C,H=h*O,G=T*C,W=T*O,Z=E*O,q=_*M,k=_*C,Y=_*O;return u(B,(1-(G+Z))*P,(X+Y)*P,(H-k)*P,0,(X-Y)*A,(1-(v+Z))*A,(W+q)*A,0,(H+k)*F,(W-q)*F,(1-(v+G))*F,0,I+L-(B[0]*L+B[4]*U+B[8]*N),R+U-(B[1]*L+B[5]*U+B[9]*N),D+N-(B[2]*L+B[6]*U+B[10]*N),1),B}static getTranslation(h,T=new Float32Array(3)){return T[0]=h[12],T[1]=h[13],T[2]=h[14],T}static getQuat(h,T=new Float32Array(4)){var E=h[0]+h[5]+h[10];if(0<E){const _=2*_Mathsqrt(E+1);T[0]=(h[6]-h[9])/_,T[1]=(h[8]-h[2])/_,T[2]=(h[1]-h[4])/_,T[3]=0.25*_}else if(h[0]>h[5]&h[0]>h[10]){const _=2*_Mathsqrt(1+h[0]-h[5]-h[10]);T[0]=0.25*_,T[1]=(h[1]+h[4])/_,T[2]=(h[8]+h[2])/_,T[3]=(h[6]-h[9])/_}else if(h[5]>h[10]){const _=_Mathsqrt(1+h[5]-h[0]-h[10]);T[0]=2*((h[1]+h[4])/_),T[1]=0.25*_,T[2]=(h[6]+h[9])/_,T[3]=(h[8]-h[2])/_}else{const _=2*_Mathsqrt(1+h[10]-h[0]-h[5]);T[0]=(h[8]+h[2])/_,T[1]=(h[6]+h[9])/_,T[2]=0.25*_,T[3]=(h[1]-h[4])/_}return T}static frustrum(h,T,E,_,I,R,D){const P=1/(E-T),A=1/(I-_),F=1/(R-D);return u(h,2*R*P,0,0,0,0,2*R*A,0,0,(E+T)*P,(I+_)*A,(D+R)*F,-1,0,0,2*(D*R)*F,0)}static perspective(h,T,E,_,I){const R=1/_Mathtan(T/2),D=1/(_-I);return u(h,R/E,0,0,0,0,R,0,0,0,0,(I+_)*D,-1,0,0,2*I*_*D,0)}static perspectiveFromFieldOfView(h,T,E,_){const I=_Mathtan(T.upDegrees*_MathPI/180),R=_Mathtan(T.downDegrees*_MathPI/180),D=_Mathtan(T.leftDegrees*_MathPI/180),P=_Mathtan(T.rightDegrees*_MathPI/180),A=2/(D+P),F=2/(I+R);return u(h,A,0,0,0,0,F,0,0,0.5*(-(D-P)*A),0.5*((I-R)*F),_/(E-_),-1,0,0,_*E/(E-_),0)}static ortho(h,T,E,_,I,R,D){const P=1/(T-E),A=1/(_-I),F=1/(R-D);return u(h,-2*P,0,0,0,0,-2*A,0,0,0,0,2*F,0,(T+E)*P,(I+_)*A,(D+R)*F,1)}static lookAt(h,T,E,_){const[I,R,D]=T,[P,A,F]=_,[L,U,N]=E;if(_Mathabs(I-L)<l&&_Mathabs(R-U)<l&&_Mathabs(D-N)<l)return m.identity(h);let B=I-L,M=R-U,C=D-N,O=1/_Mathsqrt(B*B+M*M+C*C);B*=O,M*=O,C*=O;let v=A*C-F*M,X=F*B-P*C,H=P*M-A*B;O=_Mathsqrt(v*v+X*X+H*H),O?(O=1/O,v*=O,X*=O,H*=O):(v=0,X=0,H=0);let G=M*H-C*X,W=C*v-B*H,Z=B*X-M*v;return O=_Mathsqrt(G*G+W*W+Z*Z),O?(O=1/O,G*=O,W*=O,Z*=O):(G=0,W=0,Z=0),u(h,v,G,B,0,X,W,M,0,H,Z,C,0,-(v*I+X*R+H*D),-(G*I+W*R+Z*D),-(B*I+M*R+C*D),1)}static frob(h){return _Mathsqrt(_Mathpow(h[0],2)+_Mathpow(h[1],2)+_Mathpow(h[2],2)+_Mathpow(h[3],2)+_Mathpow(h[4],2)+_Mathpow(h[5],2)+_Mathpow(h[6],2)+_Mathpow(h[7],2)+_Mathpow(h[8],2)+_Mathpow(h[9],2)+_Mathpow(h[10],2)+_Mathpow(h[11],2)+_Mathpow(h[12],2)+_Mathpow(h[13],2)+_Mathpow(h[14],2)+_Mathpow(h[15],2))}}d.a=m},function(n,d,o){'use strict';var u=o(1);d.a=class{constructor(m,h){this.geom=m,this.program=h,this.uniforms=[],this.globalUniforms=[],this.textures=[],this.localCalls=[],this.globalCalls=[],this.order=1,this.visible=!0,this.depthTest=!1,this.blending={},this._isInitialized=!1}addBlending(m,h){this.blending[m]=h}addUniform(m){this.uniforms.push(m)}removeUniform(m){const h=this.uniforms.indexOf(m);-1<h&&this.uniforms.splice(h,1)}addGlobalUniform(m){this.globalUniforms.push(m)}removeGlobalUniform(m){const h=this.globalUniforms.indexOf(m);-1<h&&this.globalUniforms.splice(h,1)}addTexture(m){this.textures.push(m)}removeTexture(m){const h=this.textures.indexOf(m);-1<h&&this.textures.splice(h,1)}isInitialized(){let m=this._isInitialized;if(m)return m;this.program.isInitialized()||(m=!1);for(const h of this.geom.attributes)h.isInitialized()||(m=!1);for(const h of this.geom.buffers)h.isInitialized()||(m=!1);for(const h of this.textures)h.isInitialized()||(m=!1);return m}_setCalls(m){const h=this.program;for(const T of this.geom.attributes){const E=h.getAttribLocation(m,T);this.localCalls.push(T.bind.bind(T,m,E))}for(const T of this.geom.buffers)this.localCalls.push(T.bind.bind(T,m));for(const T of this.uniforms){const E=h.getUniformLocation(m,T);this.localCalls.push(T.bind.bind(T,m,E))}for(const T of this.textures){const[E,_]=h.getTextureLocationIndex(m,T);this.localCalls.push(T.bind.bind(T,m,E,_))}for(const T of this.globalUniforms){const E=h.getUniformLocation(m,T);this.globalCalls.push((_=!0)=>{(_||T.updated)&&(T.bind.call(T,m,E),T.updated=!1)})}}_initData(m){this.program;let T=!0;for(const E of this.geom.attributes)E.isInitialized()||E.init(m)||(T=!1);for(const E of this.geom.buffers)E.isInitialized()||E.init(m)||(T=!1);for(const E of this.textures)E.isInitialized()||E.init(m)||(T=!1);return T}dispose(){this._isInitialized=!1,this.localCalls.length=0}init(m){this.program;let T=!0;return this.program.isInitialized()?this.program.bind(m):!this.program.init(m)&&(T=!1),this._initData(m)||(T=!1),T&&1>this.localCalls.length&&this._setCalls(m),this._callOptimizer=u.a.getInstance(m),this._isInitialized=T,T}draw(m,h=[]){this._callOptimizer.optimizeDepthTest(this.depthTest)||(this.depthTest?m.enable(m.DEPTH_TEST):m.disable(m.DEPTH_TEST));const T=this.program;if(!this._callOptimizer.optimizeProgram(T)){this.program.bind(m);for(const _ of this.globalCalls)_(!0)}else for(const _ of this.globalCalls)_(!1);const E=Object.keys(this.blending);for(const _ of E)m.blendFunc(_,this.blending[_]);0<E.length&&m.enable(3042);for(const _ of this.localCalls)_();for(const _ of h)_();this.geom.display(m)}}},function(n,d){'use strict';class u{constructor(){this.pointer=null,this.gl=null,this.arrayType=34962,this.data=null,this.arrayUsage=35044}isInitialized(){return!!this.pointer}setArray(l,m=this.arrayType,h=this.arrayUsage){this.arrayType=m,this.data=l,this.arrayUsage=h;const T=this.gl;T&&(T.bindBuffer(m,this.pointer),T.bufferData(m,l,arrayUsage))}setItems(l=5126,m=3){this.itemType=l,this.itemSize=m}init(l){const m=l.createBuffer();return l.bindBuffer(this.arrayType,m),l.bufferData(this.arrayType,this.data,this.arrayUsage),this.pointer=m,this.gl=l,!0}bind(l){l.bindBuffer(this.arrayType,this.pointer)}clone(l=new u){return l.setArray(this.data,this.arrayType,this.arrayUsage),l.setItems(this.itemType,this.itemSize),l}}d.a=u},function(n,d,o){'use strict';var u=o(1);class l{constructor(){this.meshes=[],this.depthTest=!0,this.sortCompare=(m,h)=>{if(m.order!==h.order)return m.order-h.order;return m.program&&h.program&&m.program!==h.program?m.program.id-h.program.id:m.textures&&h.textures&&0<m.textures.length&&0<m.textures.length?m.textures[0].id-h.textures[1].id:0},this._updateList=[]}addMesh(m){this.meshes.push(m)}removeMesh(m){const h=this.meshes.indexOf(m);-1<h&&this.meshes.splice(h,1)}sort(){this.meshes.sort(this.sortCompare)}set bgColor([m,h,T,E=1]){this._updateList.push((_)=>_.clearColor(m,h,T,E)),this._bgColor=[m,h,T,E]}get bgColor(){return this._bgColor}init(m){console.log(m),this._callOptimizer=u.a.getInstance(m)}draw(m){for(;0<this._updateList.length;)this._updateList.pop()(m);this._callOptimizer.optimizeDepthTest(this.depthTest)||(this.depthTest?m.enable(m.DEPTH_TEST):m.disable(m.DEPTH_TEST)),m.clear(m.COLOR_BUFFER_BIT|m.DEPTH_BUFFER_BIT|m.STENCIL_BUFFER_BIT);for(const h of this.meshes)h.visible&&(h.isInitialized()?h.draw(m):(h.init(m),h.draw(m)))}}d.a=l},function(n,d,o){'use strict';var u=o(16);d.a=class{constructor(m,h={antialias:!0,stencil:!0,alpha:!0,width:640,height:360}){this.width=h.width,this.height=h.height,this.screenRecorder=new u.a(h.width,h.height,!0,!0),this.passEnabled=!0,this.scenes=[],this.passList=[],this.isEnable=!1,this._init(m,{antialias:h.antialias,stencil:h.stencil,alpha:h.alpha}),this._initScreenRecorder(this.gl)}_init(m,h){let T;try{T=m.getContext('webgl',h)||m.getContext('experimental-webgl',h)}catch(E){console.error('Could not initialise WebGL:',E.message)}T||console.error('Could not initialise WebGL'),this.gl=T,this.gl.viewport(0,0,this.width,this.height)}_initScreenRecorder(m){if(this.screenRecorder.init(m),!this.screenRecorder.depthTexture)for(const h of this.passList)this._disableDepthInTexture(h,m)}isInitialized(){return this.screenRecorder.isInitialized()}addScene(m){m.init(this.gl),this.scenes.push(m)}resize(m,h){this.width=m,this.height=h,this.gl.viewport(0,0,this.width,this.height),this.screenRecorder.resize(m,h,this.gl);for(const T of this.passList)T.resize(m,h)}_disableDepthInTexture(m,h){m.inDepthTexture&&m.setDepthTexture(!1,h)}addPass(m){m.init(this.gl,[]),this.screenRecorder.isInitialized()&&!this.screenRecorder.depthTexture&&this._disableDepthInTexture(m,this.gl),m.uWidth&&(m.uWidth.data=this.width),m.uHeight&&(m.uHeight.data=this.height),this.passList.push(m),this.isEnable=!0}removePass(m){const h=this.passList.indexOf(m);-1<h&&this.passList.splice(h,1),this.isEnable=0<this.passList.length}draw(){const m=this.gl,h=this.passList.length;if(this.passEnabled&&0<h&&0<this.scenes.length){this.screenRecorder.start(m,!0),this.scenes[0].draw(m),this.screenRecorder.stop(m),this.screenRecorder.pingpong();for(let T=0;T<h;T++){const E=this.passList[T],_=T>h-2;_||this.screenRecorder.start(m,!1),this.screenRecorder.pingpong(),E.inColorTexture&&E.inColorTexture.setTexture(this.screenRecorder.colorTexture),E.inDepthTexture&&this.screenRecorder.depthTexture&&E.inDepthTexture.setTexture(this.screenRecorder.depthTexture),E.draw(m),this.screenRecorder.stop(m)}}else 0<this.scenes.length&&this.scenes[0].draw(m)}}},function(n,d,o){'use strict';var u=o(1);let l=0;class m{constructor(h){this.id=l++,this.label=h,this.mipmap=!0,this.img=null,this.width=null,this.height=null,this.pointer=null,this.parameters=[],this.setType(),this.setInternalFormat(),this.setFormat(),this.setTarget()}resize(h,T,E=null){this.width=h,this.height=T,E?(E.bindTexture(this.target,this.pointer),E.texImage2D(this.target,0,this.internalFormat,this.width,this.height,0,this.format,this.type,this.img)):this.updated=!0}setTempColor(h){this.setImg(new Uint8Array(h),1,1)}setImg(h=new Uint8Array([255,255,255,255]),T=1,E=1){this.img=h,this.width=T,this.height=E}setType(h=5121){this.type=h}setInternalFormat(h=6408){this.internalFormat=h}setFormat(h=6408){this.format=h}setTarget(h=3553){this.target=h}setParam(h,T){const E=this.parameters.find((_)=>_[0]===h);-1<E?this.parameters[E][1]=T:this.parameters.push([h,T])}isInitialized(){return!!this.pointer}static IS_POWER_OF_2(h){return 0==(h&h-1)}static SET_DATA(h){m.MAX_SIZE=h.getParameter(h.MAX_TEXTURE_SIZE),m.FORMAT={};const T=h.getParameter(h.COMPRESSED_TEXTURE_FORMATS);for(let E=0;E<T.length;E++)m.FORMAT[T[E]]=!0;m._DATA_INITIALIZED=!0}setDefaultParams(h){this.mipmap?this.setParam(h.TEXTURE_MIN_FILTER,h.LINEAR_MIPMAP_LINEAR):(this.setParam(h.TEXTURE_WRAP_S,h.CLAMP_TO_EDGE),this.setParam(h.TEXTURE_WRAP_T,h.CLAMP_TO_EDGE),this.setParam(h.TEXTURE_MIN_FILTER,h.LINEAR))}initParams(h){if(this.mipmap){const T=this.img;null===T?console.warn('You need an image to set the parameters of texture'):m.IS_POWER_OF_2(T.width)&&m.IS_POWER_OF_2(T.height)?h.generateMipmap(this.target):(this.mipmap=!1,console.warn('You need a power of 2 for the size of the mipmaped texture'))}1>this.parameters.length&&this.setDefaultParams(h);for(const[T,E]of this.parameters)h.texParameteri(this.target,T,E)}init(h){const T=h.createTexture();return m._DATA_INITIALIZED||m.SET_DATA(h),h.bindTexture(this.target,T),h.texImage2D(this.target,0,this.internalFormat,this.width,this.height,0,this.format,this.type,this.img),this.initParams(h),this._callOptimizer=u.a.getInstance(h),this.pointer=T,!0}bind(h,T,E){this._callOptimizer.optimizeTexture(this)||(h.uniform1i(T,E),h.activeTexture(h.TEXTURE0+E),h.bindTexture(this.target,this.pointer),this.updated&&(h.texImage2D(this.target,0,this.internalFormat,this.width,this.height,0,this.format,this.type,this.img),this.updated=!1))}free(h){h.bindTexture(h.TEXTURE_2D,null)}}d.a=m},function(n,d,o){'use strict';var u=o(7);class l extends u.a{constructor(m){super(),this.label=m}bind(m,h){super.bind(m),m.vertexAttribPointer(h,this.itemSize,this.itemType,!1,0,0)}clone(m=new l(this.label)){return m.label=this.label,super.clone(m),m}}d.a=l},function(n,d,o){'use strict';var u=o(5),l=o(0);class m extends l.a{constructor(h){super(h,35676,u.a.create()),this.updateNum=0,this.updated=!0,this.local=u.a.create(),this.parent=null}get global(){return this.update(),this._data}update(){const h=this.parent,T=null!==this.parent;if(this.updated||T&&this._parentUpdateNum!==h.updateNum){const E=this._data;T?(u.a.copy(h.global,E),u.a.multiply(E,this.local),this._parentUpdateNum=h.updateNum):u.a.copy(this.local,E),this.updateNum++,this.updated=!0}}clear(){u.a.identity(this.local),this.updateNum++,this.updated=!0}scale(h){u.a.scale(this.local,h),this.updateNum++,this.updated=!0}translate(h){u.a.translate(this.local,h),this.updateNum++,this.updated=!0}rotate(h,T){u.a.rotate(this.local,h,T),this.updateNum++,this.updated=!0}rotateX(h){u.a.rotateX(this.local,h),this.updateNum++,this.updated=!0}rotateY(h){u.a.rotateY(this.local,h),this.updateNum++,this.updated=!0}rotateZ(h){u.a.rotateZ(this.local,h),this.updateNum++,this.updated=!0}attach(h){this.parent=h,this._parentUpdateNum=h.updateNum,this.updateNum++,this.updated=!0}detach(){this.parent=null,this.updateNum++,this.updated=!0}}d.a=m},function(n,d,o){'use strict';var u=o(5),l=o(0);class m extends l.a{constructor(){super('uPMatrix',35676,u.a.create()),this.fovy=45,this.near=0.1,this.far=100;const h=u.a.create();this._matrix=h,this.updated=!0,this.updateNum=0,this._ratio=0,this.clear=()=>{u.a.identity(h),this.updated=!0},this.translate=(T)=>{u.a.translate(h,T),this.updated=!0},this.scale=(T)=>{u.a.scale(h,T),this.updated=!0},this.rotate=(T,E)=>{u.a.rotate(h,T,E),this.updated=!0},this.rotateX=(T)=>{u.a.rotateX(h,T),this.updated=!0},this.rotateY=(T)=>{u.a.rotateY(h,T),this.updated=!0},this.rotateZ=(T)=>{u.a.rotateZ(h,T),this.updated=!0},this.lookAt=(T,E,_)=>{u.a.lookAt(h,T,E,_),this.updated=!0}}get data(){return this.updated&&this.update(),this._data}get ratio(){return this._ratio}set ratio(h){this._ratio=h,this.updated=!0}resize(h,T){this._ratio=h/T,this.updated=!0}update(){u.a.perspective(this._data,this.fovy*_MathPI/180,this._ratio,this.near,this.far),u.a.multiply(this._data,this._matrix),this.updated=!1,this.updateNum++}}d.a=m},function(n,d){'use strict';d.a=class{constructor(){this.pointer=null}isInitialized(){return!!this.pointer}init(l){const m=l.createFramebuffer();return l.bindFramebuffer(l.FRAMEBUFFER,m),this.pointer=m,!0}bind(l){l.bindFramebuffer(l.FRAMEBUFFER,this.pointer)}free(l){l.bindFramebuffer(l.FRAMEBUFFER,null)}}},function(n,d){'use strict';d.a=class{constructor(l,m){this.pointer=null,this.width=l,this.height=m}resize(l,m,h=null){this.width=l,this.height=m,h?(h.bindRenderbuffer(h.RENDERBUFFER,this.pointer),h.renderbufferStorage(h.RENDERBUFFER,h.DEPTH_COMPONENT16,l,m)):this.updated=!0}isInitialized(){return!!this.pointer}init(l){const m=l.createRenderbuffer();l.bindRenderbuffer(l.RENDERBUFFER,m),l.renderbufferStorage(l.RENDERBUFFER,l.DEPTH_COMPONENT16,this.width,this.height),this.pointer=m}bind(l){l.bindRenderbuffer(l.RENDERBUFFER,renderBuffer),this.updated&&(l.renderbufferStorage(l.RENDERBUFFER,l.DEPTH_COMPONENT16,this.width,this.height),this.updated=!1)}}},function(n,d,o){'use strict';var u=o(10),l=o(15),m=o(14);class h{constructor(T,E,_=!0,I=!1){this.captureDepth=_,this.recordDepth=I,this.width=T,this.height=E,this.updated=!1,this._pingpong=!1,this._colorTextures=[this._genColorTexture('frameBufferColor0',T,E),this._genColorTexture('frameBufferColor1',T,E)],this.frameBuffer=new m.a}_genDepthTexture(T,E,_){const I=new u.a;return I.mipmap=!1,I.setInternalFormat(6402),I.setFormat(6402),I.setType(5123),I.setParam(10242,33071),I.setParam(10243,33071),I.setParam(10241,9728),I.setParam(10240,9728),I.setImg(null,E,_),I}_genColorTexture(T,E,_){const I=new u.a(T);return I.mipmap=!1,!1,I.setImg(null,E,_),I}pingpong(){this._pingpong=!this._pingpong}get colorTexture(){return this._colorTextures[this._pingpong?1:0]}resize(T,E,_){this.width=T,this.height=E,this.pingpong(),this.colorTexture.resize(T,E,_),this.pingpong(),this.colorTexture.resize(T,E,_),this.depthTexture&&this.depthTexture.resize(T,E,_),this.renderBuffer&&this.renderBuffer.resize(T,E,_)}isInitialized(){return!!this.frameBuffer.pointer}static SET_DATA(T){h.WEBGL_depth_texture=T.getExtension('WEBGL_depth_texture')||T.getExtension('WEBKIT_WEBGL_depth_texture')||T.getExtension('MOZ_WEBGL_depth_texture'),h._DATA_INITIALIZED=!0}init(T){return h._DATA_INITIALIZED||h.SET_DATA(T),this.recordDepth&&(h.WEBGL_depth_texture?(this.depthTexture=this._genDepthTexture('frameBufferDepth',this.width,this.height),this.depthTexture.init(T)):(console.warn('WEBGL_depth_texture Extension not available!'),this.recordDepth=!1)),this.captureDepth&&(this.renderBuffer=new l.a(this.width,this.height),this.renderBuffer.init(T)),this.frameBuffer.init(T),this.pingpong(),this.colorTexture.init(T),this.pingpong(),this.colorTexture.init(T),this.depthTexture?T.framebufferTexture2D(T.FRAMEBUFFER,T.DEPTH_ATTACHMENT,T.TEXTURE_2D,this.depthTexture.pointer,0):this.renderBuffer&&T.framebufferRenderbuffer(T.FRAMEBUFFER,T.DEPTH_ATTACHMENT,T.RENDERBUFFER,this.renderBuffer.pointer),T.bindTexture(T.TEXTURE_2D,null),T.bindFramebuffer(T.FRAMEBUFFER,null),T.bindRenderbuffer(T.RENDERBUFFER,null),!0}start(T,E=!0){this.frameBuffer.bind(T),T.framebufferTexture2D(T.FRAMEBUFFER,T.COLOR_ATTACHMENT0,T.TEXTURE_2D,this.colorTexture.pointer,0),this.depthTexture?T.framebufferTexture2D(T.FRAMEBUFFER,T.DEPTH_ATTACHMENT,T.TEXTURE_2D,E?this.depthTexture.pointer:null,0):this.renderBuffer&&T.framebufferRenderbuffer(T.FRAMEBUFFER,T.DEPTH_ATTACHMENT,T.RENDERBUFFER,E?this.renderBuffer.pointer:null)}stop(T){this.frameBuffer.free(T)}}d.a=h},function(n,d,o){'use strict';var l=o(10);class m extends l.a{constructor(h){super(h),this.srcs=[],this.setTempColor([255,255,255,255])}setTempColor(h){this.setImg(new Uint8Array(h),1,1)}addURL(h,T=0){const E={size:T,src:h,img:null,priority:0,isImage:!0,isValid:()=>!0,init:null};E.init=(_)=>{_.bindTexture(_.TEXTURE_2D,this.pointer),_.pixelStorei(_.UNPACK_FLIP_Y_WEBGL,!0),_.texImage2D(_.TEXTURE_2D,0,6408,this.format,_.UNSIGNED_BYTE,E.img),this.img=E.img,this.initParams(_)},this.srcs.push(E)}static START_LOAD(h,T){if(0<T.length){T.sort((_,I)=>_.size===I.size?_.size-I.size:_.priority-I.priority);T.filter((_)=>_.size>=l.a.MAX_SIZE&&_.isValid(h));if(1<T.length){const _=T[0],I=T[T.length-1];m.LOAD(_,()=>{_.init(h),m.LOAD(I,()=>{I.init(h)})})}else if(0<T.length){const _=T[0];m.LOAD(_,()=>{_.init(h)})}else console.warn('The GPU can\'nt load a texture with size > ',l.a.MAX_SIZE)}else console.warn('URL of your smart texture not found')}static LOAD(h,T){if(h.isImage){const E=new Image;E.onload=()=>{T(h)},h.img=E,E.src=h.src}else{const E=new XMLHttpRequest;E.responseType='arraybuffer',E.open('GET',h.src,!0),E.onreadystatechange=()=>{E.readyState===XMLHttpRequest.DONE&&(200===E.status?(h.img=E.response,T(h)):console.error('fail to load image ',h.src,'status:',E.status,'statuc text:',E.statusText))},E.send()}}init(h,T){const E=super.init(h,T),_=this.pointer;return m.START_LOAD(h,this.srcs),E}}d.a=m},,,,,,,,,,,,,function(n,d,o){'use strict';function l(P,A,F){const L=[],U=[];let N;for(const B of P.camera){const M=F.initCamera3D(B);M.name=B.name,M.fovy=B.fovy,M.near=B.near,M.far=B.far;const C=B.transform;M.lookAt(C.pos,C.lookAt,C.up),L.push(M),N||(N=M)}for(const B of P.mesh){const M=F.initdMesh(B);if(M.name=B.name,N&&M.addGlobalUniform(N),B.transform){const C=B.transform;M.transform.translate(C.pos);const O=C.rot;M.transform.rotateZ(O[2]*_MathPI/180),M.transform.rotateY(O[1]*_MathPI/180),M.transform.rotateX(O[0]*_MathPI/180)}if(B.geom){const C=B.geom,O=M.geom;C.vertices&&O.addVertices('aVertexPosition',C.vertices,3),C.uv&&O.addVertices('aTextureCoord',C.uv,2),C.indices&&O.addIndices(C.indices)}U.push(M)}A({camera:L,mesh:U})}function m(P,A,F){const L=new XMLHttpRequest;L.open('GET',P,!0),L.overrideMimeType('application/json'),L.onreadystatechange=()=>{if(4===L.readyState)if(200===L.status){let U;try{U=JSON.parse(L.responseText)}catch(N){return F.onError(N.message)}l(U,A,F)}else F.onError(L)},L.send(null)}var h=o(4),T=o(13),E=o(2),_=o(3);const I=`attribute vec3 aVertexPosition;
uniform mat4 uMVMatrix;
uniform mat4 uPMatrix;
void main(void){
gl_Position = uPMatrix * uMVMatrix * vec4(aVertexPosition,1.0);
}`,R=`precision mediump float;
void main(void){
gl_FragColor = vec4(1.0,1.0,1.0,1.0);
}`;d.a=function(P,A,{onError:F=(N)=>{throw new Error('Mesh load error '+N)},initCamera3D:L=()=>new T.a,initdMesh:U=()=>new h.a(new _.a(),new E.a(I,R))}){m(P,A,{onError:F,initCamera3D:L,initdMesh:U})}},,function(n,d,o){'use strict';function l(){const v=[window.innerWidth,window.innerHeight];F.resize(v[0],v[1]),P.width=v[0],P.height=v[1],L.resize(...v)}function m(){if(L){L.clear();const v=15*_Mathcos(1e-3*Date.now()),X=15*_Mathsin(1e-3*Date.now());L.lookAt([v,10,X],[0,0,0],[0,1,0])}F.draw(),requestAnimationFrame(m)}Object.defineProperty(d,'__esModule',{value:!0});var h=o(2),T=o(3),E=o(17),_=o(4),I=o(8),R=o(9),D=o(30);const P=document.body.querySelector('canvas'),A=new I.a;A.bgColor=[1,1,1,1],A.depthTest=!0;const F=new R.a(P);F.passEnabled=!1,F.addScene(A);let L;const U=`      
    attribute vec3 aVertexPosition;
    attribute vec2 aTextureCoord;

    uniform mat4 uMVMatrix;
    uniform mat4 uPMatrix;

    varying vec4 vColor;
    varying vec2 vTextureCoord;

    void main(void) {
        gl_Position = uPMatrix * uMVMatrix * vec4(aVertexPosition, 1.0);
        vColor = vec4(normalize(aVertexPosition), 1.0);
        vTextureCoord = aTextureCoord;
    }
`,N=`      
    attribute vec3 aVertexPosition;
    attribute vec2 aTextureCoord;

    uniform mat4 uPMatrix;

    varying vec4 vColor;
    varying vec2 vTextureCoord;

    void main(void) {
        gl_Position = uPMatrix * vec4(aVertexPosition, 1.0);
        vColor = vec4(normalize(aVertexPosition), 1.0);
        vTextureCoord = aTextureCoord;
    }
`,B=`
    precision mediump float;

    varying vec2 vTextureCoord;
    varying vec4 vColor;
    uniform sampler2D uDiffuse;

    void main(void) {
        vec4 color = texture2D(uDiffuse, vec2(vTextureCoord.s, vTextureCoord.t));
        gl_FragColor = color;
    }
`,M=new E.a('uDiffuse');M.addURL('assets/suzanne-plane-diffuse.jpg');const C=new E.a('uDiffuse');C.addURL('assets/suzanne-diffuse.jpg');const O=new E.a('uDiffuse');O.addURL('assets/suzanne-cube-diffuse.jpg'),o.i(D.a)('assets/suzanne.min.json',({camera:v,mesh:X})=>{L=v[0];for(const H of X)A.addMesh(H);l()},{initdMesh:function(v){let X;switch(v.name){case'Suzanne':X=new _.a(new T.a(),new h.a(N,B)),X.addTexture(C);break;case'Cube':X=new _.a(new T.a(),new h.a(U,B)),X.addTexture(O);break;case'Plane':X=new _.a(new T.a(),new h.a(U,B)),X.addTexture(M);break;default:throw new Error('Mesh unexpected '+v.name);}return X}}),window.onresize=l,m()}]);