var _Mathpow=Math.pow,_MathPI=Math.PI,_Mathtan=Math.tan,_Mathcos=Math.cos,_Mathsin=Math.sin,_Mathsqrt=Math.sqrt,_Mathmax=Math.max,_Mathabs=Math.abs;(function(n){function o(l){if(u[l])return u[l].exports;var m=u[l]={i:l,l:!1,exports:{}};return n[l].call(m.exports,m,m.exports,o),m.l=!0,m.exports}var u={};return o.m=n,o.c=u,o.i=function(l){return l},o.d=function(l,m,T){o.o(l,m)||Object.defineProperty(l,m,{configurable:!1,enumerable:!0,get:T})},o.n=function(l){var m=l&&l.__esModule?function(){return l['default']}:function(){return l};return o.d(m,'a',m),m},o.o=function(l,m){return Object.prototype.hasOwnProperty.call(l,m)},o.p='',o(o.s=33)})([function(n,o){'use strict';class l{constructor(m,T,E,_=!1){this.label=m,this.type=T,this._data=E,this._init(T,_),this.updated=!0}get data(){return this._data}set data(m){this._data=m,this.updated=!0}_init(m){switch(this.type){case 35675:{this.bind=(E,_)=>{E.uniformMatrix3fv(_,!1,this.data)};break}case 35676:{this.bind=(E,_)=>{E.uniformMatrix4fv(_,!1,this.data)};break}case 35664:{this.bind=(E,_)=>{E.uniform2f(_,...this.data)};break}case 35665:{this.bind=(E,_)=>{E.uniform3f(_,...this.data)};break}case 5124:this.bind=(E,_)=>{E.uniform1i(_,this.data)};break;case-1:this.bind=(E,_)=>{E.uniform1fv(_,this.data)};break;default:console.error('Uniform type unknow: {label:',this.label,', type:',m,'}');}}}o.a=l},function(n,o){'use strict';class l{constructor(){this.lastTexture=null,this.lastProgram=null,this.lastDepthTest=!1}optimizeTexture(m){const T=this.lastTexture;return this.lastTexture=m,m===T}optimizeProgram(m){const T=this.lastProgram;return this.lastProgram=m,m===T}optimizeDepthTest(m){const T=this.lastDepthTest;return this.lastDepthTest=m,T===m}static getInstance(m){const T=l.glList.indexOf(m);if(0>T){const E=new l;return l.glList.push(m),l.list.push(E),E}return l.list[T]}}l.glList=[],l.list=[],o.a=l},function(n,o){'use strict';let l=0;o.a=class{constructor(T,E){this.vertexShaderSrc=T,this.fragmentShaderSrc=E,this.attribLocation={},this.uniformLocation={},this.textureLocation={},this.textureIndex={},this.textureNum=0,this.id=l++}isInitialized(){return!!this.pointer}init(T){this.vertexShader=this._createShader(T,35633,this.vertexShaderSrc),this.fragmentShader=this._createShader(T,35632,this.fragmentShaderSrc);const E=T.createProgram();return(T.attachShader(E,this.vertexShader),T.attachShader(E,this.fragmentShader),T.linkProgram(E),!T.getProgramParameter(E,T.LINK_STATUS))?(console.error('Shader initialization error'),!1):(T.useProgram(E),this.pointer=E,!0)}getAttribLocation(T,E){const _=E.label;if(!this.attribLocation.hasOwnProperty(_)){const R=T.getAttribLocation(this.pointer,_);return T.enableVertexAttribArray(R),this.attribLocation[_]=R,R}return this.attribLocation[_]}getUniformLocation(T,E){const _=E.label;if(!this.uniformLocation.hasOwnProperty(_)){const R=T.getUniformLocation(this.pointer,_);return this.uniformLocation[_]=R,R}return this.uniformLocation[_]}getTextureLocationIndex(T,E){const _=E.label;if(!this.textureLocation.hasOwnProperty(_)||!this.textureIndex.hasOwnProperty(_)){const R=T.getUniformLocation(this.pointer,_);return this.textureLocation[_]=R,this.textureIndex[_]=this.textureNum,[R,this.textureNum++]}return[this.textureLocation[_],this.textureIndex[_]]}bind(T){T.useProgram(this.pointer)}_createShader(T,E,_){const R=T.createShader(E);return T.shaderSource(R,_),T.compileShader(R),T.getShaderParameter(R,T.COMPILE_STATUS)?R:console.error('Une erreur est survenue au cours de la compilation du shader: '+T.getShaderInfoLog(R))}}},function(n,o,u){'use strict';var l=u(7),m=u(11);class T{constructor(){this.attributes=[],this.buffers=[],this.hasIndices=!1,this.numItems=0}addVertices(E,_,R){const I=new m.a(E);I.setArray(new Float32Array(_),34962),I.setItems(5126,R),this.attributes.push(I),1>this.numItems&&(this.numItems=_.length/R)}addIndices(E){const _=new l.a;_.setArray(new Uint16Array(E),34963),_.setItems(5125,1),this.hasIndices=!0,this.buffers.push(_),this.numItems=E.length}display(E){this.hasIndices?E.drawElements(E.TRIANGLES,this.numItems,E.UNSIGNED_SHORT,0):E.drawArrays(E.TRIANGLES,0,this.numItems)}clone(E=new T){return E.attributes=this.attributes.map((_)=>_.clone()),E.buffers=this.buffers.map((_)=>_.clone()),E.hasIndices=this.hasIndices,E.numItems=this.numItems,E}}o.a=T},function(n,o,u){'use strict';var l=u(6),m=u(12);class T extends l.a{constructor(E,_){super(E,_),this.depthTest=!0;const R=new m.a('uMVMatrix');this.transform=R,this.addUniform(R)}get position(){return this.transform.getTranslation()}get rotation(){return this.transform.getRotation()}draw(E,_=[]){this.transform&&this.transform.update(),super.draw(E,_)}}o.a=T},function(n,o){'use strict';function l(E,_,R,I,F,D,P,A,L,U,N,B,C,M,O,H,v){return E[0]=_,E[1]=R,E[2]=I,E[3]=F,E[4]=D,E[5]=P,E[6]=A,E[7]=L,E[8]=U,E[9]=N,E[10]=B,E[11]=C,E[12]=M,E[13]=O,E[14]=H,E[15]=v,E}const m=1e-6;class T{constructor(){console.warn('Matrix4 is a static class')}static create(){const E=new Float32Array(16);return E[0]=1,E[5]=1,E[10]=1,E[15]=1,E}static clone(E){return T.copy(E)}static copy(E,_=new Float32Array(16)){return _.set(E),_}static identity(E){return l(E,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)}static add(E,_){return E[0]+=_[0],E[1]+=_[1],E[2]+=_[2],E[3]+=_[3],E[4]+=_[4],E[5]+=_[5],E[6]+=_[6],E[7]+=_[7],E[8]+=_[8],E[9]+=_[9],E[10]+=_[10],E[11]+=_[11],E[12]+=_[12],E[13]+=_[13],E[14]+=_[14],E[15]+=_[15],E}static subtract(E,_){return E[0]-=_[0],E[1]-=_[1],E[2]-=_[2],E[3]-=_[3],E[4]-=_[4],E[5]-=_[5],E[6]-=_[6],E[7]-=_[7],E[8]-=_[8],E[9]-=_[9],E[10]-=_[10],E[11]-=_[11],E[12]-=_[12],E[13]-=_[13],E[14]-=_[14],E[15]-=_[15],E}static multiplyScalar(E){return m1[0]*=E,m1[1]*=E,m1[2]*=E,m1[3]*=E,m1[4]*=E,m1[5]*=E,m1[6]*=E,m1[7]*=E,m1[8]*=E,m1[9]*=E,m1[10]*=E,m1[11]*=E,m1[12]*=E,m1[13]*=E,m1[14]*=E,m1[15]*=E,m1}static multiplyScalarAndAdd(E,_,R){return E[0]+=_[0]*R,E[1]+=_[1]*R,E[2]+=_[2]*R,E[3]+=_[3]*R,E[4]+=_[4]*R,E[5]+=_[5]*R,E[6]+=_[6]*R,E[7]+=_[7]*R,E[8]+=_[8]*R,E[9]+=_[9]*R,E[10]+=_[10]*R,E[11]+=_[11]*R,E[12]+=_[12]*R,E[13]+=_[13]*R,E[14]+=_[14]*R,E[15]+=_[15]*R,E}static exactEquals(E,_){return E[0]===_[0]&&E[1]===_[1]&&E[2]===_[2]&&E[3]===_[3]&&E[4]===_[4]&&E[5]===_[5]&&E[6]===_[6]&&E[7]===_[7]&&E[8]===_[8]&&E[9]===_[9]&&E[10]===_[10]&&E[11]===_[11]&&E[12]===_[12]&&E[13]===_[13]&&E[14]===_[14]&&E[15]===_[15]}static equals(E,_){const[R,I,F,D,P,A,L,U,N,B,C,M,O,H,v,X]=E,[G,W,V,q,Z,k,Y,K,Q,$,J,ee,te,ae,re,ie]=_;return _Mathabs(R-G)<=m*_Mathmax(1,_Mathabs(R),_Mathabs(G))&&_Mathabs(I-W)<=m*_Mathmax(1,_Mathabs(I),_Mathabs(W))&&_Mathabs(F-V)<=m*_Mathmax(1,_Mathabs(F),_Mathabs(V))&&_Mathabs(D-q)<=m*_Mathmax(1,_Mathabs(D),_Mathabs(q))&&_Mathabs(P-Z)<=m*_Mathmax(1,_Mathabs(P),_Mathabs(Z))&&_Mathabs(A-k)<=m*_Mathmax(1,_Mathabs(A),_Mathabs(k))&&_Mathabs(L-Y)<=m*_Mathmax(1,_Mathabs(L),_Mathabs(Y))&&_Mathabs(U-K)<=m*_Mathmax(1,_Mathabs(U),_Mathabs(K))&&_Mathabs(N-Q)<=m*_Mathmax(1,_Mathabs(N),_Mathabs(Q))&&_Mathabs(B-$)<=m*_Mathmax(1,_Mathabs(B),_Mathabs($))&&_Mathabs(C-J)<=m*_Mathmax(1,_Mathabs(C),_Mathabs(J))&&_Mathabs(M-ee)<=m*_Mathmax(1,_Mathabs(M),_Mathabs(ee))&&_Mathabs(O-te)<=m*_Mathmax(1,_Mathabs(O),_Mathabs(te))&&_Mathabs(H-ae)<=m*_Mathmax(1,_Mathabs(H),_Mathabs(ae))&&_Mathabs(v-re)<=m*_Mathmax(1,_Mathabs(v),_Mathabs(re))&&_Mathabs(X-ie)<=m*_Mathmax(1,_Mathabs(X),_Mathabs(ie))}static transpose(E,_){if(_===E){const R=_[1],I=_[2],F=_[3],D=_[6],P=_[7],A=_[11];E[1]=_[4],E[2]=_[8],E[3]=_[12],E[4]=R,E[6]=_[9],E[7]=_[13],E[8]=I,E[9]=D,E[11]=_[14],E[12]=F,E[13]=P,E[14]=A}else l(E,_[0],_[4],_[8],_[12],_[1],_[5],_[9],_[13],_[2],_[6],_[10],_[14],_[3],_[7],_[11],_[15]);return E}static invert(E){const[_,R,I,F,D,P,A,L,U,N,B,C,M,O,H,v]=E,X=_*P-R*D,G=_*A-I*D,W=_*L-F*D,V=R*A-I*P,q=R*L-F*P,Z=I*L-F*A,k=U*O-N*M,Y=U*H-B*M,K=U*v-C*M,Q=N*H-B*O,$=N*v-C*O,J=B*v-C*H;let ee=X*J-G*$+W*Q+V*K-q*Y+Z*k;return ee?(ee=1/ee,l(E,(P*J-A*$+L*Q)*ee,(I*$-R*J-F*Q)*ee,(O*Z-H*q+v*V)*ee,(B*q-N*Z-C*V)*ee,(A*K-D*J-L*Y)*ee,(_*J-I*K+F*Y)*ee,(H*W-M*Z-v*G)*ee,(U*Z-B*W+C*G)*ee,(D*$-P*K+L*k)*ee,(R*K-_*$-F*k)*ee,(M*q-O*W+v*X)*ee,(N*W-U*q-C*X)*ee,(P*Y-D*Q-A*k)*ee,(_*Q-R*Y+I*k)*ee,(O*G-M*V-H*X)*ee,(U*V-N*G+B*X)*ee)):E}static adjoint(E){const[_,R,I,F,D,P,A,L,U,N,B,C,M,O,H,v]=E;return l(E,P*(B*v-C*H)-N*(A*v-L*H)+O*(A*C-L*B),-(R*(B*v-C*H)-N*(I*v-F*H)+O*(I*C-F*B)),R*(A*v-L*H)-P*(I*v-F*H)+O*(I*L-F*A),-(R*(A*C-L*B)-P*(I*C-F*B)+N*(I*L-F*A)),-(D*(B*v-C*H)-U*(A*v-L*H)+M*(A*C-L*B)),_*(B*v-C*H)-U*(I*v-F*H)+M*(I*C-F*B),-(_*(A*v-L*H)-D*(I*v-F*H)+M*(I*L-F*A)),_*(A*C-L*B)-D*(I*C-F*B)+U*(I*L-F*A),D*(N*v-C*O)-U*(P*v-L*O)+M*(P*C-L*N),-(_*(N*v-C*O)-U*(R*v-F*O)+M*(R*C-F*N)),_*(P*v-L*O)-D*(R*v-F*O)+M*(R*L-F*P),-(_*(P*C-L*N)-D*(R*C-F*N)+U*(R*L-F*P)),-(D*(N*H-B*O)-U*(P*H-A*O)+M*(P*B-A*N)),_*(N*H-B*O)-U*(R*H-I*O)+M*(R*B-I*N),-(_*(P*H-A*O)-D*(R*H-I*O)+M*(R*A-I*P)),_*(P*B-A*N)-D*(R*B-I*N)+U*(R*A-I*P))}static determinant(E){const[_,R,I,F,D,P,A,L,U,N,B,C,M,O,H,v]=E;return(_*P-R*D)*(B*v-C*H)-(_*A-I*D)*(N*v-C*O)+(_*L-F*D)*(N*H-B*O)+(R*A-I*P)*(U*v-C*M)-(R*L-F*P)*(U*H-B*M)+(I*L-F*A)*(U*O-N*M)}static multiply(E,_){const[R,I,F,D,P,A,L,U,N,B,C,M,O,H,v,X]=E;let[G,W,V,q]=_;return E[0]=G*R+W*P+V*N+q*O,E[1]=G*I+W*A+V*B+q*H,E[2]=G*F+W*L+V*C+q*v,E[3]=G*D+W*U+V*M+q*X,G=_[4],W=_[5],V=_[6],q=_[7],E[4]=G*R+W*P+V*N+q*O,E[5]=G*I+W*A+V*B+q*H,E[6]=G*F+W*L+V*C+q*v,E[7]=G*D+W*U+V*M+q*X,G=_[8],W=_[9],V=_[10],q=_[11],E[8]=G*R+W*P+V*N+q*O,E[9]=G*I+W*A+V*B+q*H,E[10]=G*F+W*L+V*C+q*v,E[11]=G*D+W*U+V*M+q*X,G=_[12],W=_[13],V=_[14],q=_[15],E[12]=G*R+W*P+V*N+q*O,E[13]=G*I+W*A+V*B+q*H,E[14]=G*F+W*L+V*C+q*v,E[15]=G*D+W*U+V*M+q*X,E}static translate(E,[_,R,I]){return E[12]=E[0]*_+E[4]*R+E[8]*I+E[12],E[13]=E[1]*_+E[5]*R+E[9]*I+E[13],E[14]=E[2]*_+E[6]*R+E[10]*I+E[14],E[15]=E[3]*_+E[7]*R+E[11]*I+E[15],E}static scale(E,[_,R,I]){return E[0]*=_,E[1]*=_,E[2]*=_,E[3]*=_,E[4]*=R,E[5]*=R,E[6]*=R,E[7]*=R,E[8]*=I,E[9]*=I,E[10]*=I,E[11]*=I,E}static rotate(E,_,[R,I,F]){let D=_Mathsqrt(R*R+I*I+F*F);if(_Mathabs(D)>m){D=1/D,R*=D,I*=D,F*=D;const P=_Mathsin(_),A=_Mathcos(_),L=1-A,[U,N,B,C,M,O,H,v,X,G,W,V]=E,q=R*R*L+A,Z=I*R*L+F*P,k=F*R*L-I*P,Y=R*I*L-F*P,K=I*I*L+A,Q=F*I*L+R*P,$=R*F*L+I*P,J=I*F*L-R*P,ee=F*F*L+A;E[0]=U*q+M*Z+X*k,E[1]=N*q+O*Z+G*k,E[2]=B*q+H*Z+W*k,E[3]=C*q+v*Z+V*k,E[4]=U*Y+M*K+X*Q,E[5]=N*Y+O*K+G*Q,E[6]=B*Y+H*K+W*Q,E[7]=C*Y+v*K+V*Q,E[8]=U*$+M*J+X*ee,E[9]=N*$+O*J+G*ee,E[10]=B*$+H*J+W*ee,E[11]=C*$+v*J+V*ee}return E}static rotateX(E,_){const R=_Mathsin(_),I=_Mathcos(_),F=E[4],D=E[5],P=E[6],A=E[7],L=E[8],U=E[9],N=E[10],B=E[11];return E[4]=F*I+L*R,E[5]=D*I+U*R,E[6]=P*I+N*R,E[7]=A*I+B*R,E[8]=L*I-F*R,E[9]=U*I-D*R,E[10]=N*I-P*R,E[11]=B*I-A*R,E}static rotateY(E,_){const R=_Mathsin(_),I=_Mathcos(_),[F,D,P,A]=E,L=E[8],U=E[9],N=E[10],B=E[11];return E[0]=F*I-L*R,E[1]=D*I-U*R,E[2]=P*I-N*R,E[3]=A*I-B*R,E[8]=F*R+L*I,E[9]=D*R+U*I,E[10]=P*R+N*I,E[11]=A*R+B*I,E}static rotateZ(E,_){const R=_Mathsin(_),I=_Mathcos(_),[F,D,P,A,L,U,N,B]=E;return E[0]=F*I+L*R,E[1]=D*I+U*R,E[2]=P*I+N*R,E[3]=A*I+B*R,E[4]=L*I-F*R,E[5]=U*I-D*R,E[6]=N*I-P*R,E[7]=B*I-A*R,E}static fromTranslation([E,_,R],I=new Float32Array(16)){return l(I,1,0,0,0,0,1,0,0,0,0,1,0,E,_,R,1)}static fromScaling([E,_,R],I=new Float32Array(16)){return l(I,E,0,0,0,0,_,0,0,0,0,R,0,0,0,0,1)}static fromRotation(E,[_,R,I],F=new Float32Array(16)){let D=_Mathsqrt(_*_+R*R+I*I);if(_Mathabs(D)>m){D=1/D,_*=D,R*=D,I*=D;const P=_Mathsin(E),A=_Mathcos(E),L=1-A;l(F,_*_*L+A,R*_*L+I*P,I*_*L-R*P,0,_*R*L-I*P,R*R*L+A,I*R*L+_*P,0,_*I*L+R*P,R*I*L-_*P,I*I*L+A,0,0,0,0,1)}return F}static fromXRotation(E,_=new Float32Array(16)){const R=_Mathsin(E),I=_Mathcos(E);return l(_,1,0,0,0,0,I,R,0,0,-R,I,0,0,0,0,1)}static fromYRotation(E,_=new Float32Array(16)){const R=_Mathsin(E),I=_Mathcos(E);return l(_,I,0,-R,0,0,1,0,0,R,0,I,0,0,0,0,1)}static fromZRotation(E,_=new Float32Array(16)){const R=_Mathsin(E),I=_Mathcos(E);return l(_,I,R,0,0,-R,I,0,0,0,0,1,0,0,0,0,1)}static fromQuat([E,_,R,I],F=new Float32Array(16)){const D=E+E,P=_+_,A=R+R,L=E*D,U=_*D,N=_*P,B=R*D,C=R*P,M=R*A,O=I*D,H=I*P,v=I*A;return l(F,1-N-M,U+v,B-H,0,U-v,1-L-M,C+O,0,B+H,C-O,1-L-N,0,0,0,0,1)}static fromQuatTranslation([E,_,R,I],[F,D,P],A=new Float32Array(16)){const L=E+E,U=_+_,N=R+R,B=E*L,C=E*U,M=E*N,O=_*U,H=_*N,v=R*N,X=I*L,G=I*U,W=I*N;return l(A,1-(O+v),C+W,M-G,0,C-W,1-(B+v),H+X,0,M+G,H-X,1-(B+O),0,F,D,P,1)}static fromQuatTranslationScale([E,_,R,I],[F,D,P],[A,L,U],N=new Float32Array(16)){const B=E+E,C=_+_,M=R+R,O=E*B,H=E*C,v=E*M,X=_*C,G=_*M,W=R*M,V=I*B,q=I*C,Z=I*M;return l(N,(1-(X+W))*A,(H+Z)*A,(v-q)*A,0,(H-Z)*L,(1-(O+W))*L,(G+V)*L,0,(v+q)*U,(G-V)*U,(1-(O+X))*U,0,F,D,P,1)}static fromQuatTranslationScaleOrigin([E,_,R,I],[F,D,P],[A,L,U],[N,B,C],M=new Float32Array(16)){const O=E+E,H=_+_,v=R+R,X=E*O,G=E*H,W=E*v,V=_*H,q=_*v,Z=R*v,k=I*O,Y=I*H,K=I*v;return l(M,(1-(V+Z))*A,(G+K)*A,(W-Y)*A,0,(G-K)*L,(1-(X+Z))*L,(q+k)*L,0,(W+Y)*U,(q-k)*U,(1-(X+V))*U,0,F+N-(M[0]*N+M[4]*B+M[8]*C),D+B-(M[1]*N+M[5]*B+M[9]*C),P+C-(M[2]*N+M[6]*B+M[10]*C),1),M}static getTranslation(E,_=new Float32Array(3)){return _[0]=E[12],_[1]=E[13],_[2]=E[14],_}static getQuat(E,_=new Float32Array(4)){var R=E[0]+E[5]+E[10];if(0<R){const I=2*_Mathsqrt(R+1);_[0]=(E[6]-E[9])/I,_[1]=(E[8]-E[2])/I,_[2]=(E[1]-E[4])/I,_[3]=0.25*I}else if(E[0]>E[5]&E[0]>E[10]){const I=2*_Mathsqrt(1+E[0]-E[5]-E[10]);_[0]=0.25*I,_[1]=(E[1]+E[4])/I,_[2]=(E[8]+E[2])/I,_[3]=(E[6]-E[9])/I}else if(E[5]>E[10]){const I=_Mathsqrt(1+E[5]-E[0]-E[10]);_[0]=2*((E[1]+E[4])/I),_[1]=0.25*I,_[2]=(E[6]+E[9])/I,_[3]=(E[8]-E[2])/I}else{const I=2*_Mathsqrt(1+E[10]-E[0]-E[5]);_[0]=(E[8]+E[2])/I,_[1]=(E[6]+E[9])/I,_[2]=0.25*I,_[3]=(E[1]-E[4])/I}return _}static frustrum(E,_,R,I,F,D,P){const A=1/(R-_),L=1/(F-I),U=1/(D-P);return l(E,2*D*A,0,0,0,0,2*D*L,0,0,(R+_)*A,(F+I)*L,(P+D)*U,-1,0,0,2*(P*D)*U,0)}static perspective(E,_,R,I,F){const D=1/_Mathtan(_/2),P=1/(I-F);return l(E,D/R,0,0,0,0,D,0,0,0,0,(F+I)*P,-1,0,0,2*F*I*P,0)}static perspectiveFromFieldOfView(E,_,R,I){const F=_Mathtan(_.upDegrees*_MathPI/180),D=_Mathtan(_.downDegrees*_MathPI/180),P=_Mathtan(_.leftDegrees*_MathPI/180),A=_Mathtan(_.rightDegrees*_MathPI/180),L=2/(P+A),U=2/(F+D);return l(E,L,0,0,0,0,U,0,0,0.5*(-(P-A)*L),0.5*((F-D)*U),I/(R-I),-1,0,0,I*R/(R-I),0)}static ortho(E,_,R,I,F,D,P){const A=1/(_-R),L=1/(I-F),U=1/(D-P);return l(E,-2*A,0,0,0,0,-2*L,0,0,0,0,2*U,0,(_+R)*A,(F+I)*L,(P+D)*U,1)}static lookAt(E,_,R,I){const[F,D,P]=_,[A,L,U]=I,[N,B,C]=R;if(_Mathabs(F-N)<m&&_Mathabs(D-B)<m&&_Mathabs(P-C)<m)return T.identity(E);let M=F-N,O=D-B,H=P-C,v=1/_Mathsqrt(M*M+O*O+H*H);M*=v,O*=v,H*=v;let X=L*H-U*O,G=U*M-A*H,W=A*O-L*M;v=_Mathsqrt(X*X+G*G+W*W),v?(v=1/v,X*=v,G*=v,W*=v):(X=0,G=0,W=0);let V=O*W-H*G,q=H*X-M*W,Z=M*G-O*X;return v=_Mathsqrt(V*V+q*q+Z*Z),v?(v=1/v,V*=v,q*=v,Z*=v):(V=0,q=0,Z=0),l(E,X,V,M,0,G,q,O,0,W,Z,H,0,-(X*F+G*D+W*P),-(V*F+q*D+Z*P),-(M*F+O*D+H*P),1)}static frob(E){return _Mathsqrt(_Mathpow(E[0],2)+_Mathpow(E[1],2)+_Mathpow(E[2],2)+_Mathpow(E[3],2)+_Mathpow(E[4],2)+_Mathpow(E[5],2)+_Mathpow(E[6],2)+_Mathpow(E[7],2)+_Mathpow(E[8],2)+_Mathpow(E[9],2)+_Mathpow(E[10],2)+_Mathpow(E[11],2)+_Mathpow(E[12],2)+_Mathpow(E[13],2)+_Mathpow(E[14],2)+_Mathpow(E[15],2))}}o.a=T},function(n,o,u){'use strict';var l=u(1);o.a=class{constructor(T,E){this.geom=T,this.program=E,this.uniforms=[],this.globalUniforms=[],this.textures=[],this.localCalls=[],this.globalCalls=[],this.order=1,this.visible=!0,this.depthTest=!1,this.blending={},this._isInitialized=!1}addBlending(T,E){this.blending[T]=E}addUniform(T){this.uniforms.push(T)}removeUniform(T){const E=this.uniforms.indexOf(T);-1<E&&this.uniforms.splice(E,1)}addGlobalUniform(T){this.globalUniforms.push(T)}removeGlobalUniform(T){const E=this.globalUniforms.indexOf(T);-1<E&&this.globalUniforms.splice(E,1)}addTexture(T){this.textures.push(T)}removeTexture(T){const E=this.textures.indexOf(T);-1<E&&this.textures.splice(E,1)}isInitialized(){let T=this._isInitialized;if(T)return T;this.program.isInitialized()||(T=!1);for(const E of this.geom.attributes)E.isInitialized()||(T=!1);for(const E of this.geom.buffers)E.isInitialized()||(T=!1);for(const E of this.textures)E.isInitialized()||(T=!1);return T}_setCalls(T){const E=this.program;for(const _ of this.geom.attributes){const R=E.getAttribLocation(T,_);this.localCalls.push(_.bind.bind(_,T,R))}for(const _ of this.geom.buffers)this.localCalls.push(_.bind.bind(_,T));for(const _ of this.uniforms){const R=E.getUniformLocation(T,_);this.localCalls.push(_.bind.bind(_,T,R))}for(const _ of this.textures){const[R,I]=E.getTextureLocationIndex(T,_);this.localCalls.push(_.bind.bind(_,T,R,I))}for(const _ of this.globalUniforms){const R=E.getUniformLocation(T,_);this.globalCalls.push((I=!0)=>{(I||_.updated)&&(_.bind.call(_,T,R),_.updated=!1)})}}_initData(T){this.program;let _=!0;for(const R of this.geom.attributes)R.isInitialized()||R.init(T)||(_=!1);for(const R of this.geom.buffers)R.isInitialized()||R.init(T)||(_=!1);for(const R of this.textures)R.isInitialized()||R.init(T)||(_=!1);return _}dispose(){this._isInitialized=!1,this.localCalls.length=0}init(T){this.program;let _=!0;return this.program.isInitialized()?this.program.bind(T):!this.program.init(T)&&(_=!1),this._initData(T)||(_=!1),_&&1>this.localCalls.length&&this._setCalls(T),this._callOptimizer=l.a.getInstance(T),this._isInitialized=_,_}draw(T,E=[]){this._callOptimizer.optimizeDepthTest(this.depthTest)||(this.depthTest?T.enable(T.DEPTH_TEST):T.disable(T.DEPTH_TEST));const _=this.program;if(!this._callOptimizer.optimizeProgram(_)){this.program.bind(T);for(const I of this.globalCalls)I(!0)}else for(const I of this.globalCalls)I(!1);const R=Object.keys(this.blending);for(const I of R)T.blendFunc(I,this.blending[I]);0<R.length&&T.enable(3042);for(const I of this.localCalls)I();for(const I of E)I();this.geom.display(T)}}},function(n,o){'use strict';class l{constructor(){this.pointer=null,this.gl=null,this.arrayType=34962,this.data=null,this.arrayUsage=35044}isInitialized(){return!!this.pointer}setArray(m,T=this.arrayType,E=this.arrayUsage){this.arrayType=T,this.data=m,this.arrayUsage=E;const _=this.gl;_&&(_.bindBuffer(T,this.pointer),_.bufferData(T,m,arrayUsage))}setItems(m=5126,T=3){this.itemType=m,this.itemSize=T}init(m){const T=m.createBuffer();return m.bindBuffer(this.arrayType,T),m.bufferData(this.arrayType,this.data,this.arrayUsage),this.pointer=T,this.gl=m,!0}bind(m){m.bindBuffer(this.arrayType,this.pointer)}clone(m=new l){return m.setArray(this.data,this.arrayType,this.arrayUsage),m.setItems(this.itemType,this.itemSize),m}}o.a=l},function(n,o,u){'use strict';var l=u(1);class m{constructor(){this.meshes=[],this.depthTest=!0,this.sortCompare=(T,E)=>{if(T.order!==E.order)return T.order-E.order;return T.program&&E.program&&T.program!==E.program?T.program.id-E.program.id:T.textures&&E.textures&&0<T.textures.length&&0<T.textures.length?T.textures[0].id-E.textures[1].id:0},this._updateList=[]}addMesh(T){this.meshes.push(T)}removeMesh(T){const E=this.meshes.indexOf(T);-1<E&&this.meshes.splice(E,1)}sort(){this.meshes.sort(this.sortCompare)}set bgColor([T,E,_,R=1]){this._updateList.push((I)=>I.clearColor(T,E,_,R)),this._bgColor=[T,E,_,R]}get bgColor(){return this._bgColor}init(T){console.log(T),this._callOptimizer=l.a.getInstance(T)}draw(T){for(;0<this._updateList.length;)this._updateList.pop()(T);this._callOptimizer.optimizeDepthTest(this.depthTest)||(this.depthTest?T.enable(T.DEPTH_TEST):T.disable(T.DEPTH_TEST)),T.clear(T.COLOR_BUFFER_BIT|T.DEPTH_BUFFER_BIT|T.STENCIL_BUFFER_BIT);for(const E of this.meshes)E.visible&&(E.isInitialized()?E.draw(T):(E.init(T),E.draw(T)))}}o.a=m},function(n,o,u){'use strict';var l=u(16);o.a=class{constructor(T,E={antialias:!0,stencil:!0,alpha:!0,width:640,height:360}){this.width=E.width,this.height=E.height,this.screenRecorder=new l.a(E.width,E.height,!0,!0),this.passEnabled=!0,this.scenes=[],this.passList=[],this.isEnable=!1,this._init(T,{antialias:E.antialias,stencil:E.stencil,alpha:E.alpha}),this._initScreenRecorder(this.gl)}_init(T,E){let _;try{_=T.getContext('webgl',E)||T.getContext('experimental-webgl',E)}catch(R){console.error('Could not initialise WebGL:',R.message)}_||console.error('Could not initialise WebGL'),this.gl=_,this.gl.viewport(0,0,this.width,this.height)}_initScreenRecorder(T){if(this.screenRecorder.init(T),!this.screenRecorder.depthTexture)for(const E of this.passList)this._disableDepthInTexture(E,T)}isInitialized(){return this.screenRecorder.isInitialized()}addScene(T){T.init(this.gl),this.scenes.push(T)}resize(T,E){this.width=T,this.height=E,this.gl.viewport(0,0,this.width,this.height),this.screenRecorder.resize(T,E,this.gl);for(const _ of this.passList)_.resize(T,E)}_disableDepthInTexture(T,E){T.inDepthTexture&&T.setDepthTexture(!1,E)}addPass(T){T.init(this.gl,[]),this.screenRecorder.isInitialized()&&!this.screenRecorder.depthTexture&&this._disableDepthInTexture(T,this.gl),T.uWidth&&(T.uWidth.data=this.width),T.uHeight&&(T.uHeight.data=this.height),this.passList.push(T),this.isEnable=!0}removePass(T){const E=this.passList.indexOf(T);-1<E&&this.passList.splice(E,1),this.isEnable=0<this.passList.length}draw(){const T=this.gl,E=this.passList.length;if(this.passEnabled&&0<E&&0<this.scenes.length){this.screenRecorder.start(T,!0),this.scenes[0].draw(T),this.screenRecorder.stop(T),this.screenRecorder.pingpong();for(let _=0;_<E;_++){const R=this.passList[_],I=_>E-2;I||this.screenRecorder.start(T,!1),this.screenRecorder.pingpong(),R.inColorTexture&&R.inColorTexture.setTexture(this.screenRecorder.colorTexture),R.inDepthTexture&&this.screenRecorder.depthTexture&&R.inDepthTexture.setTexture(this.screenRecorder.depthTexture),R.draw(T),this.screenRecorder.stop(T)}}else 0<this.scenes.length&&this.scenes[0].draw(T)}}},function(n,o,u){'use strict';var l=u(1);let m=0;class T{constructor(E){this.id=m++,this.label=E,this.mipmap=!0,this.img=null,this.width=null,this.height=null,this.pointer=null,this.parameters=[],this.setType(),this.setInternalFormat(),this.setFormat(),this.setTarget()}resize(E,_,R=null){this.width=E,this.height=_,R?(R.bindTexture(this.target,this.pointer),R.texImage2D(this.target,0,this.internalFormat,this.width,this.height,0,this.format,this.type,this.img)):this.updated=!0}setTempColor(E){this.setImg(new Uint8Array(E),1,1)}setImg(E=new Uint8Array([255,255,255,255]),_=1,R=1){this.img=E,this.width=_,this.height=R}setType(E=5121){this.type=E}setInternalFormat(E=6408){this.internalFormat=E}setFormat(E=6408){this.format=E}setTarget(E=3553){this.target=E}setParam(E,_){const R=this.parameters.find((I)=>I[0]===E);-1<R?this.parameters[R][1]=_:this.parameters.push([E,_])}isInitialized(){return!!this.pointer}static IS_POWER_OF_2(E){return 0==(E&E-1)}static SET_DATA(E){T.MAX_SIZE=E.getParameter(E.MAX_TEXTURE_SIZE),T.FORMAT={};const _=E.getParameter(E.COMPRESSED_TEXTURE_FORMATS);for(let R=0;R<_.length;R++)T.FORMAT[_[R]]=!0;T._DATA_INITIALIZED=!0}setDefaultParams(E){this.mipmap?this.setParam(E.TEXTURE_MIN_FILTER,E.LINEAR_MIPMAP_LINEAR):(this.setParam(E.TEXTURE_WRAP_S,E.CLAMP_TO_EDGE),this.setParam(E.TEXTURE_WRAP_T,E.CLAMP_TO_EDGE),this.setParam(E.TEXTURE_MIN_FILTER,E.LINEAR))}initParams(E){if(this.mipmap){const _=this.img;null===_?console.warn('You need an image to set the parameters of texture'):T.IS_POWER_OF_2(_.width)&&T.IS_POWER_OF_2(_.height)?E.generateMipmap(this.target):(this.mipmap=!1,console.warn('You need a power of 2 for the size of the mipmaped texture'))}1>this.parameters.length&&this.setDefaultParams(E);for(const[_,R]of this.parameters)E.texParameteri(this.target,_,R)}init(E){const _=E.createTexture();return T._DATA_INITIALIZED||T.SET_DATA(E),E.bindTexture(this.target,_),E.texImage2D(this.target,0,this.internalFormat,this.width,this.height,0,this.format,this.type,this.img),this.initParams(E),this._callOptimizer=l.a.getInstance(E),this.pointer=_,!0}bind(E,_,R){this._callOptimizer.optimizeTexture(this)||(E.uniform1i(_,R),E.activeTexture(E.TEXTURE0+R),E.bindTexture(this.target,this.pointer),this.updated&&(E.texImage2D(this.target,0,this.internalFormat,this.width,this.height,0,this.format,this.type,this.img),this.updated=!1))}free(E){E.bindTexture(E.TEXTURE_2D,null)}}o.a=T},function(n,o,u){'use strict';var l=u(7);class m extends l.a{constructor(T){super(),this.label=T}bind(T,E){super.bind(T),T.vertexAttribPointer(E,this.itemSize,this.itemType,!1,0,0)}clone(T=new m(this.label)){return T.label=this.label,super.clone(T),T}}o.a=m},function(n,o,u){'use strict';var l=u(5),m=u(0);class T extends m.a{constructor(E){super(E,35676,l.a.create()),this.updateNum=0,this.updated=!0,this.local=l.a.create(),this.parent=null}get global(){return this.update(),this._data}update(){const E=this.parent,_=null!==this.parent;if(this.updated||_&&this._parentUpdateNum!==E.updateNum){const R=this._data;_?(l.a.copy(E.global,R),l.a.multiply(R,this.local),this._parentUpdateNum=E.updateNum):l.a.copy(this.local,R),this.updateNum++,this.updated=!0}}clear(){l.a.identity(this.local),this.updateNum++,this.updated=!0}scale(E){l.a.scale(this.local,E),this.updateNum++,this.updated=!0}translate(E){l.a.translate(this.local,E),this.updateNum++,this.updated=!0}rotate(E,_){l.a.rotate(this.local,E,_),this.updateNum++,this.updated=!0}rotateX(E){l.a.rotateX(this.local,E),this.updateNum++,this.updated=!0}rotateY(E){l.a.rotateY(this.local,E),this.updateNum++,this.updated=!0}rotateZ(E){l.a.rotateZ(this.local,E),this.updateNum++,this.updated=!0}attach(E){this.parent=E,this._parentUpdateNum=E.updateNum,this.updateNum++,this.updated=!0}detach(){this.parent=null,this.updateNum++,this.updated=!0}}o.a=T},function(n,o,u){'use strict';var l=u(5),m=u(0);class T extends m.a{constructor(){super('uPMatrix',35676,l.a.create()),this.fovy=45,this.near=0.1,this.far=100;const E=l.a.create();this._matrix=E,this.updated=!0,this.updateNum=0,this._ratio=0,this.clear=()=>{l.a.identity(E),this.updated=!0},this.translate=(_)=>{l.a.translate(E,_),this.updated=!0},this.scale=(_)=>{l.a.scale(E,_),this.updated=!0},this.rotate=(_,R)=>{l.a.rotate(E,_,R),this.updated=!0},this.rotateX=(_)=>{l.a.rotateX(E,_),this.updated=!0},this.rotateY=(_)=>{l.a.rotateY(E,_),this.updated=!0},this.rotateZ=(_)=>{l.a.rotateZ(E,_),this.updated=!0},this.lookAt=(_,R,I)=>{l.a.lookAt(E,_,R,I),this.updated=!0}}get data(){return this.updated&&this.update(),this._data}get ratio(){return this._ratio}set ratio(E){this._ratio=E,this.updated=!0}resize(E,_){this._ratio=E/_,this.updated=!0}update(){l.a.perspective(this._data,this.fovy*_MathPI/180,this._ratio,this.near,this.far),l.a.multiply(this._data,this._matrix),this.updated=!1,this.updateNum++}}o.a=T},function(n,o){'use strict';o.a=class{constructor(){this.pointer=null}isInitialized(){return!!this.pointer}init(m){const T=m.createFramebuffer();return m.bindFramebuffer(m.FRAMEBUFFER,T),this.pointer=T,!0}bind(m){m.bindFramebuffer(m.FRAMEBUFFER,this.pointer)}free(m){m.bindFramebuffer(m.FRAMEBUFFER,null)}}},function(n,o){'use strict';o.a=class{constructor(m,T){this.pointer=null,this.width=m,this.height=T}resize(m,T,E=null){this.width=m,this.height=T,E?(E.bindRenderbuffer(E.RENDERBUFFER,this.pointer),E.renderbufferStorage(E.RENDERBUFFER,E.DEPTH_COMPONENT16,m,T)):this.updated=!0}isInitialized(){return!!this.pointer}init(m){const T=m.createRenderbuffer();m.bindRenderbuffer(m.RENDERBUFFER,T),m.renderbufferStorage(m.RENDERBUFFER,m.DEPTH_COMPONENT16,this.width,this.height),this.pointer=T}bind(m){m.bindRenderbuffer(m.RENDERBUFFER,renderBuffer),this.updated&&(m.renderbufferStorage(m.RENDERBUFFER,m.DEPTH_COMPONENT16,this.width,this.height),this.updated=!1)}}},function(n,o,u){'use strict';var l=u(10),m=u(15),T=u(14);class E{constructor(_,R,I=!0,F=!1){this.captureDepth=I,this.recordDepth=F,this.width=_,this.height=R,this.updated=!1,this._pingpong=!1,this._colorTextures=[this._genColorTexture('frameBufferColor0',_,R),this._genColorTexture('frameBufferColor1',_,R)],this.frameBuffer=new T.a}_genDepthTexture(_,R,I){const F=new l.a;return F.mipmap=!1,F.setInternalFormat(6402),F.setFormat(6402),F.setType(5123),F.setParam(10242,33071),F.setParam(10243,33071),F.setParam(10241,9728),F.setParam(10240,9728),F.setImg(null,R,I),F}_genColorTexture(_,R,I){const F=new l.a(_);return F.mipmap=!1,!1,F.setImg(null,R,I),F}pingpong(){this._pingpong=!this._pingpong}get colorTexture(){return this._colorTextures[this._pingpong?1:0]}resize(_,R,I){this.width=_,this.height=R,this.pingpong(),this.colorTexture.resize(_,R,I),this.pingpong(),this.colorTexture.resize(_,R,I),this.depthTexture&&this.depthTexture.resize(_,R,I),this.renderBuffer&&this.renderBuffer.resize(_,R,I)}isInitialized(){return!!this.frameBuffer.pointer}static SET_DATA(_){E.WEBGL_depth_texture=_.getExtension('WEBGL_depth_texture')||_.getExtension('WEBKIT_WEBGL_depth_texture')||_.getExtension('MOZ_WEBGL_depth_texture'),E._DATA_INITIALIZED=!0}init(_){return E._DATA_INITIALIZED||E.SET_DATA(_),this.recordDepth&&(E.WEBGL_depth_texture?(this.depthTexture=this._genDepthTexture('frameBufferDepth',this.width,this.height),this.depthTexture.init(_)):(console.warn('WEBGL_depth_texture Extension not available!'),this.recordDepth=!1)),this.captureDepth&&(this.renderBuffer=new m.a(this.width,this.height),this.renderBuffer.init(_)),this.frameBuffer.init(_),this.pingpong(),this.colorTexture.init(_),this.pingpong(),this.colorTexture.init(_),this.depthTexture?_.framebufferTexture2D(_.FRAMEBUFFER,_.DEPTH_ATTACHMENT,_.TEXTURE_2D,this.depthTexture.pointer,0):this.renderBuffer&&_.framebufferRenderbuffer(_.FRAMEBUFFER,_.DEPTH_ATTACHMENT,_.RENDERBUFFER,this.renderBuffer.pointer),_.bindTexture(_.TEXTURE_2D,null),_.bindFramebuffer(_.FRAMEBUFFER,null),_.bindRenderbuffer(_.RENDERBUFFER,null),!0}start(_,R=!0){this.frameBuffer.bind(_),_.framebufferTexture2D(_.FRAMEBUFFER,_.COLOR_ATTACHMENT0,_.TEXTURE_2D,this.colorTexture.pointer,0),this.depthTexture?_.framebufferTexture2D(_.FRAMEBUFFER,_.DEPTH_ATTACHMENT,_.TEXTURE_2D,R?this.depthTexture.pointer:null,0):this.renderBuffer&&_.framebufferRenderbuffer(_.FRAMEBUFFER,_.DEPTH_ATTACHMENT,_.RENDERBUFFER,R?this.renderBuffer.pointer:null)}stop(_){this.frameBuffer.free(_)}}o.a=E},,,,function(n,o,u){'use strict';var l=u(3);const m=[-0.5,-0.5,0.5,0.5,-0.5,0.5,0.5,0.5,0.5,-0.5,0.5,0.5,-0.5,-0.5,-0.5,-0.5,0.5,-0.5,0.5,0.5,-0.5,0.5,-0.5,-0.5,-0.5,0.5,-0.5,-0.5,0.5,0.5,0.5,0.5,0.5,0.5,0.5,-0.5,-0.5,-0.5,-0.5,0.5,-0.5,-0.5,0.5,-0.5,0.5,-0.5,-0.5,0.5,0.5,-0.5,-0.5,0.5,0.5,-0.5,0.5,0.5,0.5,0.5,-0.5,0.5,-0.5,-0.5,-0.5,-0.5,-0.5,0.5,-0.5,0.5,0.5,-0.5,0.5,-0.5],T=[0,1,2,0,2,3,4,5,6,4,6,7,8,9,10,8,10,11,12,13,14,12,14,15,16,17,18,16,18,19,20,21,22,20,22,23],E=[0,0,1,0,1,1,0,1,1,0,1,1,0,1,0,0,0,1,0,0,1,0,1,1,1,1,0,1,0,0,1,0,1,0,1,1,0,1,0,0,0,0,1,0,1,1,0,1];class _ extends l.a{constructor(){super(),this.addVertices('aVertexPosition',m,3),this.addIndices(T)}addColors(R,I,F,D,P,A){const L=[R,I,F,D,P,A];let U=[];for(let N in L)for(let B=0;4>B;B++)U=U.concat(L[N]);this.addVertices('aVertexColor',U,4)}addUV(){this.addVertices('aTextureCoord',E,2)}clone(R=new _){return super.clone(R)}}o.a=_},function(n,o,u){'use strict';var l=u(3);const m=[-0.5,-0.5,0.5,0.5,-0.5,0.5,0.5,0.5,0.5,-0.5,0.5,0.5,-0.5,-0.5,-0.5,-0.5,0.5,-0.5,0.5,0.5,-0.5,0.5,-0.5,-0.5],T=[0,1,2,0,2,3,4,5,6,4,6,7,3,2,6,3,6,5,0,4,7,0,7,1,7,6,2,7,2,1,0,3,5,0,5,4];class E extends l.a{constructor(){super(),this.addVertices('aVertexPosition',m,3),this.addIndices(T)}addColors(_,R,I,F,D,P,A,L){const U=[_,R,I,F,D,P,A,L];let N=[];for(let B in U)N=N.concat(U[B]);this.addVertices('aVertexColor',N,4)}clone(_=new CubeGeom){return super.clone(_)}}o.a=E},,,,,,,,,,,,function(n,o,u){'use strict';function l(){return[Math.random(),Math.random(),Math.random(),1]}function m(){const q=1,Z=[window.innerWidth,window.innerHeight];N.resize(Z[0]*q,Z[1]*q),A.width=Z[0]*q,A.height=Z[1]*q,L.resize(...Z)}function T(){G.transform.rotate(0.01,[0,1,0.5]),W.transform.rotate(-0.1,[1.5,0.1,0.5]),V.transform.rotate(0.1,[1,0.5,-0.5]),N.draw(),requestAnimationFrame(T)}Object.defineProperty(o,'__esModule',{value:!0});var E=u(2),_=u(20),R=u(21),I=u(4),F=u(13),D=u(8),P=u(9);const A=document.body.querySelector('canvas'),L=new F.a;L.translate([0,0,-10]);const U=new D.a;U.bgColor=[0.5,0,0.5,1],U.depthTest=!0;const N=new P.a(A);N.passEnabled=!1,N.addScene(U);const B=`      
    attribute vec3 aVertexPosition;
    attribute vec4 aVertexColor;

    uniform mat4 uMVMatrix;
    uniform mat4 uPMatrix;

    varying vec4 vColor;
    varying vec3 vPos;

    void main(void) {
        gl_Position = uPMatrix * uMVMatrix * vec4(aVertexPosition, 1.0);
        vColor = aVertexColor;
        vPos = aVertexPosition;
    }
`,C=`
    precision mediump float;

    varying vec4 vColor;
    varying vec3 vPos;

    // https://stackoverflow.com/questions/5149544/can-i-generate-a-random-number-inside-a-pixel-shader
    float random( vec2 p ) // Version 2
    {
        // e^pi (Gelfond's constant)
        // 2^sqrt(2) (Gelfond–Schneider constant)
        vec2 r = vec2( 23.14069263277926, 2.665144142690225 );
        // return fract( cos( mod( 12345678., 256. * dot(p,r) ) ) ); // ver1
        return fract(cos(dot(p,r)) * 123456.); // ver2
    }

    void main(void)
    {
        vec4 noise = vec4(
            random(vPos.xy),
            random(vPos.yz),
            random(vPos.xz),
            0.0);
        gl_FragColor = vColor + noise * 0.001;
    }
`,M=new E.a(B,C),O=[l(),l(),l(),l(),l(),l()],H=[l(),l(),l(),l(),l(),l(),l(),l()],v=new _.a;v.addColors(...O);const X=new R.a;X.addColors(...H);const G=new I.a(X,M);G.transform.scale([2,2,2]),G.addGlobalUniform(L),U.addMesh(G);const W=new I.a(v,M);W.transform.translate([-1.5,0,0]),W.transform.scale([0.5,0.5,0.5]),W.transform.attach(G.transform),W.addGlobalUniform(L),U.addMesh(W);const V=new I.a(X,M);V.transform.translate([0,0,-1.5]),V.transform.scale([0.5,0.5,0.5]),V.transform.attach(W.transform),V.addGlobalUniform(L),U.addMesh(V),window.onresize=m,m(),window.scene=U,T()}]);